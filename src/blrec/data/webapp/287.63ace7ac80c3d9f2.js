"use strict";(self.webpackChunkblrec=self.webpackChunkblrec||[]).push([[287],{3692:(x,D,r)=>{r.d(D,{f:()=>h});var c=r(2134),p=r(4650);class h{transform(f,_){if("string"==typeof f)f=parseFloat(f);else if("number"!=typeof f||isNaN(f))return"N/A";return(_=Object.assign({bitrate:!1,precision:3,spacer:" "},_)).bitrate?(0,c.AX)(f,_.spacer,_.precision):(0,c.N4)(f,_.spacer,_.precision)}}h.\u0275fac=function(f){return new(f||h)},h.\u0275pipe=p.Yjl({name:"datarate",type:h,pure:!0})},3520:(x,D,r)=>{r.d(D,{U:()=>h});const c={2e4:"4K",1e4:"\u539f\u753b",401:"\u84dd\u5149(\u675c\u6bd4)",400:"\u84dd\u5149",250:"\u8d85\u6e05",150:"\u9ad8\u6e05",80:"\u6d41\u7545"};var p=r(4650);class h{transform(f){return c[f]}}h.\u0275fac=function(f){return new(f||h)},h.\u0275pipe=p.Yjl({name:"quality",type:h,pure:!0})},5141:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{i:()=>InfoPanelComponent});var _angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4650),rxjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(9646),rxjs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(7445),rxjs__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(7188),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7886),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(3900),rxjs_operators__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(262),src_app_shared_rx_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(4007),_shared_task_model__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2948),ng_zorro_antd_notification__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(387),_shared_services_task_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(844),_angular_common__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(6895),_wave_graph_wave_graph_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1755),_shared_pipes_datarate_pipe__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3692),_shared_pipes_quality_pipe__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3520);function InfoPanelComponent_ul_3_ng_container_36_Template(x,D){1&x&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.ynx(0),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(1,", bluray"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.BQk())}function InfoPanelComponent_ul_3_li_38_Template(x,D){if(1&x&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"li",4)(1,"span",5),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(2,"\u6d41\u7f16\u7801\u5668"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(3,"span",6),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()),2&x){const r=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Oqu(null==r.profile.streams[0].tags?null:r.profile.streams[0].tags.encoder)}}const _c0=function(){return{bitrate:!0}};function InfoPanelComponent_ul_3_Template(x,D){if(1&x&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"ul",3)(1,"li",4)(2,"span",5),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(3,"\u89c6\u9891\u4fe1\u606f"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(4,"span",6)(5,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(7,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(8),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(9,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(10),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(11,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(12),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(13,"datarate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(14,"li",4)(15,"span",5),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(16,"\u97f3\u9891\u4fe1\u606f"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(17,"span",6)(18,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(19),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(20,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(21),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(22,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(23),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(24,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(25),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(26,"datarate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(27,"li",4)(28,"span",5),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(29,"\u683c\u5f0f\u753b\u8d28"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(30,"span",6)(31,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(32),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(33,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(34),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(35,"quality"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(36,InfoPanelComponent_ul_3_ng_container_36_Template,2,0,"ng-container",7),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(37,") "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(38,InfoPanelComponent_ul_3_li_38_Template,5,1,"li",8),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(39,"li",4)(40,"span",5),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(41,"\u6d41\u4e3b\u673a\u540d"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(42,"span",6),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(43),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(44,"li",4)(45,"span",5),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(46,"\u4e0b\u8f7d\u901f\u5ea6"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(47,"app-wave-graph",9),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(48,"span",6),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(49),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(50,"datarate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(51,"li",4)(52,"span",5),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(53,"\u5f55\u5236\u901f\u5ea6"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__._UZ(54,"app-wave-graph",9),_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(55,"span",6),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(56),_angular_core__WEBPACK_IMPORTED_MODULE_4__.ALo(57,"datarate"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()()()),2&x){const r=_angular_core__WEBPACK_IMPORTED_MODULE_4__.oxw();let c;_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",r.profile.streams[0].codec_name," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.AsE(" ",r.profile.streams[0].width,"x",r.profile.streams[0].height," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",r.fps," fps"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.xi3(13,19,1e3*r.metadata.videodatarate,_angular_core__WEBPACK_IMPORTED_MODULE_4__.DdM(32,_c0))," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(7),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",r.profile.streams[1].codec_name," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",r.profile.streams[1].sample_rate," HZ"),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",r.profile.streams[1].channel_layout," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.xi3(26,22,1e3*r.metadata.audiodatarate,_angular_core__WEBPACK_IMPORTED_MODULE_4__.DdM(33,_c0))," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(7),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",r.data.task_status.real_stream_format?r.data.task_status.real_stream_format:"N/A"," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.AsE(" ",r.data.task_status.real_quality_number?_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(35,25,r.data.task_status.real_quality_number):"N/A"," (",null!==(c=r.data.task_status.real_quality_number)&&void 0!==c?c:"N/A",""),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",r.isBlurayStreamQuality()),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",null==r.profile.streams[0]||null==r.profile.streams[0].tags?null:r.profile.streams[0].tags.encoder),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",r.data.task_status.stream_host," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("value",r.data.task_status.dl_rate),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.xi3(50,27,8*r.data.task_status.dl_rate,_angular_core__WEBPACK_IMPORTED_MODULE_4__.DdM(34,_c0))," "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("value",r.data.task_status.rec_rate),_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_4__.lcZ(57,30,r.data.task_status.rec_rate)," ")}}class InfoPanelComponent{constructor(x,D,r){this.changeDetector=x,this.notification=D,this.taskService=r,this.metadata=null,this.close=new _angular_core__WEBPACK_IMPORTED_MODULE_4__.vpe,this.RunningStatus=_shared_task_model__WEBPACK_IMPORTED_MODULE_5__.cG}get fps(){const avgFrameRate=this.profile?.streams[0]?.avg_frame_rate;return avgFrameRate?eval(avgFrameRate).toFixed():"N/A"}ngOnInit(){this.syncData()}ngOnDestroy(){this.desyncData()}isBlurayStreamQuality(){return/_bluray/.test(this.data.task_status.stream_url)}closePanel(x){x.preventDefault(),x.stopPropagation(),this.close.emit()}syncData(){this.dataSubscription=(0,rxjs__WEBPACK_IMPORTED_MODULE_6__.of)((0,rxjs__WEBPACK_IMPORTED_MODULE_6__.of)(0),(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.F)(1e3)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.u)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.w)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_10__.$)(this.taskService.getStreamProfile(this.data.room_info.room_id),this.taskService.getMetadata(this.data.room_info.room_id))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.K)(x=>{throw this.notification.error("\u83b7\u53d6\u6570\u636e\u51fa\u9519",x.message),x}),(0,src_app_shared_rx_operators__WEBPACK_IMPORTED_MODULE_12__.X)(3,1e3)).subscribe(([x,D])=>{this.profile=x,this.metadata=D,this.changeDetector.markForCheck()},x=>{this.notification.error("\u83b7\u53d6\u6570\u636e\u51fa\u9519","\u7f51\u7edc\u8fde\u63a5\u5f02\u5e38, \u8bf7\u5f85\u7f51\u7edc\u6b63\u5e38\u540e\u5237\u65b0\u3002",{nzDuration:0})})}desyncData(){this.dataSubscription?.unsubscribe()}}InfoPanelComponent.\u0275fac=function x(D){return new(D||InfoPanelComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_4__.sBO),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y36(ng_zorro_antd_notification__WEBPACK_IMPORTED_MODULE_13__.zb),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Y36(_shared_services_task_service__WEBPACK_IMPORTED_MODULE_0__.M))},InfoPanelComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_4__.Xpm({type:InfoPanelComponent,selectors:[["app-info-panel"]],inputs:{data:"data",profile:"profile",metadata:"metadata"},outputs:{close:"close"},decls:4,vars:1,consts:[[1,"info-panel"],["title","\u5173\u95ed",1,"close-panel",3,"click"],["class","info-list",4,"ngIf"],[1,"info-list"],[1,"info-item"],[1,"label"],[1,"value"],[4,"ngIf"],["class","info-item",4,"ngIf"],[3,"value"]],template:function x(D,r){1&D&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.TgZ(0,"div",0)(1,"button",1),_angular_core__WEBPACK_IMPORTED_MODULE_4__.NdJ("click",function(p){return r.closePanel(p)}),_angular_core__WEBPACK_IMPORTED_MODULE_4__._uU(2," [x] "),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_4__.YNc(3,InfoPanelComponent_ul_3_Template,58,35,"ul",2),_angular_core__WEBPACK_IMPORTED_MODULE_4__.qZA()),2&D&&(_angular_core__WEBPACK_IMPORTED_MODULE_4__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_4__.Q6J("ngIf",r.data.task_status.running_status===r.RunningStatus.RECORDING&&r.profile&&r.profile.streams&&r.profile.format&&r.metadata))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_14__.O5,_wave_graph_wave_graph_component__WEBPACK_IMPORTED_MODULE_1__.w,_shared_pipes_datarate_pipe__WEBPACK_IMPORTED_MODULE_2__.f,_shared_pipes_quality_pipe__WEBPACK_IMPORTED_MODULE_3__.U],styles:['@charset "UTF-8";.info-panel[_ngcontent-%COMP%]{color:#fff;text-shadow:1px 1px 2px black;margin:0;padding:0 .5rem;background:rgba(0,0,0,.32)}.info-panel[_ngcontent-%COMP%]{position:absolute;inset:2.55rem 0rem 2rem;width:100%;font-size:1rem;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;overflow:auto}.info-panel[_ngcontent-%COMP%]::-webkit-scrollbar{background-color:transparent;width:4px;height:4px}.info-panel[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.info-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#eee;border-radius:2px}.info-panel[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#fff}.info-panel[_ngcontent-%COMP%]   .close-panel[_ngcontent-%COMP%]{position:absolute;top:0rem;right:0rem;width:2rem;height:2rem;padding:0;color:#fff;background:transparent;border:none;font-size:1rem;display:flex;align-items:center;justify-content:center;cursor:pointer}.info-panel[_ngcontent-%COMP%]   .info-list[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none;width:100%;height:100%}.info-panel[_ngcontent-%COMP%]   .info-list[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:inline-block;margin:0;width:5rem;text-align:right}.info-panel[_ngcontent-%COMP%]   .info-list[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]:after{content:"\\ff1a"}.info-panel[_ngcontent-%COMP%]   .info-list[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{display:inline-block;margin:0;text-align:left}.info-panel[_ngcontent-%COMP%]   .info-list[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(:first-child):before{content:", "}app-wave-graph[_ngcontent-%COMP%]{margin-right:1rem}'],changeDetection:0})},1755:(x,D,r)=>{r.d(D,{w:()=>h});var c=r(7445),p=r(4650);class h{constructor(f){this.changeDetector=f,this.value=0,this.width=200,this.height=16,this.stroke="white",this.data=[],this.points=[];for(let _=0;_<=this.width;_+=2)this.data.push(0),this.points.push({x:_,y:this.height})}get polylinePoints(){return this.points.map(f=>`${f.x},${f.y}`).join(" ")}ngOnInit(){this.subscription=(0,c.F)(1e3).subscribe(()=>{this.data.push(this.value||0),this.data.shift();let f=Math.max(...this.data);this.points=this.data.map((_,q)=>({x:Math.min(2*q,this.width),y:(1-_/(f||1))*this.height})),this.changeDetector.markForCheck()})}ngOnDestroy(){this.subscription?.unsubscribe()}}h.\u0275fac=function(f){return new(f||h)(p.Y36(p.sBO))},h.\u0275cmp=p.Xpm({type:h,selectors:[["app-wave-graph"]],inputs:{value:"value",width:"width",height:"height",stroke:"stroke"},decls:2,vars:4,consts:[["fill","none"]],template:function(f,_){1&f&&(p.O4$(),p.TgZ(0,"svg"),p._UZ(1,"polyline",0),p.qZA()),2&f&&(p.uIk("width",_.width)("height",_.height),p.xp6(1),p.uIk("stroke",_.stroke)("points",_.polylinePoints))},styles:["[_nghost-%COMP%]{position:relative;top:2px}"],changeDetection:0})},844:(x,D,r)=>{r.d(D,{M:()=>_});var c=r(4004),p=r(2948),h=r(4650),t=r(529),f=r(7930);class _{constructor(u,g){this.http=u,this.url=g}getAllTaskData(u=p.jf.ALL){const g=this.url.makeApiUrl("/api/v1/tasks/data");return this.http.get(g,{params:{select:u}})}getTaskData(u){const g=this.url.makeApiUrl(`/api/v1/tasks/${u}/data`);return this.http.get(g)}getVideoFileDetails(u){const g=this.url.makeApiUrl(`/api/v1/tasks/${u}/videos`);return this.http.get(g)}getDanmakuFileDetails(u){const g=this.url.makeApiUrl(`/api/v1/tasks/${u}/danmakus`);return this.http.get(g)}getTaskParam(u){const g=this.url.makeApiUrl(`/api/v1/tasks/${u}/param`);return this.http.get(g)}getMetadata(u){const g=this.url.makeApiUrl(`/api/v1/tasks/${u}/metadata`);return this.http.get(g)}getStreamProfile(u){const g=this.url.makeApiUrl(`/api/v1/tasks/${u}/profile`);return this.http.get(g)}updateAllTaskInfos(){const u=this.url.makeApiUrl("/api/v1/tasks/info");return this.http.post(u,null)}updateTaskInfo(u){const g=this.url.makeApiUrl(`/api/v1/tasks/${u}/info`);return this.http.post(g,null)}addTask(u){const g=this.url.makeApiUrl(`/api/v1/tasks/${u}`);return this.http.post(g,null)}removeTask(u){const g=this.url.makeApiUrl(`/api/v1/tasks/${u}`);return this.http.delete(g)}removeAllTasks(){const u=this.url.makeApiUrl("/api/v1/tasks");return this.http.delete(u)}startTask(u){const g=this.url.makeApiUrl(`/api/v1/tasks/${u}/start`);return this.http.post(g,null)}startAllTasks(){const u=this.url.makeApiUrl("/api/v1/tasks/start");return this.http.post(u,null)}stopTask(u,g=!1,O=!1){const E=this.url.makeApiUrl(`/api/v1/tasks/${u}/stop`);return this.http.post(E,{force:g,background:O})}stopAllTasks(u=!1,g=!1){const O=this.url.makeApiUrl("/api/v1/tasks/stop");return this.http.post(O,{force:u,background:g})}enableTaskMonitor(u){const g=this.url.makeApiUrl(`/api/v1/tasks/${u}/monitor/enable`);return this.http.post(g,null)}enableAllMonitors(){const u=this.url.makeApiUrl("/api/v1/tasks/monitor/enable");return this.http.post(u,null)}disableTaskMonitor(u,g=!1){const O=this.url.makeApiUrl(`/api/v1/tasks/${u}/monitor/disable`);return this.http.post(O,{background:g})}disableAllMonitors(u=!1){const g=this.url.makeApiUrl("/api/v1/tasks/monitor/disable");return this.http.post(g,{background:u})}enableTaskRecorder(u){const g=this.url.makeApiUrl(`/api/v1/tasks/${u}/recorder/enable`);return this.http.post(g,null)}enableAllRecorders(){const u=this.url.makeApiUrl("/api/v1/tasks/recorder/enable");return this.http.post(u,null)}disableTaskRecorder(u,g=!1,O=!1){const E=this.url.makeApiUrl(`/api/v1/tasks/${u}/recorder/disable`);return this.http.post(E,{force:g,background:O})}disableAllRecorders(u=!1,g=!1){const O=this.url.makeApiUrl("/api/v1/tasks/recorder/disable");return this.http.post(O,{force:u,background:g})}canCutStream(u){const g=this.url.makeApiUrl(`/api/v1/tasks/${u}/cut`);return this.http.get(g).pipe((0,c.U)(O=>O.data.result))}cutStream(u){const g=this.url.makeApiUrl(`/api/v1/tasks/${u}/cut`);return this.http.post(g,null)}}_.\u0275fac=function(u){return new(u||_)(h.LFG(t.eN),h.LFG(f.i))},_.\u0275prov=h.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})},2948:(x,D,r)=>{r.d(D,{cG:()=>p,cS:()=>t,ii:()=>h,jf:()=>c});var c=(()=>{return(_=c||(c={})).ALL="all",_.PREPARING="preparing",_.LIVING="living",_.ROUNDING="rounding",_.MONITOR_ENABLED="monitor_enabled",_.MONITOR_DISABLED="monitor_disabled",_.RECORDER_ENABLED="recorder_enabled",_.RECORDER_DISABLED="recorder_disabled",_.STOPPED="stopped",_.WAITTING="waitting",_.RECORDING="recording",_.REMUXING="remuxing",_.INJECTING="injecting",c;var _})(),p=(()=>{return(_=p||(p={})).STOPPED="stopped",_.WAITING="waiting",_.RECORDING="recording",_.REMUXING="remuxing",_.INJECTING="injecting",p;var _})(),h=(()=>{return(_=h||(h={})).WAITING="waiting",_.REMUXING="remuxing",_.INJECTING="injecting",h;var _})(),t=(()=>{return(_=t||(t={})).RECORDING="recording",_.REMUXING="remuxing",_.INJECTING="injecting",_.COMPLETED="completed",_.MISSING="missing",_.UNKNOWN="unknown",t;var _})()},2287:(x,D,r)=>{r.r(D),r.d(D,{TasksModule:()=>ot});var c=r(6895),p=r(433),h=r(2289),t=r(4650);class f{constructor(o,e){this._document=e;const i=this._textarea=this._document.createElement("textarea"),a=i.style;a.position="fixed",a.top=a.opacity="0",a.left="-999em",i.setAttribute("aria-hidden","true"),i.value=o,i.readOnly=!0,this._document.body.appendChild(i)}copy(){const o=this._textarea;let e=!1;try{if(o){const i=this._document.activeElement;o.select(),o.setSelectionRange(0,o.value.length),e=this._document.execCommand("copy"),i&&i.focus()}}catch{}return e}destroy(){const o=this._textarea;o&&(o.remove(),this._textarea=void 0)}}let _=(()=>{class n{constructor(e){this._document=e}copy(e){const i=this.beginCopy(e),a=i.copy();return i.destroy(),a}beginCopy(e){return new f(e,this._document)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(c.K0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),g=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})();var O=r(3679),E=r(1971),P=r(1102),T=r(655),F=r(7579),y=r(2722),$=r(3414),k=r(3187),S=r(445);function bt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"span",1),t.NdJ("click",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.closeTag(a))}),t.qZA()}}const De=["*"];let Wt=(()=>{class n{constructor(e,i,a,s){this.cdr=e,this.renderer=i,this.elementRef=a,this.directionality=s,this.isPresetColor=!1,this.nzMode="default",this.nzChecked=!1,this.nzOnClose=new t.vpe,this.nzCheckedChange=new t.vpe,this.dir="ltr",this.destroy$=new F.x}updateCheckedStatus(){"checkable"===this.nzMode&&(this.nzChecked=!this.nzChecked,this.nzCheckedChange.emit(this.nzChecked))}closeTag(e){this.nzOnClose.emit(e),e.defaultPrevented||this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)}clearPresetColor(){const e=this.elementRef.nativeElement,i=new RegExp(`(ant-tag-(?:${[...$.uf,...$.Bh].join("|")}))`,"g"),a=e.classList.toString(),s=[];let d=i.exec(a);for(;null!==d;)s.push(d[1]),d=i.exec(a);e.classList.remove(...s)}setPresetColor(){const e=this.elementRef.nativeElement;this.clearPresetColor(),this.isPresetColor=!!this.nzColor&&((0,$.o2)(this.nzColor)||(0,$.M8)(this.nzColor)),this.isPresetColor&&e.classList.add(`ant-tag-${this.nzColor}`)}ngOnInit(){this.directionality.change?.pipe((0,y.R)(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(e){const{nzColor:i}=e;i&&this.setPresetColor()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(t.Qsj),t.Y36(t.SBq),t.Y36(S.Is,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["nz-tag"]],hostAttrs:[1,"ant-tag"],hostVars:10,hostBindings:function(e,i){1&e&&t.NdJ("click",function(){return i.updateCheckedStatus()}),2&e&&(t.Udp("background-color",i.isPresetColor?"":i.nzColor),t.ekj("ant-tag-has-color",i.nzColor&&!i.isPresetColor)("ant-tag-checkable","checkable"===i.nzMode)("ant-tag-checkable-checked",i.nzChecked)("ant-tag-rtl","rtl"===i.dir))},inputs:{nzMode:"nzMode",nzColor:"nzColor",nzChecked:"nzChecked"},outputs:{nzOnClose:"nzOnClose",nzCheckedChange:"nzCheckedChange"},exportAs:["nzTag"],features:[t.TTD],ngContentSelectors:De,decls:2,vars:1,consts:[["nz-icon","","nzType","close","class","ant-tag-close-icon","tabindex","-1",3,"click",4,"ngIf"],["nz-icon","","nzType","close","tabindex","-1",1,"ant-tag-close-icon",3,"click"]],template:function(e,i){1&e&&(t.F$t(),t.Hsn(0),t.YNc(1,bt,1,0,"span",0)),2&e&&(t.xp6(1),t.Q6J("ngIf","closeable"===i.nzMode))},dependencies:[c.O5,P.Ls],encapsulation:2,changeDetection:0}),(0,T.gn)([(0,k.yF)()],n.prototype,"nzChecked",void 0),n})(),ke=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[S.vT,c.ez,p.u5,P.PV]}),n})();var Yt=r(4383);const Me=["nzType","avatar"];function Oe(n,o){if(1&n&&(t.TgZ(0,"div",5),t._UZ(1,"nz-skeleton-element",6),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("nzSize",e.avatar.size||"default")("nzShape",e.avatar.shape||"circle")}}function ve(n,o){if(1&n&&t._UZ(0,"h3",7),2&n){const e=t.oxw(2);t.Udp("width",e.toCSSUnit(e.title.width))}}function Ee(n,o){if(1&n&&t._UZ(0,"li"),2&n){const e=o.index,i=t.oxw(3);t.Udp("width",i.toCSSUnit(i.widthList[e]))}}function Ae(n,o){if(1&n&&(t.TgZ(0,"ul",8),t.YNc(1,Ee,1,2,"li",9),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.rowsList)}}function Pe(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Oe,2,2,"div",1),t.TgZ(2,"div",2),t.YNc(3,ve,1,2,"h3",3),t.YNc(4,Ae,2,1,"ul",4),t.qZA(),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!!e.nzAvatar),t.xp6(2),t.Q6J("ngIf",!!e.nzTitle),t.xp6(1),t.Q6J("ngIf",!!e.nzParagraph)}}function ye(n,o){1&n&&(t.ynx(0),t.Hsn(1),t.BQk())}const Se=["*"];let be=(()=>{class n{constructor(){this.nzActive=!1,this.nzBlock=!1}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["nz-skeleton-element"]],hostAttrs:[1,"ant-skeleton","ant-skeleton-element"],hostVars:4,hostBindings:function(e,i){2&e&&t.ekj("ant-skeleton-active",i.nzActive)("ant-skeleton-block",i.nzBlock)},inputs:{nzActive:"nzActive",nzType:"nzType",nzBlock:"nzBlock"}}),(0,T.gn)([(0,k.yF)()],n.prototype,"nzBlock",void 0),n})(),Fe=(()=>{class n{constructor(){this.nzShape="circle",this.nzSize="default",this.styleMap={}}ngOnChanges(e){if(e.nzSize&&"number"==typeof this.nzSize){const i=`${this.nzSize}px`;this.styleMap={width:i,height:i,"line-height":i}}else this.styleMap={}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["nz-skeleton-element","nzType","avatar"]],inputs:{nzShape:"nzShape",nzSize:"nzSize"},features:[t.TTD],attrs:Me,decls:1,vars:9,consts:[[1,"ant-skeleton-avatar",3,"ngStyle"]],template:function(e,i){1&e&&t._UZ(0,"span",0),2&e&&(t.ekj("ant-skeleton-avatar-square","square"===i.nzShape)("ant-skeleton-avatar-circle","circle"===i.nzShape)("ant-skeleton-avatar-lg","large"===i.nzSize)("ant-skeleton-avatar-sm","small"===i.nzSize),t.Q6J("ngStyle",i.styleMap))},dependencies:[c.PC],encapsulation:2,changeDetection:0}),n})(),we=(()=>{class n{constructor(e,i,a){this.cdr=e,this.nzActive=!1,this.nzLoading=!0,this.nzRound=!1,this.nzTitle=!0,this.nzAvatar=!1,this.nzParagraph=!0,this.rowsList=[],this.widthList=[],i.addClass(a.nativeElement,"ant-skeleton")}toCSSUnit(e=""){return(0,k.WX)(e)}getTitleProps(){const e=!!this.nzAvatar,i=!!this.nzParagraph;let a="";return!e&&i?a="38%":e&&i&&(a="50%"),{width:a,...this.getProps(this.nzTitle)}}getAvatarProps(){return{shape:this.nzTitle&&!this.nzParagraph?"square":"circle",size:"large",...this.getProps(this.nzAvatar)}}getParagraphProps(){const e=!!this.nzAvatar,i=!!this.nzTitle,a={};return(!e||!i)&&(a.width="61%"),a.rows=!e&&i?3:2,{...a,...this.getProps(this.nzParagraph)}}getProps(e){return e&&"object"==typeof e?e:{}}getWidthList(){const{width:e,rows:i}=this.paragraph;let a=[];return e&&Array.isArray(e)?a=e:e&&!Array.isArray(e)&&(a=[],a[i-1]=e),a}updateProps(){this.title=this.getTitleProps(),this.avatar=this.getAvatarProps(),this.paragraph=this.getParagraphProps(),this.rowsList=[...Array(this.paragraph.rows)],this.widthList=this.getWidthList(),this.cdr.markForCheck()}ngOnInit(){this.updateProps()}ngOnChanges(e){(e.nzTitle||e.nzAvatar||e.nzParagraph)&&this.updateProps()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(t.Qsj),t.Y36(t.SBq))},n.\u0275cmp=t.Xpm({type:n,selectors:[["nz-skeleton"]],hostVars:6,hostBindings:function(e,i){2&e&&t.ekj("ant-skeleton-with-avatar",!!i.nzAvatar)("ant-skeleton-active",i.nzActive)("ant-skeleton-round",!!i.nzRound)},inputs:{nzActive:"nzActive",nzLoading:"nzLoading",nzRound:"nzRound",nzTitle:"nzTitle",nzAvatar:"nzAvatar",nzParagraph:"nzParagraph"},exportAs:["nzSkeleton"],features:[t.TTD],ngContentSelectors:Se,decls:2,vars:2,consts:[[4,"ngIf"],["class","ant-skeleton-header",4,"ngIf"],[1,"ant-skeleton-content"],["class","ant-skeleton-title",3,"width",4,"ngIf"],["class","ant-skeleton-paragraph",4,"ngIf"],[1,"ant-skeleton-header"],["nzType","avatar",3,"nzSize","nzShape"],[1,"ant-skeleton-title"],[1,"ant-skeleton-paragraph"],[3,"width",4,"ngFor","ngForOf"]],template:function(e,i){1&e&&(t.F$t(),t.YNc(0,Pe,5,3,"ng-container",0),t.YNc(1,ye,2,0,"ng-container",0)),2&e&&(t.Q6J("ngIf",i.nzLoading),t.xp6(1),t.Q6J("ngIf",!i.nzLoading))},dependencies:[c.sg,c.O5,be,Fe],encapsulation:2,changeDetection:0}),n})(),qt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[S.vT,c.ez]}),n})();var it=r(7570),Ft=r(1243),j=r(9562),At=r(6616),K=r(5156),R=r(6704),V=r(5635),$t=r(8213),Ie=r(4903),Ne=r(8184),U=r(6287),Ze=r(1691),Be=r(2687),Ue=r(1811);let Ye=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[S.vT,c.ez,At.sL,Ne.U8,Ue.YI,P.PV,U.T,Ze.e4,Ie.g,it.cg,Be.rt]}),n})();var Pt=r(8521),jt=r(2577),Vt=r(4788),Ht=r(5681),qe=r(2539),b=r(2536);function $e(n,o){1&n&&t.GkF(0)}function je(n,o){if(1&n&&(t.ynx(0),t.YNc(1,$e,1,0,"ng-container",9),t.BQk()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("nzStringTemplateOutlet",e.nzIcon)}}function Ve(n,o){if(1&n&&t._UZ(0,"span",10),2&n){const e=t.oxw(3);t.Q6J("nzType",e.nzIconType||e.inferredIconType)("nzTheme",e.iconTheme)}}function He(n,o){if(1&n&&(t.TgZ(0,"div",6),t.YNc(1,je,2,1,"ng-container",7),t.YNc(2,Ve,1,2,"ng-template",null,8,t.W1O),t.qZA()),2&n){const e=t.MAs(3),i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.nzIcon)("ngIfElse",e)}}function Xe(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw(4);t.xp6(1),t.Oqu(e.nzMessage)}}function tn(n,o){if(1&n&&(t.TgZ(0,"span",14),t.YNc(1,Xe,2,1,"ng-container",9),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("nzStringTemplateOutlet",e.nzMessage)}}function en(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw(4);t.xp6(1),t.Oqu(e.nzDescription)}}function nn(n,o){if(1&n&&(t.TgZ(0,"span",15),t.YNc(1,en,2,1,"ng-container",9),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("nzStringTemplateOutlet",e.nzDescription)}}function on(n,o){if(1&n&&(t.TgZ(0,"div",11),t.YNc(1,tn,2,1,"span",12),t.YNc(2,nn,2,1,"span",13),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.nzMessage),t.xp6(1),t.Q6J("ngIf",e.nzDescription)}}function an(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(e.nzAction)}}function sn(n,o){if(1&n&&(t.TgZ(0,"div",16),t.YNc(1,an,2,1,"ng-container",9),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("nzStringTemplateOutlet",e.nzAction)}}function rn(n,o){1&n&&t._UZ(0,"span",19)}function ln(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"span",20),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw(4);t.xp6(2),t.Oqu(e.nzCloseText)}}function cn(n,o){if(1&n&&(t.ynx(0),t.YNc(1,ln,3,1,"ng-container",9),t.BQk()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("nzStringTemplateOutlet",e.nzCloseText)}}function _n(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.closeAlert())}),t.YNc(1,rn,1,0,"ng-template",null,18,t.W1O),t.YNc(3,cn,2,1,"ng-container",7),t.qZA()}if(2&n){const e=t.MAs(2),i=t.oxw(2);t.xp6(3),t.Q6J("ngIf",i.nzCloseText)("ngIfElse",e)}}function un(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",1),t.NdJ("@slideAlertMotion.done",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onFadeAnimationDone())}),t.YNc(1,He,4,2,"div",2),t.YNc(2,on,3,2,"div",3),t.YNc(3,sn,2,1,"div",4),t.YNc(4,_n,4,2,"button",5),t.qZA()}if(2&n){const e=t.oxw();t.ekj("ant-alert-rtl","rtl"===e.dir)("ant-alert-success","success"===e.nzType)("ant-alert-info","info"===e.nzType)("ant-alert-warning","warning"===e.nzType)("ant-alert-error","error"===e.nzType)("ant-alert-no-icon",!e.nzShowIcon)("ant-alert-banner",e.nzBanner)("ant-alert-closable",e.nzCloseable)("ant-alert-with-description",!!e.nzDescription),t.Q6J("@.disabled",e.nzNoAnimation)("@slideAlertMotion",void 0),t.xp6(1),t.Q6J("ngIf",e.nzShowIcon),t.xp6(1),t.Q6J("ngIf",e.nzMessage||e.nzDescription),t.xp6(1),t.Q6J("ngIf",e.nzAction),t.xp6(1),t.Q6J("ngIf",e.nzCloseable||e.nzCloseText)}}let pn=(()=>{class n{constructor(e,i,a){this.nzConfigService=e,this.cdr=i,this.directionality=a,this._nzModuleName="alert",this.nzAction=null,this.nzCloseText=null,this.nzIconType=null,this.nzMessage=null,this.nzDescription=null,this.nzType="info",this.nzCloseable=!1,this.nzShowIcon=!1,this.nzBanner=!1,this.nzNoAnimation=!1,this.nzIcon=null,this.nzOnClose=new t.vpe,this.closed=!1,this.iconTheme="fill",this.inferredIconType="info-circle",this.dir="ltr",this.isTypeSet=!1,this.isShowIconSet=!1,this.destroy$=new F.x,this.nzConfigService.getConfigChangeEventForComponent("alert").pipe((0,y.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,y.R)(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value}closeAlert(){this.closed=!0}onFadeAnimationDone(){this.closed&&this.nzOnClose.emit(!0)}ngOnChanges(e){const{nzShowIcon:i,nzDescription:a,nzType:s,nzBanner:d}=e;if(i&&(this.isShowIconSet=!0),s)switch(this.isTypeSet=!0,this.nzType){case"error":this.inferredIconType="close-circle";break;case"success":this.inferredIconType="check-circle";break;case"info":this.inferredIconType="info-circle";break;case"warning":this.inferredIconType="exclamation-circle"}a&&(this.iconTheme=this.nzDescription?"outline":"fill"),d&&(this.isTypeSet||(this.nzType="warning"),this.isShowIconSet||(this.nzShowIcon=!0))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.jY),t.Y36(t.sBO),t.Y36(S.Is,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["nz-alert"]],inputs:{nzAction:"nzAction",nzCloseText:"nzCloseText",nzIconType:"nzIconType",nzMessage:"nzMessage",nzDescription:"nzDescription",nzType:"nzType",nzCloseable:"nzCloseable",nzShowIcon:"nzShowIcon",nzBanner:"nzBanner",nzNoAnimation:"nzNoAnimation",nzIcon:"nzIcon"},outputs:{nzOnClose:"nzOnClose"},exportAs:["nzAlert"],features:[t.TTD],decls:1,vars:1,consts:[["class","ant-alert",3,"ant-alert-rtl","ant-alert-success","ant-alert-info","ant-alert-warning","ant-alert-error","ant-alert-no-icon","ant-alert-banner","ant-alert-closable","ant-alert-with-description",4,"ngIf"],[1,"ant-alert"],["class","ant-alert-icon",4,"ngIf"],["class","ant-alert-content",4,"ngIf"],["class","ant-alert-action",4,"ngIf"],["type","button","tabindex","0","class","ant-alert-close-icon",3,"click",4,"ngIf"],[1,"ant-alert-icon"],[4,"ngIf","ngIfElse"],["iconDefaultTemplate",""],[4,"nzStringTemplateOutlet"],["nz-icon","",3,"nzType","nzTheme"],[1,"ant-alert-content"],["class","ant-alert-message",4,"ngIf"],["class","ant-alert-description",4,"ngIf"],[1,"ant-alert-message"],[1,"ant-alert-description"],[1,"ant-alert-action"],["type","button","tabindex","0",1,"ant-alert-close-icon",3,"click"],["closeDefaultTemplate",""],["nz-icon","","nzType","close"],[1,"ant-alert-close-text"]],template:function(e,i){1&e&&t.YNc(0,un,5,24,"div",0),2&e&&t.Q6J("ngIf",!i.closed)},dependencies:[c.O5,P.Ls,U.f],encapsulation:2,data:{animation:[qe.Rq]},changeDetection:0}),(0,T.gn)([(0,b.oS)(),(0,k.yF)()],n.prototype,"nzCloseable",void 0),(0,T.gn)([(0,b.oS)(),(0,k.yF)()],n.prototype,"nzShowIcon",void 0),(0,T.gn)([(0,k.yF)()],n.prototype,"nzBanner",void 0),(0,T.gn)([(0,k.yF)()],n.prototype,"nzNoAnimation",void 0),n})(),gn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[S.vT,c.ez,P.PV,U.T]}),n})();var at=r(7131),wt=r(8e3);function dn(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"span",8),t.BQk()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("nzType",e.icon)}}function mn(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=o.$implicit,i=t.oxw(4);t.xp6(1),t.hij(" ",e(i.nzPercent)," ")}}const hn=function(n){return{$implicit:n}};function fn(n,o){if(1&n&&t.YNc(0,mn,2,1,"ng-container",9),2&n){const e=t.oxw(3);t.Q6J("nzStringTemplateOutlet",e.formatter)("nzStringTemplateOutletContext",t.VKq(2,hn,e.nzPercent))}}function Cn(n,o){if(1&n&&(t.TgZ(0,"span",5),t.YNc(1,dn,2,1,"ng-container",6),t.YNc(2,fn,1,4,"ng-template",null,7,t.W1O),t.qZA()),2&n){const e=t.MAs(3),i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",("exception"===i.status||"success"===i.status)&&!i.nzFormat)("ngIfElse",e)}}function zn(n,o){if(1&n&&t.YNc(0,Cn,4,2,"span",4),2&n){const e=t.oxw();t.Q6J("ngIf",e.nzShowInfo)}}function Tn(n,o){if(1&n&&t._UZ(0,"div",17),2&n){const e=t.oxw(4);t.Udp("width",e.nzSuccessPercent,"%")("border-radius","round"===e.nzStrokeLinecap?"100px":"0")("height",e.strokeWidth,"px")}}function xn(n,o){if(1&n&&(t.TgZ(0,"div",13)(1,"div",14),t._UZ(2,"div",15),t.YNc(3,Tn,1,6,"div",16),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(2),t.Udp("width",e.nzPercent,"%")("border-radius","round"===e.nzStrokeLinecap?"100px":"0")("background",e.isGradient?null:e.nzStrokeColor)("background-image",e.isGradient?e.lineGradient:null)("height",e.strokeWidth,"px"),t.xp6(1),t.Q6J("ngIf",e.nzSuccessPercent||0===e.nzSuccessPercent)}}function Dn(n,o){}function kn(n,o){if(1&n&&(t.ynx(0),t.YNc(1,xn,4,11,"div",11),t.YNc(2,Dn,0,0,"ng-template",12),t.BQk()),2&n){const e=t.oxw(2),i=t.MAs(1);t.xp6(1),t.Q6J("ngIf",!e.isSteps),t.xp6(1),t.Q6J("ngTemplateOutlet",i)}}function Mn(n,o){1&n&&t._UZ(0,"div",20),2&n&&t.Q6J("ngStyle",o.$implicit)}function On(n,o){}function vn(n,o){if(1&n&&(t.TgZ(0,"div",18),t.YNc(1,Mn,1,1,"div",19),t.YNc(2,On,0,0,"ng-template",12),t.qZA()),2&n){const e=t.oxw(2),i=t.MAs(1);t.xp6(1),t.Q6J("ngForOf",e.steps),t.xp6(1),t.Q6J("ngTemplateOutlet",i)}}function En(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,kn,3,2,"ng-container",2),t.YNc(2,vn,3,2,"div",10),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.isSteps),t.xp6(1),t.Q6J("ngIf",e.isSteps)}}function An(n,o){if(1&n&&(t.O4$(),t._UZ(0,"stop")),2&n){const e=o.$implicit;t.uIk("offset",e.offset)("stop-color",e.color)}}function Pn(n,o){if(1&n&&(t.O4$(),t.TgZ(0,"defs")(1,"linearGradient",24),t.YNc(2,An,1,2,"stop",25),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("id","gradient-"+e.gradientId),t.xp6(1),t.Q6J("ngForOf",e.circleGradient)}}function yn(n,o){if(1&n&&(t.O4$(),t._UZ(0,"path",26)),2&n){const e=o.$implicit,i=t.oxw(2);t.Q6J("ngStyle",e.strokePathStyle),t.uIk("d",i.pathString)("stroke-linecap",i.nzStrokeLinecap)("stroke",e.stroke)("stroke-width",i.nzPercent?i.strokeWidth:0)}}function Sn(n,o){1&n&&t.O4$()}function bn(n,o){if(1&n&&(t.TgZ(0,"div",14),t.O4$(),t.TgZ(1,"svg",21),t.YNc(2,Pn,3,2,"defs",2),t._UZ(3,"path",22),t.YNc(4,yn,1,5,"path",23),t.qZA(),t.YNc(5,Sn,0,0,"ng-template",12),t.qZA()),2&n){const e=t.oxw(),i=t.MAs(1);t.Udp("width",e.nzWidth,"px")("height",e.nzWidth,"px")("font-size",.15*e.nzWidth+6,"px"),t.ekj("ant-progress-circle-gradient",e.isGradient),t.xp6(2),t.Q6J("ngIf",e.isGradient),t.xp6(1),t.Q6J("ngStyle",e.trailPathStyle),t.uIk("stroke-width",e.strokeWidth)("d",e.pathString),t.xp6(1),t.Q6J("ngForOf",e.progressCirclePath)("ngForTrackBy",e.trackByFn),t.xp6(1),t.Q6J("ngTemplateOutlet",i)}}const te=n=>{let o=[];return Object.keys(n).forEach(e=>{const i=n[e],a=function Fn(n){return+n.replace("%","")}(e);isNaN(a)||o.push({key:a,value:i})}),o=o.sort((e,i)=>e.key-i.key),o};let Nn=0;const ee="progress",Zn=new Map([["success","check"],["exception","close"]]),Bn=new Map([["normal","#108ee9"],["exception","#ff5500"],["success","#87d068"]]),Un=n=>`${n}%`;let ne=(()=>{class n{constructor(e,i,a){this.cdr=e,this.nzConfigService=i,this.directionality=a,this._nzModuleName=ee,this.nzShowInfo=!0,this.nzWidth=132,this.nzStrokeColor=void 0,this.nzSize="default",this.nzPercent=0,this.nzStrokeWidth=void 0,this.nzGapDegree=void 0,this.nzType="line",this.nzGapPosition="top",this.nzStrokeLinecap="round",this.nzSteps=0,this.steps=[],this.lineGradient=null,this.isGradient=!1,this.isSteps=!1,this.gradientId=Nn++,this.progressCirclePath=[],this.trailPathStyle=null,this.dir="ltr",this.trackByFn=s=>`${s}`,this.cachedStatus="normal",this.inferredStatus="normal",this.destroy$=new F.x}get formatter(){return this.nzFormat||Un}get status(){return this.nzStatus||this.inferredStatus}get strokeWidth(){return this.nzStrokeWidth||("line"===this.nzType&&"small"!==this.nzSize?8:6)}get isCircleStyle(){return"circle"===this.nzType||"dashboard"===this.nzType}ngOnChanges(e){const{nzSteps:i,nzGapPosition:a,nzStrokeLinecap:s,nzStrokeColor:d,nzGapDegree:C,nzType:z,nzStatus:M,nzPercent:A,nzSuccessPercent:l,nzStrokeWidth:B}=e;M&&(this.cachedStatus=this.nzStatus||this.cachedStatus),(A||l)&&(parseInt(this.nzPercent.toString(),10)>=100?((0,k.DX)(this.nzSuccessPercent)&&this.nzSuccessPercent>=100||void 0===this.nzSuccessPercent)&&(this.inferredStatus="success"):this.inferredStatus=this.cachedStatus),(M||A||l||d)&&this.updateIcon(),d&&this.setStrokeColor(),(a||s||C||z||A||d||d)&&this.getCirclePaths(),(A||i||B)&&(this.isSteps=this.nzSteps>0,this.isSteps&&this.getSteps())}ngOnInit(){this.nzConfigService.getConfigChangeEventForComponent(ee).pipe((0,y.R)(this.destroy$)).subscribe(()=>{this.updateIcon(),this.setStrokeColor(),this.getCirclePaths()}),this.directionality.change?.pipe((0,y.R)(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updateIcon(){const e=Zn.get(this.status);this.icon=e?e+(this.isCircleStyle?"-o":"-circle-fill"):""}getSteps(){const e=Math.floor(this.nzSteps*(this.nzPercent/100)),i="small"===this.nzSize?2:14,a=[];for(let s=0;s<this.nzSteps;s++){let d;s<=e-1&&(d=this.nzStrokeColor),a.push({backgroundColor:`${d}`,width:`${i}px`,height:`${this.strokeWidth}px`})}this.steps=a}getCirclePaths(){if(!this.isCircleStyle)return;const e=(0,k.DX)(this.nzSuccessPercent)?[this.nzSuccessPercent,this.nzPercent]:[this.nzPercent],i=50-this.strokeWidth/2,s=2*Math.PI*i,d=this.nzGapDegree||("circle"===this.nzType?0:75);let C=0,z=-i,M=0,A=-2*i;switch(this.nzGapPosition||("circle"===this.nzType?"top":"bottom")){case"left":C=-i,z=0,M=2*i,A=0;break;case"right":C=i,z=0,M=-2*i,A=0;break;case"bottom":z=i,A=2*i}this.pathString=`M 50,50 m ${C},${z}\n       a ${i},${i} 0 1 1 ${M},${-A}\n       a ${i},${i} 0 1 1 ${-M},${A}`,this.trailPathStyle={strokeDasharray:`${s-d}px ${s}px`,strokeDashoffset:`-${d/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s"},this.progressCirclePath=e.map((l,B)=>{const I=2===e.length&&0===B;return{stroke:this.isGradient&&!I?`url(#gradient-${this.gradientId})`:null,strokePathStyle:{stroke:this.isGradient?null:I?Bn.get("success"):this.nzStrokeColor,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s",strokeDasharray:`${(l||0)/100*(s-d)}px ${s}px`,strokeDashoffset:`-${d/2}px`}}}).reverse()}setStrokeColor(){const e=this.nzStrokeColor,i=this.isGradient=!!e&&"string"!=typeof e;i&&!this.isCircleStyle?this.lineGradient=(n=>{const{from:o="#1890ff",to:e="#1890ff",direction:i="to right",...a}=n;return 0!==Object.keys(a).length?`linear-gradient(${i}, ${te(a).map(({key:d,value:C})=>`${C} ${d}%`).join(", ")})`:`linear-gradient(${i}, ${o}, ${e})`})(e):i&&this.isCircleStyle?this.circleGradient=(n=>te(this.nzStrokeColor).map(({key:o,value:e})=>({offset:`${o}%`,color:e})))():(this.lineGradient=null,this.circleGradient=[])}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(b.jY),t.Y36(S.Is,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["nz-progress"]],inputs:{nzShowInfo:"nzShowInfo",nzWidth:"nzWidth",nzStrokeColor:"nzStrokeColor",nzSize:"nzSize",nzFormat:"nzFormat",nzSuccessPercent:"nzSuccessPercent",nzPercent:"nzPercent",nzStrokeWidth:"nzStrokeWidth",nzGapDegree:"nzGapDegree",nzStatus:"nzStatus",nzType:"nzType",nzGapPosition:"nzGapPosition",nzStrokeLinecap:"nzStrokeLinecap",nzSteps:"nzSteps"},exportAs:["nzProgress"],features:[t.TTD],decls:5,vars:17,consts:[["progressInfoTemplate",""],[3,"ngClass"],[4,"ngIf"],["class","ant-progress-inner",3,"width","height","fontSize","ant-progress-circle-gradient",4,"ngIf"],["class","ant-progress-text",4,"ngIf"],[1,"ant-progress-text"],[4,"ngIf","ngIfElse"],["formatTemplate",""],["nz-icon","",3,"nzType"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["class","ant-progress-steps-outer",4,"ngIf"],["class","ant-progress-outer",4,"ngIf"],[3,"ngTemplateOutlet"],[1,"ant-progress-outer"],[1,"ant-progress-inner"],[1,"ant-progress-bg"],["class","ant-progress-success-bg",3,"width","border-radius","height",4,"ngIf"],[1,"ant-progress-success-bg"],[1,"ant-progress-steps-outer"],["class","ant-progress-steps-item",3,"ngStyle",4,"ngFor","ngForOf"],[1,"ant-progress-steps-item",3,"ngStyle"],["viewBox","0 0 100 100",1,"ant-progress-circle"],["stroke","#f3f3f3","fill-opacity","0",1,"ant-progress-circle-trail",3,"ngStyle"],["class","ant-progress-circle-path","fill-opacity","0",3,"ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],["x1","100%","y1","0%","x2","0%","y2","0%",3,"id"],[4,"ngFor","ngForOf"],["fill-opacity","0",1,"ant-progress-circle-path",3,"ngStyle"]],template:function(e,i){1&e&&(t.YNc(0,zn,1,1,"ng-template",null,0,t.W1O),t.TgZ(2,"div",1),t.YNc(3,En,3,2,"div",2),t.YNc(4,bn,6,15,"div",3),t.qZA()),2&e&&(t.xp6(2),t.ekj("ant-progress-line","line"===i.nzType)("ant-progress-small","small"===i.nzSize)("ant-progress-default","default"===i.nzSize)("ant-progress-show-info",i.nzShowInfo)("ant-progress-circle",i.isCircleStyle)("ant-progress-steps",i.isSteps)("ant-progress-rtl","rtl"===i.dir),t.Q6J("ngClass","ant-progress ant-progress-status-"+i.status),t.xp6(1),t.Q6J("ngIf","line"===i.nzType),t.xp6(1),t.Q6J("ngIf",i.isCircleStyle))},dependencies:[c.mk,c.sg,c.O5,c.tP,c.PC,P.Ls,U.f],encapsulation:2,changeDetection:0}),(0,T.gn)([(0,b.oS)()],n.prototype,"nzShowInfo",void 0),(0,T.gn)([(0,b.oS)()],n.prototype,"nzStrokeColor",void 0),(0,T.gn)([(0,b.oS)()],n.prototype,"nzSize",void 0),(0,T.gn)([(0,k.Rn)()],n.prototype,"nzSuccessPercent",void 0),(0,T.gn)([(0,k.Rn)()],n.prototype,"nzPercent",void 0),(0,T.gn)([(0,b.oS)(),(0,k.Rn)()],n.prototype,"nzStrokeWidth",void 0),(0,T.gn)([(0,b.oS)(),(0,k.Rn)()],n.prototype,"nzGapDegree",void 0),(0,T.gn)([(0,b.oS)()],n.prototype,"nzGapPosition",void 0),(0,T.gn)([(0,b.oS)()],n.prototype,"nzStrokeLinecap",void 0),(0,T.gn)([(0,k.Rn)()],n.prototype,"nzSteps",void 0),n})(),Rn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[S.vT,c.ez,P.PV,U.T]}),n})();var L=r(6675),oe=r(3353);let Ln=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez]}),n})();const Jn=function(n){return{$implicit:n}};function Qn(n,o){if(1&n&&t.GkF(0,3),2&n){const e=t.oxw();t.Q6J("ngTemplateOutlet",e.nzValueTemplate)("ngTemplateOutletContext",t.VKq(2,Jn,e.nzValue))}}function Kn(n,o){if(1&n&&(t.TgZ(0,"span",6),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.displayInt)}}function Gn(n,o){if(1&n&&(t.TgZ(0,"span",7),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.displayDecimal)}}function Wn(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Kn,2,1,"span",4),t.YNc(2,Gn,2,1,"span",5),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.displayInt),t.xp6(1),t.Q6J("ngIf",e.displayDecimal)}}function Yn(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.nzTitle)}}function qn(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.nzPrefix)}}function $n(n,o){if(1&n&&(t.TgZ(0,"span",6),t.YNc(1,qn,2,1,"ng-container",1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("nzStringTemplateOutlet",e.nzPrefix)}}function jn(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Oqu(e.nzSuffix)}}function Vn(n,o){if(1&n&&(t.TgZ(0,"span",7),t.YNc(1,jn,2,1,"ng-container",1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("nzStringTemplateOutlet",e.nzSuffix)}}let Hn=(()=>{class n{constructor(e){this.locale_id=e,this.displayInt="",this.displayDecimal=""}ngOnChanges(){this.formatNumber()}formatNumber(){const e="number"==typeof this.nzValue?".":(0,c.dv)(this.locale_id,c.wE.Decimal),i=String(this.nzValue),[a,s]=i.split(e);this.displayInt=a,this.displayDecimal=s?`${e}${s}`:""}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.soG))},n.\u0275cmp=t.Xpm({type:n,selectors:[["nz-statistic-number"]],inputs:{nzValue:"nzValue",nzValueTemplate:"nzValueTemplate"},exportAs:["nzStatisticNumber"],features:[t.TTD],decls:3,vars:2,consts:[[1,"ant-statistic-content-value"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","ant-statistic-content-value-int",4,"ngIf"],["class","ant-statistic-content-value-decimal",4,"ngIf"],[1,"ant-statistic-content-value-int"],[1,"ant-statistic-content-value-decimal"]],template:function(e,i){1&e&&(t.TgZ(0,"span",0),t.YNc(1,Qn,1,4,"ng-container",1),t.YNc(2,Wn,3,2,"ng-container",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.nzValueTemplate),t.xp6(1),t.Q6J("ngIf",!i.nzValueTemplate))},dependencies:[c.O5,c.tP],encapsulation:2,changeDetection:0}),n})(),ie=(()=>{class n{constructor(e,i){this.cdr=e,this.directionality=i,this.nzValueStyle={},this.dir="ltr",this.destroy$=new F.x}ngOnInit(){this.directionality.change?.pipe((0,y.R)(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(S.Is,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["nz-statistic"]],hostAttrs:[1,"ant-statistic"],hostVars:2,hostBindings:function(e,i){2&e&&t.ekj("ant-statistic-rtl","rtl"===i.dir)},inputs:{nzPrefix:"nzPrefix",nzSuffix:"nzSuffix",nzTitle:"nzTitle",nzValue:"nzValue",nzValueStyle:"nzValueStyle",nzValueTemplate:"nzValueTemplate"},exportAs:["nzStatistic"],decls:6,vars:6,consts:[[1,"ant-statistic-title"],[4,"nzStringTemplateOutlet"],[1,"ant-statistic-content",3,"ngStyle"],["class","ant-statistic-content-prefix",4,"ngIf"],[3,"nzValue","nzValueTemplate"],["class","ant-statistic-content-suffix",4,"ngIf"],[1,"ant-statistic-content-prefix"],[1,"ant-statistic-content-suffix"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Yn,2,1,"ng-container",1),t.qZA(),t.TgZ(2,"div",2),t.YNc(3,$n,2,1,"span",3),t._UZ(4,"nz-statistic-number",4),t.YNc(5,Vn,2,1,"span",5),t.qZA()),2&e&&(t.xp6(1),t.Q6J("nzStringTemplateOutlet",i.nzTitle),t.xp6(1),t.Q6J("ngStyle",i.nzValueStyle),t.xp6(1),t.Q6J("ngIf",i.nzPrefix),t.xp6(1),t.Q6J("nzValue",i.nzValue)("nzValueTemplate",i.nzValueTemplate),t.xp6(1),t.Q6J("ngIf",i.nzSuffix))},dependencies:[c.O5,c.PC,U.f,Hn],encapsulation:2,changeDetection:0}),n})(),Xn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[S.vT,c.ez,oe.ud,U.T,Ln]}),n})();var ae=r(6451),to=r(8675),st=r(3900),eo=r(3601),v=r(8505),no=r(8932),It=r(3303);function oo(n,o){1&n&&t.Hsn(0)}const io=["*"];function ao(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(e.nzTitle)}}function so(n,o){if(1&n&&(t.TgZ(0,"div",6),t.YNc(1,ao,2,1,"ng-container",7),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("nzStringTemplateOutlet",e.nzTitle)}}function ro(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw(3);t.xp6(1),t.Oqu(e.nzExtra)}}function lo(n,o){if(1&n&&(t.TgZ(0,"div",8),t.YNc(1,ro,2,1,"ng-container",7),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("nzStringTemplateOutlet",e.nzExtra)}}function co(n,o){if(1&n&&(t.TgZ(0,"div",3),t.YNc(1,so,2,1,"div",4),t.YNc(2,lo,2,1,"div",5),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.nzTitle),t.xp6(1),t.Q6J("ngIf",e.nzExtra)}}function _o(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.title," ")}}function uo(n,o){}function po(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"td",12)(2,"div",13)(3,"span",14),t.YNc(4,_o,2,1,"ng-container",7),t.qZA(),t.TgZ(5,"span",15),t.YNc(6,uo,0,0,"ng-template",16),t.qZA()()(),t.BQk()),2&n){const e=t.oxw().$implicit,i=t.oxw(3);t.xp6(1),t.Q6J("colSpan",e.span),t.xp6(2),t.ekj("ant-descriptions-item-no-colon",!i.nzColon),t.xp6(1),t.Q6J("nzStringTemplateOutlet",e.title),t.xp6(2),t.Q6J("ngTemplateOutlet",e.content)}}function go(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.title," ")}}function mo(n,o){}function ho(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"td",14),t.YNc(2,go,2,1,"ng-container",7),t.qZA(),t.TgZ(3,"td",17),t.YNc(4,mo,0,0,"ng-template",16),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("nzStringTemplateOutlet",e.title),t.xp6(1),t.Q6J("colSpan",2*e.span-1),t.xp6(1),t.Q6J("ngTemplateOutlet",e.content)}}function fo(n,o){if(1&n&&(t.ynx(0),t.YNc(1,po,7,5,"ng-container",2),t.YNc(2,ho,5,3,"ng-container",2),t.BQk()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",!e.nzBordered),t.xp6(1),t.Q6J("ngIf",e.nzBordered)}}function Co(n,o){if(1&n&&(t.TgZ(0,"tr",10),t.YNc(1,fo,3,2,"ng-container",11),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngForOf",e)}}function zo(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Co,2,1,"tr",9),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.itemMatrix)}}function To(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.title," ")}}function xo(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"td",12)(2,"div",13)(3,"span",14),t.YNc(4,To,2,1,"ng-container",7),t.qZA()()(),t.BQk()),2&n){const e=o.$implicit,i=t.oxw(4);t.xp6(1),t.Q6J("colSpan",e.span),t.xp6(2),t.ekj("ant-descriptions-item-no-colon",!i.nzColon),t.xp6(1),t.Q6J("nzStringTemplateOutlet",e.title)}}function Do(n,o){}function ko(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"td",12)(2,"div",13)(3,"span",15),t.YNc(4,Do,0,0,"ng-template",16),t.qZA()()(),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("colSpan",e.span),t.xp6(3),t.Q6J("ngTemplateOutlet",e.content)}}function Mo(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"tr",10),t.YNc(2,xo,5,4,"ng-container",11),t.qZA(),t.TgZ(3,"tr",10),t.YNc(4,ko,5,2,"ng-container",11),t.qZA(),t.BQk()),2&n){const e=o.$implicit;t.xp6(2),t.Q6J("ngForOf",e),t.xp6(2),t.Q6J("ngForOf",e)}}function Oo(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Mo,5,2,"ng-container",11),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.itemMatrix)}}function vo(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.title," ")}}function Eo(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"td",18),t.YNc(2,vo,2,1,"ng-container",7),t.qZA(),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("colSpan",e.span),t.xp6(1),t.Q6J("nzStringTemplateOutlet",e.title)}}function Ao(n,o){}function Po(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"td",17),t.YNc(2,Ao,0,0,"ng-template",16),t.qZA(),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("colSpan",e.span),t.xp6(1),t.Q6J("ngTemplateOutlet",e.content)}}function yo(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"tr",10),t.YNc(2,Eo,3,2,"ng-container",11),t.qZA(),t.TgZ(3,"tr",10),t.YNc(4,Po,3,2,"ng-container",11),t.qZA(),t.BQk()),2&n){const e=o.$implicit;t.xp6(2),t.Q6J("ngForOf",e),t.xp6(2),t.Q6J("ngForOf",e)}}function So(n,o){if(1&n&&(t.ynx(0),t.YNc(1,yo,5,2,"ng-container",11),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.itemMatrix)}}function bo(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Oo,2,1,"ng-container",2),t.YNc(2,So,2,1,"ng-container",2),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.nzBordered),t.xp6(1),t.Q6J("ngIf",e.nzBordered)}}let Nt=(()=>{class n{constructor(){this.nzSpan=1,this.nzTitle="",this.inputChange$=new F.x}ngOnChanges(){this.inputChange$.next()}ngOnDestroy(){this.inputChange$.complete()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["nz-descriptions-item"]],viewQuery:function(e,i){if(1&e&&t.Gf(t.Rgc,7),2&e){let a;t.iGM(a=t.CRH())&&(i.content=a.first)}},inputs:{nzSpan:"nzSpan",nzTitle:"nzTitle"},exportAs:["nzDescriptionsItem"],features:[t.TTD],ngContentSelectors:io,decls:1,vars:0,template:function(e,i){1&e&&(t.F$t(),t.YNc(0,oo,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),(0,T.gn)([(0,k.Rn)()],n.prototype,"nzSpan",void 0),n})();const wo={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};let se=(()=>{class n{constructor(e,i,a,s){this.nzConfigService=e,this.cdr=i,this.breakpointService=a,this.directionality=s,this._nzModuleName="descriptions",this.nzBordered=!1,this.nzLayout="horizontal",this.nzColumn=wo,this.nzSize="default",this.nzTitle="",this.nzColon=!0,this.itemMatrix=[],this.realColumn=3,this.dir="ltr",this.breakpoint=It.G_.md,this.destroy$=new F.x}ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe((0,y.R)(this.destroy$)).subscribe(e=>{this.dir=e})}ngOnChanges(e){e.nzColumn&&this.prepareMatrix()}ngAfterContentInit(){const e=this.items.changes.pipe((0,to.O)(this.items),(0,y.R)(this.destroy$));(0,ae.T)(e,e.pipe((0,st.w)(()=>(0,ae.T)(...this.items.map(i=>i.inputChange$)).pipe((0,eo.e)(16)))),this.breakpointService.subscribe(It.WV).pipe((0,v.b)(i=>this.breakpoint=i))).pipe((0,y.R)(this.destroy$)).subscribe(()=>{this.prepareMatrix(),this.cdr.markForCheck()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}prepareMatrix(){if(!this.items)return;let e=[],i=0;const a=this.realColumn=this.getColumn(),s=this.items.toArray(),d=s.length,C=[],z=()=>{C.push(e),e=[],i=0};for(let M=0;M<d;M++){const A=s[M],{nzTitle:l,content:B,nzSpan:I}=A;i+=I,i>=a?(i>a&&(0,no.ZK)(`"nzColumn" is ${a} but we have row length ${i}`),e.push({title:l,content:B,span:a-(i-I)}),z()):M===d-1?(e.push({title:l,content:B,span:a-(i-I)}),z()):e.push({title:l,content:B,span:I})}this.itemMatrix=C}getColumn(){return"number"!=typeof this.nzColumn?this.nzColumn[this.breakpoint]:this.nzColumn}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.jY),t.Y36(t.sBO),t.Y36(It.r3),t.Y36(S.Is,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["nz-descriptions"]],contentQueries:function(e,i,a){if(1&e&&t.Suo(a,Nt,4),2&e){let s;t.iGM(s=t.CRH())&&(i.items=s)}},hostAttrs:[1,"ant-descriptions"],hostVars:8,hostBindings:function(e,i){2&e&&t.ekj("ant-descriptions-bordered",i.nzBordered)("ant-descriptions-middle","middle"===i.nzSize)("ant-descriptions-small","small"===i.nzSize)("ant-descriptions-rtl","rtl"===i.dir)},inputs:{nzBordered:"nzBordered",nzLayout:"nzLayout",nzColumn:"nzColumn",nzSize:"nzSize",nzTitle:"nzTitle",nzExtra:"nzExtra",nzColon:"nzColon"},exportAs:["nzDescriptions"],features:[t.TTD],decls:6,vars:3,consts:[["class","ant-descriptions-header",4,"ngIf"],[1,"ant-descriptions-view"],[4,"ngIf"],[1,"ant-descriptions-header"],["class","ant-descriptions-title",4,"ngIf"],["class","ant-descriptions-extra",4,"ngIf"],[1,"ant-descriptions-title"],[4,"nzStringTemplateOutlet"],[1,"ant-descriptions-extra"],["class","ant-descriptions-row",4,"ngFor","ngForOf"],[1,"ant-descriptions-row"],[4,"ngFor","ngForOf"],[1,"ant-descriptions-item",3,"colSpan"],[1,"ant-descriptions-item-container"],[1,"ant-descriptions-item-label"],[1,"ant-descriptions-item-content"],[3,"ngTemplateOutlet"],[1,"ant-descriptions-item-content",3,"colSpan"],[1,"ant-descriptions-item-label",3,"colSpan"]],template:function(e,i){1&e&&(t.YNc(0,co,3,2,"div",0),t.TgZ(1,"div",1)(2,"table")(3,"tbody"),t.YNc(4,zo,2,1,"ng-container",2),t.YNc(5,bo,3,2,"ng-container",2),t.qZA()()()),2&e&&(t.Q6J("ngIf",i.nzTitle||i.nzExtra),t.xp6(4),t.Q6J("ngIf","horizontal"===i.nzLayout),t.xp6(1),t.Q6J("ngIf","vertical"===i.nzLayout))},dependencies:[c.sg,c.O5,c.tP,U.f],encapsulation:2,changeDetection:0}),(0,T.gn)([(0,k.yF)(),(0,b.oS)()],n.prototype,"nzBordered",void 0),(0,T.gn)([(0,b.oS)()],n.prototype,"nzColumn",void 0),(0,T.gn)([(0,b.oS)()],n.prototype,"nzSize",void 0),(0,T.gn)([(0,b.oS)(),(0,k.yF)()],n.prototype,"nzColon",void 0),n})(),Io=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[S.vT,c.ez,U.T,oe.ud]}),n})();var yt=r(5861),w=r(9646),St=r(515),re=r(4986),No=r(9751),Zo=r(4482),le=r(5403),Bo=r(8421);const ce={leading:!0,trailing:!1};var Ro=r(5963);class Zt{constructor(o){this.changes=o}static of(o){return new Zt(o)}notEmpty(o){if(this.changes[o]){const e=this.changes[o].currentValue;if(null!=e)return(0,w.of)(e)}return St.E}has(o){return this.changes[o]?(0,w.of)(this.changes[o].currentValue):St.E}notFirst(o){return this.changes[o]&&!this.changes[o].isFirstChange()?(0,w.of)(this.changes[o].currentValue):St.E}notFirstAndEmpty(o){if(this.changes[o]&&!this.changes[o].isFirstChange()){const e=this.changes[o].currentValue;if(null!=e)return(0,w.of)(e)}return St.E}}const _e=new t.OlP("NGX_ECHARTS_CONFIG");let ue=(()=>{class n{constructor(e,i,a){this.el=i,this.ngZone=a,this.options=null,this.theme=null,this.initOpts=null,this.merge=null,this.autoResize=!0,this.loading=!1,this.loadingType="default",this.loadingOpts=null,this.chartInit=new t.vpe,this.optionsError=new t.vpe,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartPieSelectChanged=this.createLazyEvent("pieselectchanged"),this.chartPieSelected=this.createLazyEvent("pieselected"),this.chartPieUnselected=this.createLazyEvent("pieunselected"),this.chartMapSelectChanged=this.createLazyEvent("mapselectchanged"),this.chartMapSelected=this.createLazyEvent("mapselected"),this.chartMapUnselected=this.createLazyEvent("mapunselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartFocusNodeAdjacency=this.createLazyEvent("focusnodeadjacency"),this.chartUnfocusNodeAdjacency=this.createLazyEvent("unfocusnodeadjacency"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.resize$=new F.x,this.echarts=e.echarts}ngOnChanges(e){const i=Zt.of(e);i.notFirstAndEmpty("options").subscribe(a=>this.onOptionsChange(a)),i.notFirstAndEmpty("merge").subscribe(a=>this.setOption(a)),i.has("loading").subscribe(a=>this.toggleLoading(!!a)),i.notFirst("theme").subscribe(()=>this.refreshChart())}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(function Lo(n,o=re.z,e=ce){const i=(0,Ro.H)(n,o);return function Uo(n,o=ce){return(0,Zo.e)((e,i)=>{const{leading:a,trailing:s}=o;let d=!1,C=null,z=null,M=!1;const A=()=>{z?.unsubscribe(),z=null,s&&(I(),M&&i.complete())},l=()=>{z=null,M&&i.complete()},B=Y=>z=(0,Bo.Xf)(n(Y)).subscribe((0,le.x)(i,A,l)),I=()=>{if(d){d=!1;const Y=C;C=null,i.next(Y),!M&&B(Y)}};e.subscribe((0,le.x)(i,Y=>{d=!0,C=Y,(!z||z.closed)&&(a?I():B(Y))},()=>{M=!0,(!(s&&d&&z)||z.closed)&&i.complete()}))})}(()=>i,e)}(100,re.z,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(()=>{this.animationFrameID=window.requestAnimationFrame(()=>this.resize$.next())})),this.resizeOb.observe(this.el.nativeElement))}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(e){this.chart&&(e?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading())}setOption(e,i){if(this.chart)try{this.chart.setOption(e,i)}catch(a){console.error(a),this.optionsError.emit(a)}}refreshChart(){var e=this;return(0,yt.Z)(function*(){e.dispose(),yield e.initChart()})()}createChart(){const e=this.el.nativeElement;if(window&&window.getComputedStyle){const i=window.getComputedStyle(e,null).getPropertyValue("height");(!i||"0px"===i)&&(!e.style.height||"0px"===e.style.height)&&(e.style.height="400px")}return this.ngZone.runOutsideAngular(()=>("function"==typeof this.echarts?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:a})=>a(e,this.theme,this.initOpts)))}initChart(){var e=this;return(0,yt.Z)(function*(){yield e.onOptionsChange(e.options),e.merge&&e.chart&&e.setOption(e.merge)})()}onOptionsChange(e){var i=this;return(0,yt.Z)(function*(){e&&(i.chart||(i.chart=yield i.createChart(),i.chartInit.emit(i.chart)),i.setOption(i.options,!0))})()}createLazyEvent(e){return this.chartInit.pipe((0,st.w)(i=>new No.y(a=>(i.on(e,s=>this.ngZone.run(()=>a.next(s))),()=>{this.chart&&(this.chart.isDisposed()||i.off(e))}))))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_e),t.Y36(t.SBq),t.Y36(t.R0b))},n.\u0275dir=t.lG2({type:n,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loading:"loading",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartPieSelectChanged:"chartPieSelectChanged",chartPieSelected:"chartPieSelected",chartPieUnselected:"chartPieUnselected",chartMapSelectChanged:"chartMapSelectChanged",chartMapSelected:"chartMapSelected",chartMapUnselected:"chartMapUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartFocusNodeAdjacency:"chartFocusNodeAdjacency",chartUnfocusNodeAdjacency:"chartUnfocusNodeAdjacency",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[t.TTD]}),n})(),Jo=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[{provide:_e,useValue:e}]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})();var Qo=r(4466),rt=r(6582),pe=r(7445),ge=r(7188),de=r(7886),lt=r(262),Bt=r(4007),me=r(387),Ut=r(844),Ko=r(5545),Go=r(7512),m=r(2948),Wo=r(8147);class J{transform(o,e){return(0,Wo.G)(o,{base:2,standard:"jedec",...e,output:"string"})}}J.\u0275fac=function(o){return new(o||J)},J.\u0275pipe=t.Yjl({name:"filesize",type:J,pure:!0});class G{transform(o){return o?o.startsWith("/")?o.split("/").pop()??"":o.split("\\").pop()??"":""}}G.\u0275fac=function(o){return new(o||G)},G.\u0275pipe=t.Yjl({name:"filename",type:G,pure:!0});const Yo=new Map([[m.cS.RECORDING,"\u5f55\u5236\u4e2d"],[m.cS.INJECTING,"\u5904\u7406\u4e2d"],[m.cS.REMUXING,"\u5904\u7406\u4e2d"],[m.cS.COMPLETED,"\u5df2\u5b8c\u6210"],[m.cS.MISSING,"\u4e0d\u5b58\u5728"],[m.cS.UNKNOWN,"???"]]);class ct{transform(o){return Yo.get(o)??"\uff1f\uff1f\uff1f"}}function qo(n,o){if(1&n&&(t.TgZ(0,"th",5),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("nzSortOrder",e.sortOrder)("nzSortFn",e.sortFn)("nzSortDirections",e.sortDirections)("nzFilters",e.listOfFilter)("nzFilterFn",e.filterFn)("nzFilterMultiple",e.filterMultiple)("nzShowFilter",e.listOfFilter.length>0),t.xp6(1),t.hij(" ",e.name," ")}}function $o(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td",6),t._uU(2),t.ALo(3,"filename"),t.qZA(),t.TgZ(4,"td",6),t.ALo(5,"number"),t._uU(6),t.ALo(7,"filesize"),t.qZA(),t.TgZ(8,"td",6),t._uU(9),t.ALo(10,"filestatus"),t.qZA()()),2&n){const e=o.$implicit;t.xp6(1),t.s9C("title",e.path),t.xp6(1),t.Oqu(t.lcZ(3,9,e.path)),t.xp6(2),t.s9C("title",t.lcZ(5,11,e.size)),t.xp6(2),t.Oqu(t.lcZ(7,13,e.size)),t.xp6(2),t.Gre("status ",e.status,""),t.s9C("title",e.status),t.xp6(1),t.hij(" ",t.lcZ(10,15,e.status)," ")}}ct.\u0275fac=function(o){return new(o||ct)},ct.\u0275pipe=t.Yjl({name:"filestatus",type:ct,pure:!0});const he=[m.cS.RECORDING,m.cS.INJECTING,m.cS.REMUXING,m.cS.COMPLETED,m.cS.MISSING];class _t{constructor(){this.loading=!0,this.videoFileDetails=[],this.danmakuFileDetails=[],this.VideoFileStatus=m.cS,this.fileDetails=[],this.columns=[{name:"\u6587\u4ef6",sortOrder:"ascend",sortFn:(o,e)=>o.path.localeCompare(e.path),sortDirections:["ascend","descend"],filterMultiple:!1,listOfFilter:[{text:"\u89c6\u9891",value:"video"},{text:"\u5f39\u5e55",value:"danmaku"}],filterFn:(o,e)=>{switch(o){case"video":return e.path.endsWith(".flv")||e.path.endsWith(".mp4");case"danmaku":return e.path.endsWith(".xml");default:return!1}}},{name:"\u5927\u5c0f",sortOrder:null,sortFn:(o,e)=>o.size-e.size,sortDirections:["ascend","descend",null],filterMultiple:!0,listOfFilter:[],filterFn:null},{name:"\u72b6\u6001",sortOrder:null,sortFn:(o,e)=>he.indexOf(o.status)-he.indexOf(e.status),sortDirections:["ascend","descend",null],filterMultiple:!0,listOfFilter:[{text:"\u5f55\u5236\u4e2d",value:[m.cS.RECORDING]},{text:"\u5904\u7406\u4e2d",value:[m.cS.INJECTING,m.cS.REMUXING]},{text:"\u5df2\u5b8c\u6210",value:[m.cS.COMPLETED]},{text:"\u4e0d\u5b58\u5728",value:[m.cS.MISSING]}],filterFn:(o,e)=>o.some(i=>i.some(a=>a===e.status))}]}ngOnChanges(){this.fileDetails=[...this.videoFileDetails,...this.danmakuFileDetails]}trackByPath(o,e){return e.path}}_t.\u0275fac=function(o){return new(o||_t)},_t.\u0275cmp=t.Xpm({type:_t,selectors:[["app-task-file-detail"]],inputs:{loading:"loading",videoFileDetails:"videoFileDetails",danmakuFileDetails:"danmakuFileDetails"},features:[t.TTD],decls:8,vars:8,consts:[["nzTitle","\u6587\u4ef6\u8be6\u60c5",3,"nzLoading"],[3,"nzLoading","nzData","nzPageSize","nzHideOnSinglePage"],["fileDetailsTable",""],[3,"nzSortOrder","nzSortFn","nzSortDirections","nzFilters","nzFilterFn","nzFilterMultiple","nzShowFilter",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"nzSortOrder","nzSortFn","nzSortDirections","nzFilters","nzFilterFn","nzFilterMultiple","nzShowFilter"],[3,"title"]],template:function(o,e){if(1&o&&(t.TgZ(0,"nz-card",0)(1,"nz-table",1,2)(3,"thead")(4,"tr"),t.YNc(5,qo,2,8,"th",3),t.qZA()(),t.TgZ(6,"tbody"),t.YNc(7,$o,11,17,"tr",4),t.qZA()()()),2&o){const i=t.MAs(2);t.Q6J("nzLoading",e.loading),t.xp6(1),t.Q6J("nzLoading",e.loading)("nzData",e.fileDetails)("nzPageSize",8)("nzHideOnSinglePage",!0),t.xp6(4),t.Q6J("ngForOf",e.columns),t.xp6(2),t.Q6J("ngForOf",i.data)("ngForTrackBy",e.trackByPath)}},dependencies:[c.sg,E.bd,L.N8,L.qD,L.Uo,L._C,L.Om,L.p0,L.$Z,c.JJ,J,G,ct],styles:[".status.recording[_ngcontent-%COMP%]{color:red}.status.injecting[_ngcontent-%COMP%], .status.remuxing[_ngcontent-%COMP%]{color:#00f}.status.completed[_ngcontent-%COMP%]{color:green}.status.missing[_ngcontent-%COMP%]{color:gray}.status.broken[_ngcontent-%COMP%]{color:orange}"],changeDetection:0});class ut{constructor(){this.loading=!0}ngOnInit(){}}function jo(n,o){if(1&n&&(t.TgZ(0,"span",18),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("",e.roomInfo.short_room_id," ")}}function Vo(n,o){1&n&&(t.ynx(0),t._uU(1,"\u95f2\u7f6e"),t.BQk())}function Ho(n,o){1&n&&(t.ynx(0),t._uU(1,"\u76f4\u64ad\u4e2d"),t.BQk())}function Xo(n,o){1&n&&(t.ynx(0),t._uU(1,"\u8f6e\u64ad\u4e2d"),t.BQk())}function ti(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"date"),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",t.Dn7(2,1,1e3*e.roomInfo.live_start_time,"YYYY-MM-dd HH:mm:ss","+8")," ")}}function ei(n,o){if(1&n&&(t.TgZ(0,"nz-tag"),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e," ")}}function ni(n,o){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e)}}ut.\u0275fac=function(o){return new(o||ut)},ut.\u0275cmp=t.Xpm({type:ut,selectors:[["app-task-user-info-detail"]],inputs:{loading:"loading",userInfo:"userInfo"},decls:12,vars:6,consts:[["nzTitle","\u4e3b\u64ad\u4fe1\u606f",3,"nzLoading"],["nzTitle",""],["nzTitle","\u6635\u79f0"],["nzTitle","\u6027\u522b"],["nzTitle","UID"],["nzTitle","\u7b49\u7ea7"],["nzTitle","\u7b7e\u540d"]],template:function(o,e){1&o&&(t.TgZ(0,"nz-card",0)(1,"nz-descriptions",1)(2,"nz-descriptions-item",2),t._uU(3),t.qZA(),t.TgZ(4,"nz-descriptions-item",3),t._uU(5),t.qZA(),t.TgZ(6,"nz-descriptions-item",4),t._uU(7),t.qZA(),t.TgZ(8,"nz-descriptions-item",5),t._uU(9),t.qZA(),t.TgZ(10,"nz-descriptions-item",6),t._uU(11),t.qZA()()()),2&o&&(t.Q6J("nzLoading",e.loading),t.xp6(3),t.Oqu(e.userInfo.name),t.xp6(2),t.Oqu(e.userInfo.gender),t.xp6(2),t.Oqu(e.userInfo.uid),t.xp6(2),t.Oqu(e.userInfo.level),t.xp6(2),t.hij(" ",e.userInfo.sign," "))},dependencies:[E.bd,se,Nt],changeDetection:0});class pt{constructor(){this.loading=!0}ngOnInit(){}}pt.\u0275fac=function(o){return new(o||pt)},pt.\u0275cmp=t.Xpm({type:pt,selectors:[["app-task-room-info-detail"]],inputs:{loading:"loading",roomInfo:"roomInfo"},decls:24,vars:13,consts:[["nzTitle","\u76f4\u64ad\u95f4\u4fe1\u606f",3,"nzLoading"],["nzTitle",""],["nzTitle","\u6807\u9898"],["nzTitle","\u5206\u533a"],["nzTitle","\u623f\u95f4\u53f7"],[1,"room-id-wrapper"],["class","short-room-id",4,"ngIf"],[1,"real-room-id"],["nzTitle","\u72b6\u6001"],[3,"ngSwitch"],[4,"ngSwitchCase"],["nzTitle","\u5f00\u64ad\u65f6\u95f4"],[4,"ngIf"],["nzTitle","\u6807\u7b7e"],[1,"tags"],[4,"ngFor","ngForOf"],["nzTitle","\u7b80\u4ecb"],[1,"introduction"],[1,"short-room-id"]],template:function(o,e){1&o&&(t.TgZ(0,"nz-card",0)(1,"nz-descriptions",1)(2,"nz-descriptions-item",2),t._uU(3),t.qZA(),t.TgZ(4,"nz-descriptions-item",3),t._uU(5),t.qZA(),t.TgZ(6,"nz-descriptions-item",4)(7,"span",5),t.YNc(8,jo,2,1,"span",6),t.TgZ(9,"span",7),t._uU(10),t.qZA()()(),t.TgZ(11,"nz-descriptions-item",8),t.ynx(12,9),t.YNc(13,Vo,2,0,"ng-container",10),t.YNc(14,Ho,2,0,"ng-container",10),t.YNc(15,Xo,2,0,"ng-container",10),t.BQk(),t.qZA(),t.TgZ(16,"nz-descriptions-item",11),t.YNc(17,ti,3,5,"ng-container",12),t.qZA(),t.TgZ(18,"nz-descriptions-item",13)(19,"div",14),t.YNc(20,ei,2,1,"nz-tag",15),t.qZA()(),t.TgZ(21,"nz-descriptions-item",16)(22,"div",17),t.YNc(23,ni,2,1,"p",15),t.qZA()()()()),2&o&&(t.Q6J("nzLoading",e.loading),t.xp6(3),t.Oqu(e.roomInfo.title),t.xp6(2),t.AsE(" ",e.roomInfo.parent_area_name," - ",e.roomInfo.area_name," "),t.xp6(3),t.Q6J("ngIf",e.roomInfo.short_room_id),t.xp6(2),t.hij(" ",e.roomInfo.room_id," "),t.xp6(2),t.Q6J("ngSwitch",e.roomInfo.live_status),t.xp6(1),t.Q6J("ngSwitchCase",0),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2),t.xp6(2),t.Q6J("ngIf",0!==e.roomInfo.live_start_time),t.xp6(3),t.Q6J("ngForOf",e.roomInfo.tags.split(",")),t.xp6(3),t.Q6J("ngForOf",e.roomInfo.description.split("\n")))},dependencies:[c.sg,c.O5,c.RF,c.n9,E.bd,Wt,se,Nt,c.uU],styles:['.room-id-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.room-id-wrapper[_ngcontent-%COMP%]   .short-room-id[_ngcontent-%COMP%]:after{display:inline-block;width:1em;content:","}.tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;row-gap:.5em}.introduction[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0}'],changeDetection:0});class H{transform(o){return o&&0!==o.total?Math.round(o.count/o.total*100):0}}H.\u0275fac=function(o){return new(o||H)},H.\u0275pipe=t.Yjl({name:"progress",type:H,pure:!0});class gt{constructor(){this.loading=!0}ngOnInit(){}get title(){switch(this.taskStatus.postprocessor_status){case m.ii.INJECTING:return"\u66f4\u65b0 FLV \u5143\u6570\u636e";case m.ii.REMUXING:return"\u8f6c\u6362 FLV \u4e3a MP4";default:return"\u6587\u4ef6\u5904\u7406"}}}gt.\u0275fac=function(o){return new(o||gt)},gt.\u0275cmp=t.Xpm({type:gt,selectors:[["app-task-postprocessing-detail"]],inputs:{loading:"loading",taskStatus:"taskStatus"},decls:6,vars:9,consts:[[3,"nzTitle","nzLoading"],[3,"title"],["nzStatus","active",3,"nzPercent"]],template:function(o,e){if(1&o&&(t.TgZ(0,"nz-card",0)(1,"p",1),t._uU(2),t.ALo(3,"filename"),t.qZA(),t._UZ(4,"nz-progress",2),t.ALo(5,"progress"),t.qZA()),2&o){let i;t.Q6J("nzTitle",e.title)("nzLoading",e.loading),t.xp6(1),t.Q6J("title",e.taskStatus.postprocessing_path),t.xp6(1),t.hij(" ",t.lcZ(3,5,null!==(i=e.taskStatus.postprocessing_path)&&void 0!==i?i:"")," "),t.xp6(2),t.Q6J("nzPercent",null===e.taskStatus.postprocessing_progress?0:t.lcZ(5,7,e.taskStatus.postprocessing_progress))}},dependencies:[E.bd,ne,H,G],styles:["p[_ngcontent-%COMP%]{margin:0}"],changeDetection:0});var X=r(2134);class tt{transform(o){return(0,X.LU)(o,!0)}}tt.\u0275fac=function(o){return new(o||tt)},tt.\u0275pipe=t.Yjl({name:"duration",type:tt,pure:!0});var Rt=r(3692),fe=r(3520);function oi(n,o){if(1&n&&(t._uU(0),t.ALo(1,"duration")),2&n){const e=t.oxw();t.Oqu(t.lcZ(1,1,e.taskStatus.rec_elapsed))}}function ii(n,o){if(1&n&&(t._uU(0),t.ALo(1,"datarate")),2&n){const e=t.oxw();t.Oqu(t.lcZ(1,1,e.taskStatus.rec_rate))}}const ai=function(){return{spacer:" "}};function si(n,o){if(1&n&&(t._uU(0),t.ALo(1,"filesize")),2&n){const e=t.oxw();t.Oqu(t.xi3(1,1,e.taskStatus.rec_total,t.DdM(4,ai)))}}function ri(n,o){if(1&n&&(t._uU(0),t.ALo(1,"quality")),2&n){const e=t.oxw();t.Oqu(e.taskStatus.real_quality_number?t.lcZ(1,1,e.taskStatus.real_quality_number)+" ("+e.taskStatus.real_quality_number+")":"")}}class dt{constructor(o){this.changeDetector=o,this.loading=!0,this.initialChartOptions={},this.updatedChartOptions={},this.chartData=[],this.initChartOptions()}ngOnChanges(){this.taskStatus.running_status===m.cG.RECORDING&&this.updateChartOptions()}initChartOptions(){const o=Date.now();for(let e=59;e>=0;e--){const i=new Date(o-1e3*e);this.chartData.push({name:i.toLocaleString("zh-CN",{hour12:!1}),value:[i.toISOString(),0]})}this.initialChartOptions={title:{},tooltip:{trigger:"axis",formatter:e=>{const i=e[0];return`\n            <div>\n              <div>\n                ${new Date(i.name).toLocaleTimeString("zh-CN",{hour12:!1})}\n              </div>\n              <div>${(0,X.N4)(i.value[1])}</div>\n            </div>\n          `},axisPointer:{animation:!1}},xAxis:{type:"time",name:"\u65f6\u95f4",min:"dataMin",max:"dataMax",splitLine:{show:!0}},yAxis:{type:"value",name:"\u5f55\u5236\u901f\u5ea6",splitLine:{show:!0},axisLabel:{formatter:e=>(0,X.N4)(e)}},series:[{name:"\u5f55\u5236\u901f\u5ea6",type:"line",showSymbol:!1,smooth:!0,lineStyle:{width:1},areaStyle:{opacity:.2},data:this.chartData}]}}updateChartOptions(){const o=new Date;this.chartData.push({name:o.toLocaleString("zh-CN",{hour12:!1}),value:[o.toISOString(),this.taskStatus.rec_rate]}),this.chartData.shift(),this.updatedChartOptions={series:[{data:this.chartData}]},this.changeDetector.markForCheck()}}function li(n,o){if(1&n&&t._uU(0),2&n){const e=t.oxw();t.Oqu(e.taskStatus.stream_host)}}function ci(n,o){if(1&n&&t._uU(0),2&n){const e=t.oxw();t.Oqu(e.taskStatus.real_stream_format)}}dt.\u0275fac=function(o){return new(o||dt)(t.Y36(t.sBO))},dt.\u0275cmp=t.Xpm({type:dt,selectors:[["app-task-recording-detail"]],inputs:{loading:"loading",taskStatus:"taskStatus"},features:[t.TTD],decls:17,vars:17,consts:[["nzTitle","\u5f55\u5236\u8be6\u60c5",3,"nzLoading"],[1,"statistics"],[3,"nzTitle","nzValueTemplate"],["recordingElapsed",""],["recordingRate",""],["recordedTotal",""],["recordingQuality",""],[3,"nzTitle","nzValue"],["echarts","",1,"rec-rate-chart",3,"loading","options","merge"]],template:function(o,e){if(1&o&&(t.TgZ(0,"nz-card",0)(1,"div",1),t._UZ(2,"nz-statistic",2),t.YNc(3,oi,2,3,"ng-template",null,3,t.W1O),t._UZ(5,"nz-statistic",2),t.YNc(6,ii,2,3,"ng-template",null,4,t.W1O),t._UZ(8,"nz-statistic",2),t.YNc(9,si,2,5,"ng-template",null,5,t.W1O),t._UZ(11,"nz-statistic",2),t.YNc(12,ri,2,3,"ng-template",null,6,t.W1O),t._UZ(14,"nz-statistic",7),t.ALo(15,"number"),t.qZA(),t._UZ(16,"div",8),t.qZA()),2&o){const i=t.MAs(4),a=t.MAs(7),s=t.MAs(10),d=t.MAs(13);t.Q6J("nzLoading",e.loading),t.xp6(2),t.Q6J("nzTitle","\u5f55\u5236\u7528\u65f6")("nzValueTemplate",i),t.xp6(3),t.Q6J("nzTitle","\u5f55\u5236\u901f\u5ea6")("nzValueTemplate",a),t.xp6(3),t.Q6J("nzTitle","\u5f55\u5236\u603b\u8ba1")("nzValueTemplate",s),t.xp6(3),t.Q6J("nzTitle","\u5f55\u5236\u753b\u8d28")("nzValueTemplate",d),t.xp6(3),t.Q6J("nzTitle","\u5f39\u5e55\u603b\u8ba1")("nzValue",t.xi3(15,14,e.taskStatus.danmu_total,"1.0-2")),t.xp6(2),t.Q6J("loading",e.loading)("options",e.initialChartOptions)("merge",e.updatedChartOptions)}},dependencies:[E.bd,ie,ue,c.JJ,tt,Rt.f,J,fe.U],styles:[".statistics[_ngcontent-%COMP%]{--grid-width: 200px;display:grid;grid-template-columns:repeat(auto-fill,var(--grid-width));gap:1em;justify-content:center;margin:0 auto}@media screen and (max-width: 1024px){.statistics[_ngcontent-%COMP%]{--grid-width: 180px}}@media screen and (max-width: 720px){.statistics[_ngcontent-%COMP%]{--grid-width: 160px}}@media screen and (max-width: 680px){.statistics[_ngcontent-%COMP%]{--grid-width: 140px}}@media screen and (max-width: 480px){.statistics[_ngcontent-%COMP%]{--grid-width: 120px}}.rec-rate-chart[_ngcontent-%COMP%]{width:100%;height:300px;margin:0}"],changeDetection:0});const _i=function(){return{bitrate:!0}};function ui(n,o){if(1&n&&(t._uU(0),t.ALo(1,"datarate")),2&n){const e=t.oxw();t.Oqu(t.xi3(1,1,8*e.taskStatus.dl_rate,t.DdM(4,_i)))}}const pi=function(){return{spacer:" "}};function gi(n,o){if(1&n&&(t._uU(0),t.ALo(1,"filesize")),2&n){const e=t.oxw();t.Oqu(t.xi3(1,1,e.taskStatus.dl_total,t.DdM(4,pi)))}}class mt{constructor(o){this.changeDetector=o,this.loading=!0,this.initialChartOptions={},this.updatedChartOptions={},this.chartData=[],this.initChartOptions()}ngOnChanges(){this.taskStatus.running_status===m.cG.RECORDING&&this.updateChartOptions()}initChartOptions(){const o=Date.now();for(let e=59;e>=0;e--){const i=new Date(o-1e3*e);this.chartData.push({name:i.toLocaleString("zh-CN",{hour12:!1}),value:[i.toISOString(),0]})}this.initialChartOptions={title:{},tooltip:{trigger:"axis",formatter:e=>{const i=e[0];return`\n            <div>\n              <div>\n                ${new Date(i.name).toLocaleTimeString("zh-CN",{hour12:!1})}\n              </div>\n              <div>${(0,X.AX)(i.value[1])}</div>\n            </div>\n          `},axisPointer:{animation:!1}},xAxis:{type:"time",name:"\u65f6\u95f4",min:"dataMin",max:"dataMax",splitLine:{show:!0}},yAxis:{type:"value",name:"\u4e0b\u8f7d\u901f\u5ea6",splitLine:{show:!0},axisLabel:{formatter:function(e){return(0,X.AX)(e)}}},series:[{name:"\u4e0b\u8f7d\u901f\u5ea6",type:"line",showSymbol:!1,smooth:!0,lineStyle:{width:1},areaStyle:{opacity:.2},data:this.chartData}]}}updateChartOptions(){const o=new Date;this.chartData.push({name:o.toLocaleString("zh-CN",{hour12:!1}),value:[o.toISOString(),8*this.taskStatus.dl_rate]}),this.chartData.shift(),this.updatedChartOptions={series:[{data:this.chartData}]},this.changeDetector.markForCheck()}}function di(n,o){if(1&n&&t._UZ(0,"app-task-user-info-detail",6),2&n){const e=t.oxw(2);t.Q6J("loading",e.loading)("userInfo",e.taskData.user_info)}}function mi(n,o){if(1&n&&t._UZ(0,"app-task-room-info-detail",7),2&n){const e=t.oxw(2);t.Q6J("loading",e.loading)("roomInfo",e.taskData.room_info)}}function hi(n,o){if(1&n&&t._UZ(0,"app-task-recording-detail",8),2&n){const e=t.oxw(2);t.Q6J("loading",e.loading)("taskStatus",e.taskData.task_status)}}function fi(n,o){if(1&n&&t._UZ(0,"app-task-network-detail",8),2&n){const e=t.oxw(2);t.Q6J("loading",e.loading)("taskStatus",e.taskData.task_status)}}function Ci(n,o){if(1&n&&t._UZ(0,"app-task-postprocessing-detail",8),2&n){const e=t.oxw(2);t.Q6J("loading",e.loading)("taskStatus",e.taskData.task_status)}}function zi(n,o){if(1&n&&(t.YNc(0,di,1,2,"app-task-user-info-detail",2),t.YNc(1,mi,1,2,"app-task-room-info-detail",3),t.YNc(2,hi,1,2,"app-task-recording-detail",4),t.YNc(3,fi,1,2,"app-task-network-detail",4),t.YNc(4,Ci,1,2,"app-task-postprocessing-detail",4),t._UZ(5,"app-task-file-detail",5)),2&n){const e=t.oxw();t.Q6J("ngIf",e.taskData),t.xp6(1),t.Q6J("ngIf",e.taskData),t.xp6(1),t.Q6J("ngIf",e.taskData),t.xp6(1),t.Q6J("ngIf",e.taskData),t.xp6(1),t.Q6J("ngIf",null==e.taskData||null==e.taskData.task_status?null:e.taskData.task_status.postprocessing_path),t.xp6(1),t.Q6J("loading",e.loading)("videoFileDetails",e.videoFileDetails)("danmakuFileDetails",e.danmakuFileDetails)}}mt.\u0275fac=function(o){return new(o||mt)(t.Y36(t.sBO))},mt.\u0275cmp=t.Xpm({type:mt,selectors:[["app-task-network-detail"]],inputs:{loading:"loading",taskStatus:"taskStatus"},features:[t.TTD],decls:15,vars:12,consts:[["nzTitle","\u7f51\u7edc\u8be6\u60c5",3,"nzLoading"],[1,"statistics"],[1,"stream-host",3,"nzTitle","nzValueTemplate"],["streamHost",""],[3,"nzTitle","nzValueTemplate"],["realStreamFormat",""],["downloadRate",""],["downloadTotal",""],["echarts","",1,"dl-rate-chart",3,"loading","options","merge"]],template:function(o,e){if(1&o&&(t.TgZ(0,"nz-card",0)(1,"div",1),t._UZ(2,"nz-statistic",2),t.YNc(3,li,1,1,"ng-template",null,3,t.W1O),t._UZ(5,"nz-statistic",4),t.YNc(6,ci,1,1,"ng-template",null,5,t.W1O),t._UZ(8,"nz-statistic",4),t.YNc(9,ui,2,5,"ng-template",null,6,t.W1O),t._UZ(11,"nz-statistic",4),t.YNc(12,gi,2,5,"ng-template",null,7,t.W1O),t.qZA(),t._UZ(14,"div",8),t.qZA()),2&o){const i=t.MAs(4),a=t.MAs(7),s=t.MAs(10),d=t.MAs(13);t.Q6J("nzLoading",e.loading),t.xp6(2),t.Q6J("nzTitle","\u6d41\u4e3b\u673a")("nzValueTemplate",i),t.xp6(3),t.Q6J("nzTitle","\u6d41\u683c\u5f0f")("nzValueTemplate",a),t.xp6(3),t.Q6J("nzTitle","\u4e0b\u8f7d\u901f\u5ea6")("nzValueTemplate",s),t.xp6(3),t.Q6J("nzTitle","\u4e0b\u8f7d\u603b\u8ba1")("nzValueTemplate",d),t.xp6(3),t.Q6J("loading",e.loading)("options",e.initialChartOptions)("merge",e.updatedChartOptions)}},dependencies:[E.bd,ie,ue,Rt.f,J],styles:[".statistics[_ngcontent-%COMP%]{--grid-width: 200px;display:grid;grid-template-columns:repeat(auto-fill,var(--grid-width));gap:1em;justify-content:center;margin:0 auto}@media screen and (max-width: 1024px){.statistics[_ngcontent-%COMP%]{--grid-width: 180px}}@media screen and (max-width: 720px){.statistics[_ngcontent-%COMP%]{--grid-width: 160px}}@media screen and (max-width: 680px){.statistics[_ngcontent-%COMP%]{--grid-width: 140px}}@media screen and (max-width: 480px){.statistics[_ngcontent-%COMP%]{--grid-width: 120px}}.stream-host[_ngcontent-%COMP%]{grid-column:1/3;grid-row:1}.dl-rate-chart[_ngcontent-%COMP%]{width:100%;height:300px;margin:0}"],changeDetection:0});const Ti=function(){return{"max-width":"unset"}},xi=function(){return{"row-gap":"1em"}};class ht{constructor(o,e,i,a,s){this.route=o,this.router=e,this.changeDetector=i,this.notification=a,this.taskService=s,this.videoFileDetails=[],this.danmakuFileDetails=[],this.loading=!0}ngOnInit(){this.route.paramMap.subscribe(o=>{this.roomId=parseInt(o.get("id")),this.syncData()})}ngOnDestroy(){this.desyncData()}syncData(){this.dataSubscription=(0,w.of)((0,w.of)(0),(0,pe.F)(1e3)).pipe((0,de.u)(),(0,st.w)(()=>(0,ge.$)(this.taskService.getTaskData(this.roomId),this.taskService.getVideoFileDetails(this.roomId),this.taskService.getDanmakuFileDetails(this.roomId))),(0,lt.K)(o=>{throw this.notification.error("\u83b7\u53d6\u4efb\u52a1\u6570\u636e\u51fa\u9519",o.message),o}),(0,Bt.X)(10,3e3)).subscribe(([o,e,i])=>{this.loading=!1,this.taskData=o,this.videoFileDetails=e,this.danmakuFileDetails=i,this.changeDetector.markForCheck()},o=>{this.notification.error("\u83b7\u53d6\u4efb\u52a1\u6570\u636e\u51fa\u9519","\u7f51\u7edc\u8fde\u63a5\u5f02\u5e38, \u8bf7\u5f85\u7f51\u7edc\u6b63\u5e38\u540e\u5237\u65b0\u3002",{nzDuration:0})})}desyncData(){this.dataSubscription?.unsubscribe()}}ht.\u0275fac=function(o){return new(o||ht)(t.Y36(rt.gz),t.Y36(rt.F0),t.Y36(t.sBO),t.Y36(me.zb),t.Y36(Ut.M))},ht.\u0275cmp=t.Xpm({type:ht,selectors:[["app-task-detail"]],decls:2,vars:5,consts:[["pageTitle","\u4efb\u52a1\u8be6\u60c5",3,"loading","pageStyles","contentStyles"],["appSubPageContent",""],[3,"loading","userInfo",4,"ngIf"],[3,"loading","roomInfo",4,"ngIf"],[3,"loading","taskStatus",4,"ngIf"],[3,"loading","videoFileDetails","danmakuFileDetails"],[3,"loading","userInfo"],[3,"loading","roomInfo"],[3,"loading","taskStatus"]],template:function(o,e){1&o&&(t.TgZ(0,"app-sub-page",0),t.YNc(1,zi,6,8,"ng-template",1),t.qZA()),2&o&&t.Q6J("loading",e.loading)("pageStyles",t.DdM(3,Ti))("contentStyles",t.DdM(4,xi))},dependencies:[c.O5,Ko.Y,Go.q,_t,ut,pt,gt,dt,mt],changeDetection:0});var Ce=r(2323),Lt=r(7044),Di=r(1664),ki=r(8372),Mi=r(1884),W=r(4004);const ft=["(max-width: 534.98px)","(min-width: 535px) and (max-width: 1199.98px)","(min-width: 1200px)"];var Jt=r(9651);class Q{constructor(o,e){this.message=o,this.taskService=e}getAllTaskRoomIds(){return this.taskService.getAllTaskData().pipe((0,W.U)(o=>o.map(e=>e.room_info.room_id)))}updateTaskInfo(o){return this.taskService.updateTaskInfo(o).pipe((0,v.b)(()=>{this.message.success(`[${o}] \u6210\u529f\u5237\u65b0\u4efb\u52a1\u7684\u6570\u636e`)},e=>{this.message.error(`[${o}] \u5237\u65b0\u4efb\u52a1\u7684\u6570\u636e\u51fa\u9519: ${e.message}`)}))}updateAllTaskInfos(){return this.taskService.updateAllTaskInfos().pipe((0,v.b)(()=>{this.message.success("\u6210\u529f\u5237\u65b0\u5168\u90e8\u4efb\u52a1\u7684\u6570\u636e")},o=>{this.message.error(`\u5237\u65b0\u5168\u90e8\u4efb\u52a1\u7684\u6570\u636e\u51fa\u9519: ${o.message}`)}))}addTask(o){return this.taskService.addTask(o).pipe((0,W.U)(e=>({type:"success",message:"\u6210\u529f\u6dfb\u52a0\u4efb\u52a1"})),(0,lt.K)(e=>{let i;return i=409==e.status?{type:"error",message:"\u4efb\u52a1\u5df2\u5b58\u5728\uff0c\u4e0d\u80fd\u91cd\u590d\u6dfb\u52a0\u3002"}:403==e.status?{type:"warning",message:"\u4efb\u52a1\u6570\u91cf\u8d85\u8fc7\u9650\u5236\uff0c\u4e0d\u80fd\u6dfb\u52a0\u4efb\u52a1\u3002"}:404==e.status?{type:"error",message:"\u76f4\u64ad\u95f4\u4e0d\u5b58\u5728"}:{type:"error",message:`\u6dfb\u52a0\u4efb\u52a1\u51fa\u9519: ${e.message}`},(0,w.of)(i)}),(0,W.U)(e=>(e.message=`${o}: ${e.message}`,e)),(0,v.b)(e=>{this.message[e.type](e.message)}))}removeTask(o){return this.taskService.removeTask(o).pipe((0,v.b)(()=>{this.message.success(`[${o}] \u4efb\u52a1\u5df2\u5220\u9664`)},e=>{this.message.error(`[${o}] \u5220\u9664\u4efb\u52a1\u51fa\u9519: ${e.message}`)}))}removeAllTasks(){const o=this.message.loading("\u6b63\u5728\u5220\u9664\u5168\u90e8\u4efb\u52a1...",{nzDuration:0}).messageId;return this.taskService.removeAllTasks().pipe((0,v.b)(()=>{this.message.remove(o),this.message.success("\u6210\u529f\u5220\u9664\u5168\u90e8\u4efb\u52a1")},e=>{this.message.remove(o),this.message.error(`\u5220\u9664\u5168\u90e8\u4efb\u52a1\u51fa\u9519: ${e.message}`)}))}startTask(o){const e=this.message.loading(`[${o}] \u6b63\u5728\u8fd0\u884c\u4efb\u52a1...`,{nzDuration:0}).messageId;return this.taskService.startTask(o).pipe((0,v.b)(()=>{this.message.remove(e),this.message.success(`[${o}] \u6210\u529f\u8fd0\u884c\u4efb\u52a1`)},i=>{this.message.remove(e),this.message.error(`[${o}] \u8fd0\u884c\u4efb\u52a1\u51fa\u9519: ${i.message}`)}))}startAllTasks(){const o=this.message.loading("\u6b63\u5728\u8fd0\u884c\u5168\u90e8\u4efb\u52a1...",{nzDuration:0}).messageId;return this.taskService.startAllTasks().pipe((0,v.b)(()=>{this.message.remove(o),this.message.success("\u6210\u529f\u8fd0\u884c\u5168\u90e8\u4efb\u52a1")},e=>{this.message.remove(o),this.message.error(`\u8fd0\u884c\u5168\u90e8\u4efb\u52a1\u51fa\u9519: ${e.message}`)}))}stopTask(o,e=!1){const i=this.message.loading(`[${o}] \u6b63\u5728\u505c\u6b62\u4efb\u52a1...`,{nzDuration:0}).messageId;return this.taskService.stopTask(o,e).pipe((0,v.b)(()=>{this.message.remove(i),this.message.success(`[${o}] \u6210\u529f\u505c\u6b62\u4efb\u52a1`)},a=>{this.message.remove(i),this.message.error(`[${o}] \u505c\u6b62\u4efb\u52a1\u51fa\u9519: ${a.message}`)}))}stopAllTasks(o=!1){const e=this.message.loading("\u6b63\u5728\u505c\u6b62\u5168\u90e8\u4efb\u52a1...",{nzDuration:0}).messageId;return this.taskService.stopAllTasks(o).pipe((0,v.b)(()=>{this.message.remove(e),this.message.success("\u6210\u529f\u505c\u6b62\u5168\u90e8\u4efb\u52a1")},i=>{this.message.remove(e),this.message.error(`\u505c\u6b62\u5168\u90e8\u4efb\u52a1\u51fa\u9519: ${i.message}`)}))}enableRecorder(o){const e=this.message.loading(`[${o}] \u6b63\u5728\u5f00\u542f\u5f55\u5236...`,{nzDuration:0}).messageId;return this.taskService.enableTaskRecorder(o).pipe((0,v.b)(()=>{this.message.remove(e),this.message.success(`[${o}] \u6210\u529f\u5f00\u542f\u5f55\u5236`)},i=>{this.message.remove(e),this.message.error(`[${o}] \u5f00\u542f\u5f55\u5236\u51fa\u9519: ${i.message}`)}))}enableAllRecorders(){const o=this.message.loading("\u6b63\u5728\u5f00\u542f\u5168\u90e8\u4efb\u52a1\u7684\u5f55\u5236...",{nzDuration:0}).messageId;return this.taskService.enableAllRecorders().pipe((0,v.b)(()=>{this.message.remove(o),this.message.success("\u6210\u529f\u5f00\u542f\u5168\u90e8\u4efb\u52a1\u7684\u5f55\u5236")},e=>{this.message.remove(o),this.message.error(`\u5f00\u542f\u5168\u90e8\u4efb\u52a1\u7684\u5f55\u5236\u51fa\u9519: ${e.message}`)}))}disableRecorder(o,e=!1){const i=this.message.loading(`[${o}] \u6b63\u5728\u5173\u95ed\u5f55\u5236...`,{nzDuration:0}).messageId;return this.taskService.disableTaskRecorder(o,e).pipe((0,v.b)(()=>{this.message.remove(i),this.message.success(`[${o}] \u6210\u529f\u5173\u95ed\u5f55\u5236`)},a=>{this.message.remove(i),this.message.error(`[${o}] \u5173\u95ed\u5f55\u5236\u51fa\u9519: ${a.message}`)}))}disableAllRecorders(o=!1){const e=this.message.loading("\u6b63\u5728\u5173\u95ed\u5168\u90e8\u4efb\u52a1\u7684\u5f55\u5236...",{nzDuration:0}).messageId;return this.taskService.disableAllRecorders(o).pipe((0,v.b)(()=>{this.message.remove(e),this.message.success("\u6210\u529f\u5173\u95ed\u5168\u90e8\u4efb\u52a1\u7684\u5f55\u5236")},i=>{this.message.remove(e),this.message.error(`\u5173\u95ed\u5168\u90e8\u4efb\u52a1\u7684\u5f55\u5236\u51fa\u9519: ${i.message}`)}))}canCutStream(o){return this.taskService.canCutStream(o).pipe((0,v.b)(e=>{e||this.message.warning(`[${o}] \u4e0d\u652f\u6301\u6587\u4ef6\u5207\u5272~`)}))}cutStream(o){return this.taskService.cutStream(o).pipe((0,v.b)(()=>{this.message.success(`[${o}] \u6587\u4ef6\u5207\u5272\u5df2\u89e6\u53d1`)},e=>{403==e.status?this.message.warning(`[${o}] \u65f6\u957f\u592a\u77ed\u4e0d\u80fd\u5207\u5272\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002`):this.message.error(`[${o}] \u5207\u5272\u6587\u4ef6\u51fa\u9519: ${e.message}`)}))}}Q.\u0275fac=function(o){return new(o||Q)(t.LFG(Jt.dD),t.LFG(Ut.M))},Q.\u0275prov=t.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"root"});var Ct=r(3325);function Oi(n,o){if(1&n&&(t.ynx(0),t.GkF(1,8),t._UZ(2,"nz-divider",13),t.GkF(3,8),t._UZ(4,"nz-divider",13),t.GkF(5,8),t._UZ(6,"nz-divider",13),t.GkF(7,8),t.BQk()),2&n){t.oxw();const e=t.MAs(5),i=t.MAs(9),a=t.MAs(11),s=t.MAs(13);t.xp6(1),t.Q6J("ngTemplateOutlet",e),t.xp6(2),t.Q6J("ngTemplateOutlet",i),t.xp6(2),t.Q6J("ngTemplateOutlet",a),t.xp6(2),t.Q6J("ngTemplateOutlet",s)}}function vi(n,o){if(1&n&&(t.ynx(0),t.GkF(1,8),t._UZ(2,"nz-divider",13),t.GkF(3,8),t._UZ(4,"nz-divider",13),t.GkF(5,8),t._UZ(6,"nz-divider",13),t.GkF(7,8),t.BQk()),2&n){t.oxw();const e=t.MAs(7),i=t.MAs(9),a=t.MAs(11),s=t.MAs(13);t.xp6(1),t.Q6J("ngTemplateOutlet",e),t.xp6(2),t.Q6J("ngTemplateOutlet",i),t.xp6(2),t.Q6J("ngTemplateOutlet",a),t.xp6(2),t.Q6J("ngTemplateOutlet",s)}}function Ei(n,o){if(1&n&&(t.ynx(0),t.GkF(1,8)(2,8),t.BQk()),2&n){t.oxw();const e=t.MAs(9),i=t.MAs(20);t.xp6(1),t.Q6J("ngTemplateOutlet",e),t.xp6(1),t.Q6J("ngTemplateOutlet",i)}}function Ai(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"label",16),t._uU(2),t.qZA(),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("nzValue",e.value),t.xp6(1),t.Oqu(e.label)}}function Pi(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"nz-radio-group",14),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.selection=a)})("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.selectionChange.emit(a))}),t.YNc(1,Ai,3,2,"ng-container",15),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("ngModel",e.selection),t.xp6(1),t.Q6J("ngForOf",e.selections)}}function yi(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"nz-select",17),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.selection=a)})("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.selectionChange.emit(a))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("nzOptions",e.selections)("ngModel",e.selection)}}function Si(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"i",23),t.NdJ("click",function(){t.CHM(e),t.oxw(2);const a=t.MAs(2),s=t.oxw();return a.value="",t.KtG(s.onFilterInput(""))}),t.qZA()}}function bi(n,o){if(1&n&&t.YNc(0,Si,1,0,"i",22),2&n){t.oxw();const e=t.MAs(2);t.Q6J("ngIf",e.value)}}function Fi(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"nz-input-group",18)(1,"input",19,20),t.NdJ("input",function(){t.CHM(e);const a=t.MAs(2),s=t.oxw();return t.KtG(s.onFilterInput(a.value))}),t.qZA()(),t.YNc(3,bi,1,1,"ng-template",null,21,t.W1O)}if(2&n){const e=t.MAs(4);t.Q6J("nzSuffix",e)}}function wi(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.toggleReverse())}),t.TgZ(1,"span"),t._uU(2),t.qZA(),t._UZ(3,"i",25),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.reverse?"\u5012\u5e8f":"\u6b63\u5e8f"),t.xp6(1),t.Q6J("nzType",e.reverse?"swap-left":"swap-right")("nzRotate",90)}}function Ii(n,o){if(1&n&&(t.TgZ(0,"button",26),t._UZ(1,"i",27),t.qZA()),2&n){t.oxw();const e=t.MAs(15);t.Q6J("nzDropdownMenu",e)}}function Ni(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"ul",28)(1,"li",29),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.startAllTasks())}),t._uU(2,"\u5168\u90e8\u8fd0\u884c"),t.qZA(),t.TgZ(3,"li",29),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.stopAllTasks())}),t._uU(4,"\u5168\u90e8\u505c\u6b62"),t.qZA(),t.TgZ(5,"li",29),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.stopAllTasks(!0))}),t._uU(6,"\u5168\u90e8\u5f3a\u5236\u505c\u6b62"),t.qZA(),t._UZ(7,"li",30),t.TgZ(8,"li",29),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.disableAllRecorders(!1))}),t._uU(9,"\u5168\u90e8\u5173\u95ed\u5f55\u5236"),t.qZA(),t.TgZ(10,"li",29),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.disableAllRecorders(!0))}),t._uU(11,"\u5168\u90e8\u5f3a\u5236\u5173\u95ed\u5f55\u5236"),t.qZA(),t._UZ(12,"li",30),t.TgZ(13,"li",29),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.removeAllTasks())}),t._uU(14,"\u5168\u90e8\u5220\u9664"),t.qZA(),t.TgZ(15,"li",29),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.updateAllTaskInfos())}),t._uU(16,"\u5168\u90e8\u5237\u65b0\u6570\u636e"),t.qZA(),t.TgZ(17,"li",29),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.copyAllTaskRoomIds())}),t._uU(18,"\u590d\u5236\u5168\u90e8\u623f\u95f4\u53f7"),t.qZA()()}}function Zi(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.drawerVisible=!0)}),t._UZ(1,"i",27),t.qZA()}}function Bi(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",35),t._UZ(2,"nz-divider",36),t.GkF(3,8),t._UZ(4,"nz-divider",37),t.TgZ(5,"div",38),t.GkF(6,8),t.qZA()(),t.BQk()),2&n){t.oxw(2);const e=t.MAs(5),i=t.MAs(11);t.xp6(3),t.Q6J("ngTemplateOutlet",e),t.xp6(3),t.Q6J("ngTemplateOutlet",i)}}function Ui(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",39),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.menuDrawerVisible=!1)}),t.GkF(2,8),t.qZA(),t.BQk()}if(2&n){t.oxw(2);const e=t.MAs(18);t.xp6(2),t.Q6J("ngTemplateOutlet",e)}}const Ri=function(){return{padding:"0"}};function Li(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"nz-drawer",32),t.NdJ("nzVisibleChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.drawerVisible=a)})("nzOnClose",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.drawerVisible=!1)}),t.YNc(1,Bi,7,2,"ng-container",33),t.TgZ(2,"nz-drawer",34),t.NdJ("nzVisibleChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.menuDrawerVisible=a)})("nzOnClose",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.menuDrawerVisible=!1)}),t.YNc(3,Ui,3,1,"ng-container",33),t.qZA()()}if(2&n){const e=t.oxw(),i=t.MAs(23);t.Q6J("nzTitle",i)("nzClosable",!1)("nzVisible",e.drawerVisible),t.xp6(2),t.Q6J("nzClosable",!1)("nzBodyStyle",t.DdM(6,Ri))("nzVisible",e.menuDrawerVisible)}}function Ji(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",40)(1,"button",31),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.menuDrawerVisible=!0)}),t._UZ(2,"i",27),t.qZA()()}}class zt{constructor(o,e,i,a,s,d){this.message=i,this.modal=a,this.clipboard=s,this.taskManager=d,this.selectionChange=new t.vpe,this.reverseChange=new t.vpe,this.filterChange=new t.vpe,this.destroyed=new F.x,this.useDrawer=!1,this.useSelector=!1,this.useRadioGroup=!0,this.drawerVisible=!1,this.menuDrawerVisible=!1,this.filterTerms=new F.x,this.selections=[{label:"\u5168\u90e8",value:m.jf.ALL},{label:"\u5f55\u5236\u4e2d",value:m.jf.RECORDING},{label:"\u5f55\u5236\u5f00",value:m.jf.RECORDER_ENABLED},{label:"\u5f55\u5236\u5173",value:m.jf.RECORDER_DISABLED},{label:"\u8fd0\u884c",value:m.jf.MONITOR_ENABLED},{label:"\u505c\u6b62",value:m.jf.MONITOR_DISABLED},{label:"\u76f4\u64ad",value:m.jf.LIVING},{label:"\u8f6e\u64ad",value:m.jf.ROUNDING},{label:"\u95f2\u7f6e",value:m.jf.PREPARING}],e.observe(ft).pipe((0,y.R)(this.destroyed)).subscribe(C=>{this.useDrawer=C.breakpoints[ft[0]],this.useSelector=C.breakpoints[ft[1]],this.useRadioGroup=C.breakpoints[ft[2]],o.markForCheck()})}ngOnInit(){this.filterTerms.pipe((0,ki.b)(300),(0,Mi.x)()).subscribe(o=>{this.filterChange.emit(o)})}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete()}onFilterInput(o){this.filterTerms.next(o)}toggleReverse(){this.reverse=!this.reverse,this.reverseChange.emit(this.reverse)}removeAllTasks(){this.modal.confirm({nzTitle:"\u786e\u5b9a\u8981\u5220\u9664\u5168\u90e8\u4efb\u52a1\uff1f",nzContent:"\u6b63\u5728\u5f55\u5236\u7684\u4efb\u52a1\u5c06\u88ab\u5f3a\u5236\u505c\u6b62\uff01\u4efb\u52a1\u5220\u9664\u540e\u5c06\u4e0d\u53ef\u6062\u590d\uff01",nzOnOk:()=>new Promise((o,e)=>{this.taskManager.removeAllTasks().subscribe(o,e)})})}startAllTasks(){this.taskManager.startAllTasks().subscribe()}stopAllTasks(o=!1){o?this.modal.confirm({nzTitle:"\u786e\u5b9a\u8981\u5f3a\u5236\u505c\u6b62\u5168\u90e8\u4efb\u52a1\uff1f",nzContent:"\u6b63\u5728\u5f55\u5236\u7684\u6587\u4ef6\u4f1a\u88ab\u5f3a\u884c\u4e2d\u65ad\uff01\u786e\u5b9a\u8981\u653e\u5f03\u6b63\u5728\u5f55\u5236\u7684\u6587\u4ef6\uff1f",nzOnOk:()=>new Promise((e,i)=>{this.taskManager.stopAllTasks(o).subscribe(e,i)})}):this.taskManager.stopAllTasks().subscribe()}disableAllRecorders(o=!1){o?this.modal.confirm({nzTitle:"\u786e\u5b9a\u8981\u5f3a\u5236\u5173\u95ed\u5168\u90e8\u4efb\u52a1\u7684\u5f55\u5236\uff1f",nzContent:"\u6b63\u5728\u5f55\u5236\u7684\u6587\u4ef6\u4f1a\u88ab\u5f3a\u884c\u4e2d\u65ad\uff01\u786e\u5b9a\u8981\u653e\u5f03\u6b63\u5728\u5f55\u5236\u7684\u6587\u4ef6\uff1f",nzOnOk:()=>new Promise((e,i)=>{this.taskManager.disableAllRecorders(o).subscribe(e,i)})}):this.taskManager.disableAllRecorders().subscribe()}updateAllTaskInfos(){this.taskManager.updateAllTaskInfos().subscribe()}copyAllTaskRoomIds(){this.taskManager.getAllTaskRoomIds().pipe((0,W.U)(o=>o.join(" ")),(0,v.b)(o=>{if(!this.clipboard.copy(o))throw Error("Failed to copy text to the clipboard")})).subscribe(()=>{this.message.success("\u5168\u90e8\u623f\u95f4\u53f7\u5df2\u590d\u5236\u5230\u526a\u5207\u677f")},o=>{this.message.error("\u590d\u5236\u5168\u90e8\u623f\u95f4\u53f7\u5230\u526a\u5207\u677f\u51fa\u9519",o)})}}zt.\u0275fac=function(o){return new(o||zt)(t.Y36(t.sBO),t.Y36(h.Yg),t.Y36(Jt.dD),t.Y36(K.Sf),t.Y36(_),t.Y36(Q))},zt.\u0275cmp=t.Xpm({type:zt,selectors:[["app-toolbar"]],inputs:{selection:"selection",reverse:"reverse"},outputs:{selectionChange:"selectionChange",reverseChange:"reverseChange",filterChange:"filterChange"},decls:24,vars:7,consts:[[1,"controls-wrapper"],[4,"ngIf"],["radioGroup",""],["selector",""],["filter",""],["reorderButton",""],["menuButton",""],["dropdownMenu","nzDropdownMenu"],[3,"ngTemplateOutlet"],["menu",""],["drawerButton",""],["nzPlacement","bottom","nzHeight","auto",3,"nzTitle","nzClosable","nzVisible","nzVisibleChange","nzOnClose",4,"ngIf"],["drawerHeader",""],["nzType","vertical"],["nzButtonStyle","solid",1,"radio-group",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["nz-radio-button","",3,"nzValue"],[1,"selector",3,"nzOptions","ngModel","ngModelChange"],[1,"filter",3,"nzSuffix"],["nz-input","","type","text","maxlength","18","placeholder","\u7528\u6807\u9898\u3001\u5206\u533a\u3001\u4e3b\u64ad\u540d\u3001\u623f\u95f4\u53f7\u7b5b\u9009",3,"input"],["filterInput",""],["inputClearTpl",""],["nz-icon","","class","filter-clear","nzTheme","fill","nzType","close-circle",3,"click",4,"ngIf"],["nz-icon","","nzTheme","fill","nzType","close-circle",1,"filter-clear",3,"click"],["nz-button","","nzType","text","nzSize","default",1,"reverse-button",3,"click"],["nz-icon","",3,"nzType","nzRotate"],["nz-button","","nzType","text","nzSize","default","nz-dropdown","","nzPlacement","bottomRight",1,"more-actions-button",3,"nzDropdownMenu"],["nz-icon","","nzType","more"],["nz-menu","",1,"menu"],["nz-menu-item","",3,"click"],["nz-menu-divider",""],["nz-button","","nzType","text","nzSize","default",1,"more-actions-button",3,"click"],["nzPlacement","bottom","nzHeight","auto",3,"nzTitle","nzClosable","nzVisible","nzVisibleChange","nzOnClose"],[4,"nzDrawerContent"],["nzPlacement","bottom","nzHeight","auto",3,"nzClosable","nzBodyStyle","nzVisible","nzVisibleChange","nzOnClose"],[1,"drawer-content"],["nzText","\u7b5b\u9009"],["nzText","\u6392\u5e8f"],[1,"reorder-button-wrapper"],[1,"drawer-content",3,"click"],[1,"drawer-header"]],template:function(o,e){if(1&o&&(t.TgZ(0,"div",0),t.YNc(1,Oi,8,4,"ng-container",1),t.YNc(2,vi,8,4,"ng-container",1),t.YNc(3,Ei,3,2,"ng-container",1),t.qZA(),t.YNc(4,Pi,2,2,"ng-template",null,2,t.W1O),t.YNc(6,yi,1,2,"ng-template",null,3,t.W1O),t.YNc(8,Fi,5,1,"ng-template",null,4,t.W1O),t.YNc(10,wi,4,3,"ng-template",null,5,t.W1O),t.YNc(12,Ii,2,1,"ng-template",null,6,t.W1O),t.TgZ(14,"nz-dropdown-menu",null,7),t.GkF(16,8),t.YNc(17,Ni,19,0,"ng-template",null,9,t.W1O),t.qZA(),t.YNc(19,Zi,2,0,"ng-template",null,10,t.W1O),t.YNc(21,Li,4,7,"nz-drawer",11),t.YNc(22,Ji,3,0,"ng-template",null,12,t.W1O)),2&o){const i=t.MAs(18);t.ekj("use-drawer",e.useDrawer),t.xp6(1),t.Q6J("ngIf",e.useRadioGroup),t.xp6(1),t.Q6J("ngIf",e.useSelector),t.xp6(1),t.Q6J("ngIf",e.useDrawer),t.xp6(13),t.Q6J("ngTemplateOutlet",i),t.xp6(5),t.Q6J("ngIf",e.useDrawer)}},dependencies:[c.sg,c.O5,c.tP,p.JJ,p.On,P.Ls,Ct.wO,Ct.r9,Ct.YV,j.cm,j.RR,j.wA,At.ix,Lt.w,V.Zp,V.gB,V.ke,Pt.Of,Pt.Bq,Pt.Dg,jt.g,at.Vz,at.SQ,wt.Vq],styles:[".drawer-content[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{box-shadow:none;padding:.5em 0}.drawer-content[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   *[nz-menu-item][_ngcontent-%COMP%]{margin:0;padding:.5em 2em}.controls-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;gap:.2em;width:100%;padding:.2em;background:#f9f9f9;border-left:none;border-right:none}.controls-wrapper[_ngcontent-%COMP%]   nz-divider[_ngcontent-%COMP%]{height:1.8em;top:0}.controls-wrapper[_ngcontent-%COMP%]:not(.use-drawer)   .filter[_ngcontent-%COMP%]{max-width:18em}.controls-wrapper.use-drawer[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]{max-width:unset;width:unset;flex:auto}.controls-wrapper[_ngcontent-%COMP%]   .selector[_ngcontent-%COMP%]{min-width:6em}.reverse-button[_ngcontent-%COMP%]{padding:0 .5em}.reverse-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0}.more-actions-button[_ngcontent-%COMP%]{margin-left:auto;border:none;background:inherit}.more-actions-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.menu[_ngcontent-%COMP%]   nz-divider[_ngcontent-%COMP%]{margin:0}.drawer-header[_ngcontent-%COMP%]{display:flex}.drawer-content[_ngcontent-%COMP%]   .reorder-button-wrapper[_ngcontent-%COMP%], .drawer-content[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:2vw}.drawer-content[_ngcontent-%COMP%]   nz-divider[_ngcontent-%COMP%]:first-of-type{margin-top:0}.drawer-content[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{text-align:center;padding:0}"],changeDetection:0});var Qi=r(5136);class et{constructor(o){this.storage=o}getSettings(o){const e=this.storage.getData(this.getStorageKey(o));return e?JSON.parse(e)??{}:{}}updateSettings(o,e){e=Object.assign(this.getSettings(o),e);const i=JSON.stringify(e);this.storage.setData(this.getStorageKey(o),i)}getStorageKey(o){return`app-tasks-${o}`}}et.\u0275fac=function(o){return new(o||et)(t.LFG(Ce.V))},et.\u0275prov=t.Yz7({token:et,factory:et.\u0275fac,providedIn:"root"});var N=r(3523),Z=r(4960),Ki=r(6457),Gi=r(4501);function Wi(n,o){1&n&&(t.ynx(0),t._uU(1," \u8bf7\u8f93\u5165\u8def\u5f84\u6a21\u677f "),t.BQk())}function Yi(n,o){1&n&&(t.ynx(0),t._uU(1," \u8def\u5f84\u6a21\u677f\u6709\u9519\u8bef "),t.BQk())}function qi(n,o){if(1&n&&(t.YNc(0,Wi,2,0,"ng-container",64),t.YNc(1,Yi,2,0,"ng-container",64)),2&n){const e=o.$implicit;t.Q6J("ngIf",e.hasError("required")),t.xp6(1),t.Q6J("ngIf",e.hasError("pattern"))}}function $i(n,o){1&n&&(t.TgZ(0,"p"),t._uU(1," \u81ea\u52a8\u5206\u5272\u6587\u4ef6\u4ee5\u9650\u5236\u5f55\u64ad\u6587\u4ef6\u5927\u5c0f "),t._UZ(2,"br"),t._uU(3," \u683c\u5f0f\uff1a\u6570\u5b57 + \u5355\u4f4d(GB, MB, KB, B) "),t._UZ(4,"br"),t._uU(5," \u4e0d\u81ea\u52a8\u5206\u5272\u6587\u4ef6\u8bbe\u7f6e\u4e3a "),t.TgZ(6,"strong"),t._uU(7,"0 B"),t.qZA(),t._UZ(8,"br"),t.qZA())}function ji(n,o){1&n&&(t.TgZ(0,"p"),t._uU(1," \u81ea\u52a8\u5206\u5272\u6587\u4ef6\u4ee5\u9650\u5236\u5f55\u64ad\u6587\u4ef6\u65f6\u957f "),t._UZ(2,"br"),t._uU(3," \u683c\u5f0f\uff1aHH:MM:SS "),t._UZ(4,"br"),t._uU(5," \u4e0d\u81ea\u52a8\u5206\u5272\u6587\u4ef6\u8bbe\u7f6e\u4e3a "),t.TgZ(6,"strong"),t._uU(7,"00:00:00"),t.qZA(),t._UZ(8,"br"),t.qZA())}function Vi(n,o){1&n&&(t.TgZ(0,"p"),t._uU(1," \u9009\u62e9\u8981\u5f55\u5236\u7684\u76f4\u64ad\u6d41\u683c\u5f0f "),t._UZ(2,"br"),t.TgZ(3,"b"),t._uU(4,"FLV:"),t.qZA(),t._uU(5," flv \u6d41\u5728\u7f51\u7edc\u4e0d\u7a33\u5b9a\u7684\u60c5\u51b5\u4e0b\u5bb9\u6613\u4e2d\u65ad\u4e22\u5931\u6570\u636e\u6216\u5f55\u5236\u5230\u4e8c\u538b\u753b\u8d28\u3002\u6ca1\u6709 flv \u6d41\u7684\u76f4\u64ad\u4f1a\u81ea\u52a8\u5207\u6362\u5f55\u5236 fmp4 \u6d41\u3002 "),t._UZ(6,"br"),t.TgZ(7,"b"),t._uU(8,"HLS (fmp4):"),t.qZA(),t._uU(9," hls \u6d41\u57fa\u672c\u4e0d\u53d7\u7f51\u7edc\u6ce2\u52a8\u5f71\u54cd\uff0c\u4f46\u4e0d\u662f\u6240\u6709\u76f4\u64ad\u95f4\u90fd\u652f\u6301\u3002\u6709 flv \u6d41\u7684\u76f4\u64ad\uff0c\u5728\u8bbe\u5b9a\u7684\u7b49\u5f85\u65f6\u95f4\u5185\u6ca1\u6709 fmp4 \u6d41\u4f1a\u81ea\u52a8\u5207\u6362\u5f55\u5236 flv \u6d41\u3002 "),t._UZ(10,"br"),t.TgZ(11,"b"),t._uU(12,"P.S."),t.qZA(),t._UZ(13,"br"),t._uU(14," WEB \u7aef\u76f4\u64ad\u64ad\u653e\u5668\u662f Hls7Player \u7684\u76f4\u64ad\u95f4\u652f\u6301\u5f55\u5236 fmp4 \u6d41, fMp4Player \u5219\u4e0d\u652f\u6301\u3002 "),t.qZA())}function Hi(n,o){1&n&&(t.TgZ(0,"p"),t._uU(1," \u5982\u679c\u8d85\u8fc7\u6240\u8bbe\u7f6e\u7684\u7b49\u5f85\u65f6\u95f4 fmp4 \u6d41\u8fd8\u6ca1\u6709\u5c31\u5207\u6362\u4e3a\u5f55\u5236 flv \u6d41 "),t._UZ(2,"br"),t._uU(3," fmp4 \u6d41\u5728\u521a\u63a8\u6d41\u662f\u6ca1\u6709\u7684\uff0c\u8981\u8fc7\u4e00\u4f1a\u624d\u6709\u3002 "),t._UZ(4,"br"),t._uU(5," fmp4 \u6d41\u51fa\u73b0\u7684\u65f6\u95f4\u548c\u76f4\u64ad\u5ef6\u8fdf\u6709\u5173\uff0c\u4e00\u822c\u90fd\u5728 10 \u79d2\u5185\uff0c\u4f46\u4e5f\u6709\u5ef6\u8fdf\u6bd4\u8f83\u5927\u8d85\u8fc7 1 \u5206\u949f\u7684\u3002 "),t._UZ(6,"br"),t._uU(7," \u63a8\u8350\u5168\u5c40\u8bbe\u7f6e\u4e3a 10 \u79d2\uff0c\u4e2a\u522b\u5ef6\u8fdf\u6bd4\u8f83\u5927\u7684\u76f4\u64ad\u95f4\u5355\u72ec\u8bbe\u7f6e\u3002 "),t.qZA())}function Xi(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"nz-form-item",19)(1,"nz-form-label",11),t._uU(2,"fmp4 \u6d41\u7b49\u5f85\u65f6\u95f4"),t.qZA(),t.YNc(3,Hi,8,0,"ng-template",null,65,t.W1O),t.TgZ(5,"nz-form-control",21)(6,"nz-select",66,67),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw(2);return t.KtG(s.model.recorder.fmp4StreamTimeout=a)}),t.qZA()(),t.TgZ(8,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw(2);return t.KtG(s.options.recorder.fmp4StreamTimeout=a?s.globalSettings.recorder.fmp4StreamTimeout:null)}),t._uU(9,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()()}if(2&n){const e=t.MAs(4),i=t.oxw(2);t.xp6(1),t.Q6J("nzTooltipTitle",e),t.xp6(5),t.Q6J("ngModel",i.model.recorder.fmp4StreamTimeout)("disabled",null===i.options.recorder.fmp4StreamTimeout)("nzOptions",i.fmp4StreamTimeoutOptions),t.xp6(2),t.Q6J("nzChecked",null!==i.options.recorder.fmp4StreamTimeout)}}function ta(n,o){1&n&&(t.TgZ(0,"p"),t._uU(1," \u9ed8\u8ba4: \u6bcf\u4e2a\u5206\u5272\u7684\u5f55\u64ad\u6587\u4ef6\u5bf9\u5e94\u4fdd\u5b58\u4e00\u4e2a\u5c01\u9762\u6587\u4ef6\uff0c\u4e0d\u7ba1\u5c01\u9762\u662f\u5426\u76f8\u540c\u3002"),t._UZ(2,"br"),t._uU(3," \u53bb\u91cd: \u76f8\u540c\u7684\u5c01\u9762\u53ea\u4fdd\u5b58\u4e00\u6b21"),t._UZ(4,"br"),t._uU(5," P.S. "),t._UZ(6,"br"),t._uU(7," \u5224\u65ad\u662f\u5426\u76f8\u540c\u662f\u4f9d\u636e\u5c01\u9762\u6570\u636e\u7684 sha1\uff0c\u53ea\u5728\u5355\u6b21\u5f55\u5236\u5185\u6709\u6548\u3002 "),t.qZA())}function ea(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"nz-form-item",19)(1,"nz-form-label",68),t._uU(2,"\u6570\u636e\u8bfb\u53d6\u8d85\u65f6"),t.qZA(),t.TgZ(3,"nz-form-control",69)(4,"nz-select",70,71),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw(2);return t.KtG(s.model.recorder.readTimeout=a)}),t.qZA()(),t.TgZ(6,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw(2);return t.KtG(s.options.recorder.readTimeout=a?s.globalSettings.recorder.readTimeout:null)}),t._uU(7,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()()}if(2&n){const e=t.MAs(5),i=t.oxw(2);t.xp6(3),t.Q6J("nzValidateStatus",e.value>3?"warning":e),t.xp6(1),t.Q6J("ngModel",i.model.recorder.readTimeout)("disabled",null===i.options.recorder.readTimeout)("nzOptions",i.readTimeoutOptions),t.xp6(2),t.Q6J("nzChecked",null!==i.options.recorder.readTimeout)}}function na(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"nz-form-item",19)(1,"nz-form-label",72),t._uU(2,"\u786c\u76d8\u5199\u5165\u7f13\u51b2"),t.qZA(),t.TgZ(3,"nz-form-control",21)(4,"nz-select",73),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw(2);return t.KtG(s.model.recorder.bufferSize=a)}),t.qZA()(),t.TgZ(5,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw(2);return t.KtG(s.options.recorder.bufferSize=a?s.globalSettings.recorder.bufferSize:null)}),t._uU(6,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("ngModel",e.model.recorder.bufferSize)("disabled",null===e.options.recorder.bufferSize)("nzOptions",e.bufferOptions)("nzOptionOverflowSize",6),t.xp6(1),t.Q6J("nzChecked",null!==e.options.recorder.bufferSize)}}function oa(n,o){1&n&&(t.TgZ(0,"p"),t._uU(1," \u81ea\u52a8: \u6ca1\u51fa\u9519\u5c31\u5220\u9664\u6e90\u6587\u4ef6"),t._UZ(2,"br"),t._uU(3," \u8c28\u614e: \u6ca1\u51fa\u9519\u4e14\u6ca1\u8b66\u544a\u624d\u5220\u9664\u6e90\u6587\u4ef6"),t._UZ(4,"br"),t._uU(5," \u4ece\u4e0d: \u603b\u662f\u4fdd\u7559\u6e90\u6587\u4ef6"),t._UZ(6,"br"),t.qZA())}function ia(n,o){1&n&&(t.ynx(0),t._uU(1," \u8bf7\u8f93\u5165 User Agent "),t.BQk())}function aa(n,o){1&n&&t.YNc(0,ia,2,0,"ng-container",64),2&n&&t.Q6J("ngIf",o.$implicit.hasError("required"))}function sa(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"form",2)(2,"div",3)(3,"h2"),t._uU(4,"\u6587\u4ef6"),t.qZA(),t.TgZ(5,"nz-form-item",4)(6,"nz-form-label",5),t._uU(7,"\u8def\u5f84\u6a21\u677f"),t.qZA(),t.TgZ(8,"nz-form-control",6)(9,"input",7),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.model.output.pathTemplate=a)}),t.qZA(),t.YNc(10,qi,2,2,"ng-template",null,8,t.W1O),t.qZA(),t.TgZ(12,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.options.output.pathTemplate=a?s.globalSettings.output.pathTemplate:null)}),t._uU(13,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()(),t.TgZ(14,"nz-form-item",10)(15,"nz-form-label",11),t._uU(16,"\u5927\u5c0f\u9650\u5236"),t.qZA(),t.YNc(17,$i,9,0,"ng-template",null,12,t.W1O),t.TgZ(19,"nz-form-control",13)(20,"app-input-filesize",14),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.model.output.filesizeLimit=a)}),t.qZA()(),t.TgZ(21,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.options.output.filesizeLimit=a?s.globalSettings.output.filesizeLimit:null)}),t._uU(22,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()(),t.TgZ(23,"nz-form-item",15)(24,"nz-form-label",11),t._uU(25,"\u65f6\u957f\u9650\u5236"),t.qZA(),t.YNc(26,ji,9,0,"ng-template",null,16,t.W1O),t.TgZ(28,"nz-form-control",13)(29,"app-input-duration",17),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.model.output.durationLimit=a)}),t.qZA()(),t.TgZ(30,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.options.output.durationLimit=a?s.globalSettings.output.durationLimit:null)}),t._uU(31,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()()(),t.TgZ(32,"div",18)(33,"h2"),t._uU(34,"\u5f55\u5236"),t.qZA(),t.TgZ(35,"nz-form-item",19)(36,"nz-form-label",11),t._uU(37,"\u76f4\u64ad\u6d41\u683c\u5f0f"),t.qZA(),t.YNc(38,Vi,15,0,"ng-template",null,20,t.W1O),t.TgZ(40,"nz-form-control",21)(41,"nz-select",22),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.model.recorder.streamFormat=a)}),t.qZA()(),t.TgZ(42,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.options.recorder.streamFormat=a?s.globalSettings.recorder.streamFormat:null)}),t._uU(43,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()(),t.YNc(44,Xi,10,5,"nz-form-item",23),t.TgZ(45,"nz-form-item",19)(46,"nz-form-label",24),t._uU(47,"\u753b\u8d28"),t.qZA(),t.TgZ(48,"nz-form-control",21)(49,"nz-select",25),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.model.recorder.qualityNumber=a)}),t.qZA()(),t.TgZ(50,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.options.recorder.qualityNumber=a?s.globalSettings.recorder.qualityNumber:null)}),t._uU(51,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()(),t.TgZ(52,"nz-form-item",19)(53,"nz-form-label",26),t._uU(54,"\u4fdd\u5b58\u5c01\u9762"),t.qZA(),t.TgZ(55,"nz-form-control",27)(56,"nz-switch",28),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.model.recorder.saveCover=a)}),t.qZA()(),t.TgZ(57,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.options.recorder.saveCover=a?s.globalSettings.recorder.saveCover:null)}),t._uU(58,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()(),t.TgZ(59,"nz-form-item",19)(60,"nz-form-label",11),t._uU(61,"\u5c01\u9762\u4fdd\u5b58\u7b56\u7565"),t.qZA(),t.YNc(62,ta,8,0,"ng-template",null,29,t.W1O),t.TgZ(64,"nz-form-control",21)(65,"nz-select",30),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.model.recorder.coverSaveStrategy=a)}),t.qZA()(),t.TgZ(66,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.options.recorder.coverSaveStrategy=a?s.globalSettings.recorder.coverSaveStrategy:null)}),t._uU(67,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()(),t.YNc(68,ea,8,5,"nz-form-item",23),t.TgZ(69,"nz-form-item",19)(70,"nz-form-label",31),t._uU(71,"\u65ad\u7f51\u7b49\u5f85\u65f6\u95f4"),t.qZA(),t.TgZ(72,"nz-form-control",21)(73,"nz-select",32),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.model.recorder.disconnectionTimeout=a)}),t.qZA()(),t.TgZ(74,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.options.recorder.bufferSize=a?s.globalSettings.recorder.bufferSize:null)}),t._uU(75,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()(),t.YNc(76,na,7,5,"nz-form-item",23),t.qZA(),t.TgZ(77,"div",33)(78,"h2"),t._uU(79,"\u5f39\u5e55"),t.qZA(),t.TgZ(80,"nz-form-item",19)(81,"nz-form-label",34),t._uU(82,"\u8bb0\u5f55\u793c\u7269"),t.qZA(),t.TgZ(83,"nz-form-control",27)(84,"nz-switch",35),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.model.danmaku.recordGiftSend=a)}),t.qZA()(),t.TgZ(85,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.options.danmaku.recordGiftSend=a?s.globalSettings.danmaku.recordGiftSend:null)}),t._uU(86,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()(),t.TgZ(87,"nz-form-item",19)(88,"nz-form-label",36),t._uU(89,"\u8bb0\u5f55\u514d\u8d39\u793c\u7269"),t.qZA(),t.TgZ(90,"nz-form-control",27)(91,"nz-switch",37),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.model.danmaku.recordFreeGifts=a)}),t.qZA()(),t.TgZ(92,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.options.danmaku.recordFreeGifts=a?s.globalSettings.danmaku.recordFreeGifts:null)}),t._uU(93,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()(),t.TgZ(94,"nz-form-item",19)(95,"nz-form-label",38),t._uU(96,"\u8bb0\u5f55\u4e0a\u8230"),t.qZA(),t.TgZ(97,"nz-form-control",27)(98,"nz-switch",39),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.model.danmaku.recordGuardBuy=a)}),t.qZA()(),t.TgZ(99,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.options.danmaku.recordGuardBuy=a?s.globalSettings.danmaku.recordGuardBuy:null)}),t._uU(100,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()(),t.TgZ(101,"nz-form-item",19)(102,"nz-form-label",40),t._uU(103,"\u8bb0\u5f55 Super Chat"),t.qZA(),t.TgZ(104,"nz-form-control",27)(105,"nz-switch",41),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.model.danmaku.recordSuperChat=a)}),t.qZA()(),t.TgZ(106,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.options.danmaku.recordSuperChat=a?s.globalSettings.danmaku.recordSuperChat:null)}),t._uU(107,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()(),t.TgZ(108,"nz-form-item",19)(109,"nz-form-label",42),t._uU(110,"\u5f39\u5e55\u524d\u52a0\u7528\u6237\u540d"),t.qZA(),t.TgZ(111,"nz-form-control",27)(112,"nz-switch",43),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.model.danmaku.danmuUname=a)}),t.qZA()(),t.TgZ(113,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.options.danmaku.danmuUname=a?s.globalSettings.danmaku.danmuUname:null)}),t._uU(114,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()(),t.TgZ(115,"nz-form-item",19)(116,"nz-form-label",44),t._uU(117,"\u4fdd\u5b58\u539f\u59cb\u5f39\u5e55"),t.qZA(),t.TgZ(118,"nz-form-control",27)(119,"nz-switch",45),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.model.danmaku.saveRawDanmaku=a)}),t.qZA()(),t.TgZ(120,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.options.danmaku.saveRawDanmaku=a?s.globalSettings.danmaku.saveRawDanmaku:null)}),t._uU(121,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()()(),t.TgZ(122,"div",46)(123,"h2"),t._uU(124,"\u6587\u4ef6\u5904\u7406"),t.qZA(),t.TgZ(125,"nz-form-item",19)(126,"nz-form-label",47),t._uU(127,"flv \u6dfb\u52a0\u5143\u6570\u636e"),t.qZA(),t.TgZ(128,"nz-form-control",27)(129,"nz-switch",48),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.model.postprocessing.injectExtraMetadata=a)}),t.qZA()(),t.TgZ(130,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.options.postprocessing.injectExtraMetadata=a?s.globalSettings.postprocessing.injectExtraMetadata:null)}),t._uU(131,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()(),t.TgZ(132,"nz-form-item",19)(133,"nz-form-label",49),t._uU(134,"\u8f6c\u5c01\u88c5\u4e3a mp4"),t.qZA(),t.TgZ(135,"nz-form-control",27)(136,"nz-switch",50),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.model.postprocessing.remuxToMp4=a)}),t.qZA()(),t.TgZ(137,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.options.postprocessing.remuxToMp4=a?s.globalSettings.postprocessing.remuxToMp4:null)}),t._uU(138,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()(),t.TgZ(139,"nz-form-item",19)(140,"nz-form-label",11),t._uU(141,"\u6e90\u6587\u4ef6\u5220\u9664\u7b56\u7565"),t.qZA(),t.YNc(142,oa,7,0,"ng-template",null,51,t.W1O),t.TgZ(144,"nz-form-control",21)(145,"nz-select",52),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.model.postprocessing.deleteSource=a)}),t.qZA()(),t.TgZ(146,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.options.postprocessing.deleteSource=a?s.globalSettings.postprocessing.deleteSource:null)}),t._uU(147,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()()(),t.TgZ(148,"div",53)(149,"h2"),t._uU(150,"\u7f51\u7edc\u8bf7\u6c42"),t.qZA(),t.TgZ(151,"nz-form-item",54)(152,"nz-form-label",55),t._uU(153,"User Agent"),t.qZA(),t.TgZ(154,"nz-form-control",56)(155,"textarea",57,58),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.model.header.userAgent=a)}),t.qZA()(),t.YNc(157,aa,1,1,"ng-template",null,59,t.W1O),t.TgZ(159,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.options.header.userAgent=a?s.globalSettings.header.userAgent:null)}),t._uU(160,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()(),t.TgZ(161,"nz-form-item",54)(162,"nz-form-label",60),t._uU(163,"Cookie"),t.qZA(),t.TgZ(164,"nz-form-control",61)(165,"textarea",62,63),t.NdJ("ngModelChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.model.header.cookie=a)}),t.qZA()(),t.TgZ(167,"label",9),t.NdJ("nzCheckedChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.options.header.cookie=a?s.globalSettings.header.cookie:null)}),t._uU(168,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),t.qZA()()()(),t.BQk()}if(2&n){const e=t.MAs(11),i=t.MAs(18),a=t.MAs(27),s=t.MAs(39),d=t.MAs(63),C=t.MAs(143),z=t.MAs(156),M=t.MAs(158),A=t.MAs(166),l=t.oxw();t.xp6(8),t.Q6J("nzErrorTip",e),t.xp6(1),t.Q6J("pattern",l.pathTemplatePattern)("ngModel",l.model.output.pathTemplate)("disabled",null===l.options.output.pathTemplate),t.xp6(3),t.Q6J("nzChecked",null!==l.options.output.pathTemplate),t.xp6(3),t.Q6J("nzTooltipTitle",i),t.xp6(5),t.Q6J("ngModel",l.model.output.filesizeLimit)("disabled",null===l.options.output.filesizeLimit),t.xp6(1),t.Q6J("nzChecked",null!==l.options.output.filesizeLimit),t.xp6(3),t.Q6J("nzTooltipTitle",a),t.xp6(5),t.Q6J("ngModel",l.model.output.durationLimit)("disabled",null===l.options.output.durationLimit),t.xp6(1),t.Q6J("nzChecked",null!==l.options.output.durationLimit),t.xp6(6),t.Q6J("nzTooltipTitle",s),t.xp6(5),t.Q6J("ngModel",l.model.recorder.streamFormat)("disabled",null===l.options.recorder.streamFormat)("nzOptions",l.streamFormatOptions),t.xp6(1),t.Q6J("nzChecked",null!==l.options.recorder.streamFormat),t.xp6(2),t.Q6J("ngIf","fmp4"===(l.options.recorder.streamFormat||l.model.recorder.streamFormat)),t.xp6(5),t.Q6J("ngModel",l.model.recorder.qualityNumber)("disabled",null===l.options.recorder.qualityNumber)("nzOptions",l.qualityOptions),t.xp6(1),t.Q6J("nzChecked",null!==l.options.recorder.qualityNumber),t.xp6(6),t.Q6J("ngModel",l.model.recorder.saveCover)("disabled",null===l.options.recorder.saveCover),t.xp6(1),t.Q6J("nzChecked",null!==l.options.recorder.saveCover),t.xp6(3),t.Q6J("nzTooltipTitle",d),t.xp6(5),t.Q6J("ngModel",l.model.recorder.coverSaveStrategy)("disabled",null===l.options.recorder.coverSaveStrategy||!l.options.recorder.saveCover)("nzOptions",l.coverSaveStrategies),t.xp6(1),t.Q6J("nzChecked",null!==l.options.recorder.coverSaveStrategy),t.xp6(2),t.Q6J("ngIf","flv"===(l.options.recorder.streamFormat||l.model.recorder.streamFormat)),t.xp6(5),t.Q6J("ngModel",l.model.recorder.disconnectionTimeout)("disabled",null===l.options.recorder.disconnectionTimeout)("nzOptions",l.disconnectionTimeoutOptions)("nzOptionOverflowSize",6),t.xp6(1),t.Q6J("nzChecked",null!==l.options.recorder.bufferSize),t.xp6(2),t.Q6J("ngIf","flv"===(l.options.recorder.streamFormat||l.model.recorder.streamFormat)),t.xp6(8),t.Q6J("ngModel",l.model.danmaku.recordGiftSend)("disabled",null===l.options.danmaku.recordGiftSend),t.xp6(1),t.Q6J("nzChecked",null!==l.options.danmaku.recordGiftSend),t.xp6(6),t.Q6J("ngModel",l.model.danmaku.recordFreeGifts)("disabled",null===l.options.danmaku.recordFreeGifts),t.xp6(1),t.Q6J("nzChecked",null!==l.options.danmaku.recordFreeGifts),t.xp6(6),t.Q6J("ngModel",l.model.danmaku.recordGuardBuy)("disabled",null===l.options.danmaku.recordGuardBuy),t.xp6(1),t.Q6J("nzChecked",null!==l.options.danmaku.recordGuardBuy),t.xp6(6),t.Q6J("ngModel",l.model.danmaku.recordSuperChat)("disabled",null===l.options.danmaku.recordSuperChat),t.xp6(1),t.Q6J("nzChecked",null!==l.options.danmaku.recordSuperChat),t.xp6(6),t.Q6J("ngModel",l.model.danmaku.danmuUname)("disabled",null===l.options.danmaku.danmuUname),t.xp6(1),t.Q6J("nzChecked",null!==l.options.danmaku.danmuUname),t.xp6(6),t.Q6J("ngModel",l.model.danmaku.saveRawDanmaku)("disabled",null===l.options.danmaku.saveRawDanmaku),t.xp6(1),t.Q6J("nzChecked",null!==l.options.danmaku.saveRawDanmaku),t.xp6(9),t.Q6J("ngModel",l.model.postprocessing.injectExtraMetadata)("disabled",null===l.options.postprocessing.injectExtraMetadata||!!l.options.postprocessing.remuxToMp4),t.xp6(1),t.Q6J("nzChecked",null!==l.options.postprocessing.injectExtraMetadata),t.xp6(6),t.Q6J("ngModel",l.model.postprocessing.remuxToMp4)("disabled",null===l.options.postprocessing.remuxToMp4),t.xp6(1),t.Q6J("nzChecked",null!==l.options.postprocessing.remuxToMp4),t.xp6(3),t.Q6J("nzTooltipTitle",C),t.xp6(5),t.Q6J("ngModel",l.model.postprocessing.deleteSource)("disabled",null===l.options.postprocessing.deleteSource||!l.options.postprocessing.remuxToMp4)("nzOptions",l.deleteStrategies),t.xp6(1),t.Q6J("nzChecked",null!==l.options.postprocessing.deleteSource),t.xp6(8),t.Q6J("nzWarningTip",l.warningTip)("nzValidateStatus",z.valid&&l.options.header.userAgent!==l.taskOptions.header.userAgent&&l.options.header.userAgent!==l.globalSettings.header.userAgent?"warning":z)("nzErrorTip",M),t.xp6(1),t.Q6J("rows",3)("ngModel",l.model.header.userAgent)("disabled",null===l.options.header.userAgent),t.xp6(4),t.Q6J("nzChecked",null!==l.options.header.userAgent),t.xp6(5),t.Q6J("nzWarningTip",l.warningTip)("nzValidateStatus",A.valid&&l.options.header.cookie!==l.taskOptions.header.cookie&&l.options.header.cookie!==l.globalSettings.header.cookie?"warning":A),t.xp6(1),t.Q6J("rows",3)("ngModel",l.model.header.cookie)("disabled",null===l.options.header.cookie),t.xp6(2),t.Q6J("nzChecked",null!==l.options.header.cookie)}}class Tt{constructor(o){this.changeDetector=o,this.visible=!1,this.visibleChange=new t.vpe,this.cancel=new t.vpe,this.confirm=new t.vpe,this.afterOpen=new t.vpe,this.afterClose=new t.vpe,this.warningTip="\u9700\u8981\u91cd\u542f\u5f39\u5e55\u5ba2\u6237\u7aef\u624d\u80fd\u751f\u6548\uff0c\u5982\u679c\u4efb\u52a1\u6b63\u5728\u5f55\u5236\u53ef\u80fd\u4f1a\u4e22\u5931\u5f39\u5e55\uff01",this.pathTemplatePattern=Z._m,this.streamFormatOptions=(0,N.Z)(Z.tp),this.recordingModeOptions=(0,N.Z)(Z.kV),this.fmp4StreamTimeoutOptions=(0,N.Z)(Z.D4),this.qualityOptions=(0,N.Z)(Z.O6),this.readTimeoutOptions=(0,N.Z)(Z.D4),this.disconnectionTimeoutOptions=(0,N.Z)(Z.$w),this.bufferOptions=(0,N.Z)(Z.Rc),this.deleteStrategies=(0,N.Z)(Z.rc),this.coverSaveStrategies=(0,N.Z)(Z.J_)}ngOnChanges(){this.options=(0,N.Z)(this.taskOptions),this.setupModel(),this.changeDetector.markForCheck()}close(){this.setVisible(!1)}setVisible(o){this.visible=o,this.visibleChange.emit(o),this.changeDetector.markForCheck()}handleCancel(){this.cancel.emit(),this.close()}handleConfirm(){this.confirm.emit((0,X.e5)(this.options,this.taskOptions)),this.close()}setupModel(){const o={};for(const e of Object.keys(this.options)){const s=this.globalSettings[e];Reflect.set(o,e,new Proxy(this.options[e],{get:(d,C)=>Reflect.get(d,C)??Reflect.get(s,C),set:(d,C,z)=>Reflect.set(d,C,z)}))}this.model=o}}Tt.\u0275fac=function(o){return new(o||Tt)(t.Y36(t.sBO))},Tt.\u0275cmp=t.Xpm({type:Tt,selectors:[["app-task-settings-dialog"]],viewQuery:function(o,e){if(1&o&&t.Gf(p.F,5),2&o){let i;t.iGM(i=t.CRH())&&(e.ngForm=i.first)}},inputs:{taskOptions:"taskOptions",globalSettings:"globalSettings",visible:"visible"},outputs:{visibleChange:"visibleChange",cancel:"cancel",confirm:"confirm",afterOpen:"afterOpen",afterClose:"afterClose"},features:[t.TTD],decls:2,vars:2,consts:[["nzTitle","\u4efb\u52a1\u8bbe\u7f6e","nzCentered","",3,"nzVisible","nzOkDisabled","nzOnOk","nzOnCancel","nzAfterOpen","nzAfterClose"],[4,"nzModalContent"],["nz-form","","ngForm",""],["ngModelGroup","output",1,"form-group","output"],[1,"setting-item","input"],["nzNoColon","","nzTooltipTitle","\u53d8\u91cf\u8bf4\u660e\u8bf7\u67e5\u770b\u5bf9\u5e94\u5168\u5c40\u8bbe\u7f6e",1,"setting-label"],[1,"setting-control","input",3,"nzErrorTip"],["type","text","required","","nz-input","","name","pathTemplate",3,"pattern","ngModel","disabled","ngModelChange"],["pathTemplateErrorTip",""],["nz-checkbox","",3,"nzChecked","nzCheckedChange"],[1,"setting-item","filesize-limit"],["nzNoColon","",1,"setting-label",3,"nzTooltipTitle"],["filesizeLimitTip",""],[1,"setting-control","input"],["name","filesizeLimit",3,"ngModel","disabled","ngModelChange"],[1,"setting-item","duration-limit"],["durationLimitTip",""],["name","durationLimit",3,"ngModel","disabled","ngModelChange"],["ngModelGroup","recorder",1,"form-group","recorder"],[1,"setting-item"],["streamFormatTip",""],[1,"setting-control","select"],["name","streamFormat",3,"ngModel","disabled","nzOptions","ngModelChange"],["class","setting-item",4,"ngIf"],["nzNoColon","","nzTooltipTitle","\u6240\u9009\u753b\u8d28\u4e0d\u5b58\u5728\u5c06\u4ee5\u539f\u753b\u4ee3\u66ff",1,"setting-label"],["name","qualityNumber",3,"ngModel","disabled","nzOptions","ngModelChange"],["nzNoColon","","nzTooltipTitle","\u5f55\u64ad\u6587\u4ef6\u5b8c\u6210\u65f6\u4fdd\u5b58\u5f53\u524d\u76f4\u64ad\u95f4\u7684\u5c01\u9762",1,"setting-label"],[1,"setting-control","switch"],["name","saveCover",3,"ngModel","disabled","ngModelChange"],["coverSaveStrategyTip",""],["name","coverSaveStrategy",3,"ngModel","disabled","nzOptions","ngModelChange"],["nzNoColon","","nzTooltipTitle","\u65ad\u7f51\u8d85\u8fc7\u7b49\u5f85\u65f6\u95f4\u5c31\u7ed3\u675f\u5f55\u5236\uff0c\u5982\u679c\u7f51\u7edc\u6062\u590d\u540e\u4ecd\u672a\u4e0b\u64ad\u4f1a\u81ea\u52a8\u91cd\u65b0\u5f00\u59cb\u5f55\u5236\u3002",1,"setting-label"],["name","disconnectionTimeout",3,"ngModel","disabled","nzOptions","nzOptionOverflowSize","ngModelChange"],["ngModelGroup","danmaku",1,"form-group","danmaku"],["nzFor","recordGiftSend","nzNoColon","","nzTooltipTitle","\u8bb0\u5f55\u793c\u7269\u4fe1\u606f\u5230\u5f39\u5e55\u6587\u4ef6\u91cc",1,"setting-label"],["id","recordGiftSend","name","recordGiftSend",3,"ngModel","disabled","ngModelChange"],["nzFor","recordFreeGifts","nzNoColon","","nzTooltipTitle","\u8bb0\u5f55\u514d\u8d39\u793c\u7269\u4fe1\u606f\u5230\u5f39\u5e55\u6587\u4ef6\u91cc",1,"setting-label"],["id","recordFreeGifts","name","recordFreeGifts",3,"ngModel","disabled","ngModelChange"],["nzFor","recordGuardBuy","nzNoColon","","nzTooltipTitle","\u8bb0\u5f55\u4e0a\u8230\u4fe1\u606f\u5230\u5f39\u5e55\u6587\u4ef6\u91cc",1,"setting-label"],["id","recordGuardBuy","name","recordGuardBuy",3,"ngModel","disabled","ngModelChange"],["nzFor","recordSuperChat","nzNoColon","","nzTooltipTitle","\u8bb0\u5f55 Super Chat \u4fe1\u606f\u5230\u5f39\u5e55\u6587\u4ef6\u91cc",1,"setting-label"],["id","recordSuperChat","name","recordSuperChat",3,"ngModel","disabled","ngModelChange"],["nzFor","danmuUname","nzNoColon","","nzTooltipTitle","\u53d1\u9001\u8005: \u5f39\u5e55\u5185\u5bb9",1,"setting-label"],["id","danmuUname","name","danmuUname",3,"ngModel","disabled","ngModelChange"],["nzFor","saveRawDanmaku","nzNoColon","","nzTooltipTitle","\u4fdd\u5b58\u539f\u59cb\u5f39\u5e55\u5230 JSON lines \u6587\u4ef6\uff0c\u4e3b\u8981\u7528\u4e8e\u5206\u6790\u8c03\u8bd5\u3002",1,"setting-label"],["id","saveRawDanmaku","name","saveRawDanmaku",3,"ngModel","disabled","ngModelChange"],["ngModelGroup","postprocessing",1,"form-group","postprocessing"],["nzNoColon","","nzTooltipTitle","\u6dfb\u52a0\u5173\u952e\u5e27\u7b49\u5143\u6570\u636e\u4f7f\u5b9a\u4f4d\u64ad\u653e\u548c\u62d6\u8fdb\u5ea6\u6761\u4e0d\u4f1a\u5361\u987f",1,"setting-label"],["name","injectExtraMetadata",3,"ngModel","disabled","ngModelChange"],["nzNoColon","","nzTooltipTitle","\u8c03\u7528 ffmpeg \u8fdb\u884c\u8f6c\u6362\uff0c\u9700\u8981\u5b89\u88c5 ffmpeg \u3002",1,"setting-label"],["name","remuxToMp4",3,"ngModel","disabled","ngModelChange"],["deleteSourceTip",""],["name","deleteSource",3,"ngModel","disabled","nzOptions","ngModelChange"],["ngModelGroup","header",1,"form-group","header"],[1,"setting-item","textarea"],["nzFor","userAgent","nzNoColon","",1,"setting-label"],[1,"setting-control","textarea",3,"nzWarningTip","nzValidateStatus","nzErrorTip"],["nz-input","","required","","id","userAgent","name","userAgent",3,"rows","ngModel","disabled","ngModelChange"],["userAgent","ngModel"],["userAgentErrorTip",""],["nzFor","cookie","nzNoColon","",1,"setting-label"],[1,"setting-control","textarea",3,"nzWarningTip","nzValidateStatus"],["nz-input","","id","cookie","name","cookie",3,"rows","ngModel","disabled","ngModelChange"],["cookie","ngModel"],[4,"ngIf"],["fmp4StreamTimeoutTip",""],["name","fmp4StreamTimeout",3,"ngModel","disabled","nzOptions","ngModelChange"],["fmp4StreamTimeout","ngModel"],["nzNoColon","","nzTooltipTitle","\u8d85\u65f6\u65f6\u95f4\u8bbe\u7f6e\u5f97\u6bd4\u8f83\u957f\u76f8\u5bf9\u4e0d\u5bb9\u6613\u56e0\u7f51\u7edc\u4e0d\u7a33\u5b9a\u800c\u51fa\u73b0\u6d41\u4e2d\u65ad\uff0c\u4f46\u662f\u4e00\u65e6\u51fa\u73b0\u4e2d\u65ad\u5c31\u65e0\u6cd5\u5b9e\u73b0\u65e0\u7f1d\u62fc\u63a5\u4e14\u6f0f\u5f55\u8f83\u591a\u3002",1,"setting-label"],["nzWarningTip","\u65e0\u7f1d\u62fc\u63a5\u4f1a\u5931\u6548\uff01",1,"setting-control","select",3,"nzValidateStatus"],["name","readTimeout",3,"ngModel","disabled","nzOptions","ngModelChange"],["readTimeout","ngModel"],["nzNoColon","","nzTooltipTitle","\u786c\u76d8\u5199\u5165\u7f13\u51b2\u8bbe\u7f6e\u5f97\u6bd4\u8f83\u5927\u53ef\u4ee5\u51cf\u5c11\u5bf9\u786c\u76d8\u7684\u5199\u5165\uff0c\u4f46\u9700\u8981\u5360\u7528\u66f4\u591a\u7684\u5185\u5b58\u3002",1,"setting-label"],["name","bufferSize",3,"ngModel","disabled","nzOptions","nzOptionOverflowSize","ngModelChange"]],template:function(o,e){1&o&&(t.TgZ(0,"nz-modal",0),t.NdJ("nzOnOk",function(){return e.handleConfirm()})("nzOnCancel",function(){return e.handleCancel()})("nzAfterOpen",function(){return e.afterOpen.emit()})("nzAfterClose",function(){return e.afterClose.emit()}),t.YNc(1,sa,169,80,"ng-container",1),t.qZA()),2&o&&t.Q6J("nzVisible",e.visible)("nzOkDisabled",null==e.ngForm||null==e.ngForm.form?null:e.ngForm.form.invalid)},dependencies:[c.O5,p._Y,p.Fj,p.JJ,p.JL,p.Q7,p.c5,p.On,p.Mq,p.F,O.t3,O.SK,Ft.i,K.du,K.Hf,R.Lr,R.Nx,R.iK,R.Fd,V.Zp,$t.Ie,wt.Vq,Ki.i,Gi.q],styles:[".settings-page[_ngcontent-%COMP%]{max-width:680px;margin:0 auto}.setting-item[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;margin:0;padding:1em 2em;border-top:1px solid rgba(0,0,0,.06)}.setting-item[_ngcontent-%COMP%]:first-child{border-top:none}.settings-page-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.form-group[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:700;font-size:1.2em;border-bottom:1px solid rgba(0,0,0,.1)}.setting-item[_ngcontent-%COMP%]{gap:.5em}.setting-item.actionable[_ngcontent-%COMP%]{cursor:pointer}.setting-item.actionable[_ngcontent-%COMP%]:hover{background-color:#2021241a}a.setting-item[_ngcontent-%COMP%]{outline:none;text-decoration:none;color:inherit;cursor:pointer;height:60px}a.setting-item[_ngcontent-%COMP%]:hover{background-color:#2021241a}a.setting-item[_ngcontent-%COMP%]:not(:first-child){height:61px}.setting-label[_ngcontent-%COMP%]{padding:0!important;max-width:-moz-fit-content!important;max-width:fit-content!important;text-align:left}.setting-label.align-required[_ngcontent-%COMP%]{position:relative;left:11px}.setting-control[_ngcontent-%COMP%], .setting-value[_ngcontent-%COMP%]{max-width:-moz-fit-content!important;max-width:fit-content!important;margin-left:auto!important}.setting-control.input[_ngcontent-%COMP%], .setting-value.input[_ngcontent-%COMP%]{max-width:100%!important}.setting-control.select[_ngcontent-%COMP%], .setting-value.select[_ngcontent-%COMP%]{max-width:8em!important;width:8em!important}.setting-control.switch[_ngcontent-%COMP%], .setting-value.switch[_ngcontent-%COMP%]{flex-direction:row-reverse;align-items:center}.setting-control.checkbox[_ngcontent-%COMP%], .setting-value.checkbox[_ngcontent-%COMP%]{max-width:100%!important;width:100%!important;margin-left:0}.setting-control.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .setting-value.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%}.setting-control.textarea[_ngcontent-%COMP%], .setting-value.textarea[_ngcontent-%COMP%]{max-width:100%!important;width:100%!important;margin-left:0}.setting-control.textarea[_ngcontent-%COMP%]::-webkit-scrollbar, .setting-value.textarea[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:4px}@media screen and (max-width: 332px){.setting-control.radio[_ngcontent-%COMP%], .setting-value.radio[_ngcontent-%COMP%]{margin-left:0!important}}@media screen and (max-width: 319px){.setting-control.select[_ngcontent-%COMP%], .setting-value.select[_ngcontent-%COMP%]{margin-left:0!important}}.setting-value[_ngcontent-%COMP%]{color:#5f6368;font-weight:400;width:100%;max-height:3em;overflow:hidden}nz-divider[_ngcontent-%COMP%]{margin:0!important}.form-group[_ngcontent-%COMP%]:last-child   .setting-item[_ngcontent-%COMP%]:last-child{padding-bottom:0}.setting-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);align-items:center;padding:1em 0;gap:1em;border:none}.setting-item[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0!important}.setting-item[_ngcontent-%COMP%]   .setting-label[_ngcontent-%COMP%]{justify-self:start}.setting-item[_ngcontent-%COMP%]   .setting-control[_ngcontent-%COMP%]{justify-self:center}.setting-item[_ngcontent-%COMP%]   label[nz-checkbox][_ngcontent-%COMP%]{justify-self:end}.setting-item[_ngcontent-%COMP%]   label[nz-checkbox][_ngcontent-%COMP%]  span:last-of-type{padding-right:0}.setting-item.input[_ngcontent-%COMP%], .setting-item.textarea[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.setting-item.input[_ngcontent-%COMP%]   .setting-label[_ngcontent-%COMP%], .setting-item.textarea[_ngcontent-%COMP%]   .setting-label[_ngcontent-%COMP%]{grid-row:1/2;grid-column:1/2;justify-self:center}.setting-item.input[_ngcontent-%COMP%]   .setting-control[_ngcontent-%COMP%], .setting-item.textarea[_ngcontent-%COMP%]   .setting-control[_ngcontent-%COMP%]{grid-row:2/3;grid-column:1/-1;justify-self:stretch}.setting-item.input[_ngcontent-%COMP%]   label[nz-checkbox][_ngcontent-%COMP%], .setting-item.textarea[_ngcontent-%COMP%]   label[nz-checkbox][_ngcontent-%COMP%]{grid-row:1/2;grid-column:2/3;justify-self:center}@media screen and (max-width: 450px){.setting-item[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.setting-item[_ngcontent-%COMP%]   .setting-label[_ngcontent-%COMP%]{grid-column:1/-1;justify-self:center}.setting-item[_ngcontent-%COMP%]   label[nz-checkbox][_ngcontent-%COMP%]{justify-self:end}}.filesize-limit[_ngcontent-%COMP%]   .setting-control.input[_ngcontent-%COMP%], .duration-limit[_ngcontent-%COMP%]   .setting-control.input[_ngcontent-%COMP%]{max-width:8em!important;width:8em!important}@media screen and (max-width: 319px){.filesize-limit[_ngcontent-%COMP%]   .setting-control.input[_ngcontent-%COMP%], .duration-limit[_ngcontent-%COMP%]   .setting-control.input[_ngcontent-%COMP%]{margin-left:0!important}}"],changeDetection:0});const ze=function(){return{spacer:""}};function ra(n,o){if(1&n&&(t.TgZ(0,"div",2)(1,"p",3)(2,"span",4),t._UZ(3,"i"),t.qZA(),t.TgZ(4,"span",5),t._uU(5),t.ALo(6,"duration"),t.qZA(),t.TgZ(7,"span",6),t._uU(8),t.ALo(9,"datarate"),t.qZA(),t.TgZ(10,"span",7),t._uU(11),t.ALo(12,"filesize"),t.qZA(),t.TgZ(13,"span",8),t.ALo(14,"number"),t._uU(15),t.ALo(16,"number"),t.qZA(),t.TgZ(17,"span",9),t._uU(18),t.ALo(19,"quality"),t.qZA()()()),2&n){const e=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,6,e.status.rec_elapsed)," "),t.xp6(3),t.hij(" ",t.xi3(9,8,e.status.rec_rate,t.DdM(22,ze))," "),t.xp6(3),t.hij(" ",t.xi3(12,11,e.status.rec_total,t.DdM(23,ze))," "),t.xp6(2),t.MGl("nzTooltipTitle","\u5f39\u5e55\u603b\u8ba1\uff1a",t.xi3(14,14,e.status.danmu_total,"1.0-0"),""),t.xp6(2),t.hij(" ",t.xi3(16,17,e.status.danmu_total,"1.0-0")," "),t.xp6(3),t.hij(" ",e.status.real_quality_number?t.lcZ(19,20,e.status.real_quality_number):""," ")}}function la(n,o){if(1&n&&(t.TgZ(0,"div",2)(1,"p",10),t.ALo(2,"filename"),t._uU(3),t.ALo(4,"filename"),t.qZA(),t._UZ(5,"nz-progress",11),t.ALo(6,"progress"),t.qZA()),2&n){const e=t.oxw();let i,a;t.xp6(1),t.MGl("nzTooltipTitle","\u6b63\u5728\u6dfb\u52a0\u5143\u6570\u636e\uff1a",t.lcZ(2,7,null!==(i=e.status.postprocessing_path)&&void 0!==i?i:""),""),t.xp6(2),t.hij(" ",t.lcZ(4,9,null!==(a=e.status.postprocessing_path)&&void 0!==a?a:"")," "),t.xp6(2),t.Q6J("nzType","line")("nzShowInfo",!1)("nzStrokeLinecap","square")("nzStrokeWidth",2)("nzPercent",null===e.status.postprocessing_progress?0:t.lcZ(6,11,e.status.postprocessing_progress))}}function ca(n,o){if(1&n&&(t.TgZ(0,"div",2)(1,"p",12),t.ALo(2,"filename"),t._uU(3),t.ALo(4,"filename"),t.qZA(),t._UZ(5,"nz-progress",11),t.ALo(6,"progress"),t.qZA()),2&n){const e=t.oxw();let i,a;t.xp6(1),t.MGl("nzTooltipTitle","\u6b63\u5728\u8f6c\u5c01\u88c5\uff1a",t.lcZ(2,7,null!==(i=e.status.postprocessing_path)&&void 0!==i?i:""),""),t.xp6(2),t.hij(" ",t.lcZ(4,9,null!==(a=e.status.postprocessing_path)&&void 0!==a?a:"")," "),t.xp6(2),t.Q6J("nzType","line")("nzShowInfo",!1)("nzStrokeLinecap","square")("nzStrokeWidth",2)("nzPercent",null===e.status.postprocessing_progress?0:t.lcZ(6,11,e.status.postprocessing_progress))}}class xt{constructor(){this.RunningStatus=m.cG}}xt.\u0275fac=function(o){return new(o||xt)},xt.\u0275cmp=t.Xpm({type:xt,selectors:[["app-status-display"]],inputs:{status:"status"},decls:4,vars:4,consts:[[3,"ngSwitch"],["class","status-display",4,"ngSwitchCase"],[1,"status-display"],[1,"status-bar","recording"],["nz-tooltip","","nzTooltipTitle","\u6b63\u5728\u5f55\u5236","nzTooltipPlacement","top",1,"status-indicator"],["nz-tooltip","","nzTooltipTitle","\u5f55\u5236\u7528\u65f6","nzTooltipPlacement","top",1,"time-elapsed"],["nz-tooltip","","nzTooltipTitle","\u5f55\u5236\u901f\u5ea6","nzTooltipPlacement","top",1,"data-rate"],["nz-tooltip","","nzTooltipTitle","\u5f55\u5236\u603b\u8ba1","nzTooltipPlacement","top",1,"data-count"],["nz-tooltip","","nzTooltipPlacement","top",1,"danmu-count",3,"nzTooltipTitle"],["nz-tooltip","","nzTooltipTitle","\u5f55\u5236\u753b\u8d28","nzTooltipPlacement","leftTop",1,"quality"],["nz-tooltip","","nzTooltipPlacement","top",1,"status-bar","injecting",3,"nzTooltipTitle"],[3,"nzType","nzShowInfo","nzStrokeLinecap","nzStrokeWidth","nzPercent"],["nz-tooltip","","nzTooltipPlacement","top",1,"status-bar","remuxing",3,"nzTooltipTitle"]],template:function(o,e){1&o&&(t.ynx(0,0),t.YNc(1,ra,20,24,"div",1),t.YNc(2,la,7,13,"div",1),t.YNc(3,ca,7,13,"div",1),t.BQk()),2&o&&(t.Q6J("ngSwitch",e.status.running_status),t.xp6(1),t.Q6J("ngSwitchCase",e.RunningStatus.RECORDING),t.xp6(1),t.Q6J("ngSwitchCase",e.RunningStatus.INJECTING),t.xp6(1),t.Q6J("ngSwitchCase",e.RunningStatus.REMUXING))},dependencies:[c.RF,c.n9,it.SY,ne,c.JJ,tt,Rt.f,J,fe.U,H,G],styles:[".status-bar[_ngcontent-%COMP%]{color:#fff;text-shadow:1px 1px 2px black;margin:0;padding:0 .5rem;background:rgba(0,0,0,.32)}.status-display[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%}.status-bar[_ngcontent-%COMP%]{display:flex;gap:1rem;font-size:1rem;line-height:1.8}.status-bar.recording[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.status-bar.recording[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:1rem;height:1rem;border-radius:.5rem;color:red;background:red;animation:_ngcontent-%COMP%_blinker 1s cubic-bezier(1,0,0,1) infinite}@keyframes _ngcontent-%COMP%_blinker{0%{opacity:0}to{opacity:1}}.status-bar.injecting[_ngcontent-%COMP%], .status-bar.remuxing[_ngcontent-%COMP%], .status-bar[_ngcontent-%COMP%]   .danmu-count[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.status-bar[_ngcontent-%COMP%]   .quality[_ngcontent-%COMP%]{flex:none;margin-left:auto}nz-progress[_ngcontent-%COMP%]{display:flex}nz-progress[_ngcontent-%COMP%]  .ant-progress-outer{display:flex}"],changeDetection:0});var _a=r(5141),Qt=r(457),ua=r(4968),pa=r(1481);const Kt=new Map,Gt=new Map;class Dt{constructor(o){this.domSanitizer=o}transform(o,e="object"){return"object"===e?Gt.has(o)?(0,w.of)(Gt.get(o)):(0,Qt.D)(this.fetchImage(o)).pipe((0,W.U)(i=>URL.createObjectURL(i)),(0,W.U)(i=>this.domSanitizer.bypassSecurityTrustUrl(i)),(0,v.b)(i=>Gt.set(o,i)),(0,lt.K)(()=>(0,w.of)(this.domSanitizer.bypassSecurityTrustUrl("")))):Kt.has(o)?(0,w.of)(Kt.get(o)):(0,Qt.D)(this.fetchImage(o)).pipe((0,st.w)(i=>this.createDataURL(i)),(0,v.b)(i=>Kt.set(o,i)),(0,lt.K)(()=>(0,w.of)(this.domSanitizer.bypassSecurityTrustUrl(""))))}fetchImage(o){return(0,yt.Z)(function*(){return yield(yield fetch(o,{referrer:""})).blob()})()}createDataURL(o){const e=new FileReader,i=(0,ua.R)(e,"load").pipe((0,W.U)(()=>this.domSanitizer.bypassSecurityTrustUrl(e.result)));return e.readAsDataURL(o),i}}function ga(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-info-panel",21),t.NdJ("close",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.showInfoPanel=!1)}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("data",e.data)}}Dt.\u0275fac=function(o){return new(o||Dt)(t.Y36(pa.H7,16))},Dt.\u0275pipe=t.Yjl({name:"dataurl",type:Dt,pure:!0});const da=function(n){return[n,"detail"]};function ma(n,o){if(1&n&&(t.TgZ(0,"a",15)(1,"div",16),t._UZ(2,"img",17),t.ALo(3,"async"),t.ALo(4,"dataurl"),t.TgZ(5,"h2",18),t._uU(6),t.qZA(),t.YNc(7,ga,1,1,"app-info-panel",19),t._UZ(8,"app-status-display",20),t.qZA()()),2&n){const e=t.oxw();t.Q6J("routerLink",t.VKq(10,da,e.data.room_info.room_id)),t.xp6(2),t.Q6J("src",t.lcZ(3,6,t.lcZ(4,8,e.data.room_info.cover)),t.LSH),t.xp6(3),t.Q6J("nzTooltipTitle","\u76f4\u64ad\u95f4\u6807\u9898\uff1a"+e.data.room_info.title),t.xp6(1),t.hij(" ",e.data.room_info.title," "),t.xp6(1),t.Q6J("ngIf",e.showInfoPanel),t.xp6(1),t.Q6J("status",e.data.task_status)}}function ha(n,o){if(1&n&&(t._UZ(0,"nz-avatar",22),t.ALo(1,"async"),t.ALo(2,"dataurl")),2&n){const e=t.oxw();t.Q6J("nzShape","square")("nzSize",54)("nzSrc",t.lcZ(1,3,t.lcZ(2,5,e.data.user_info.face)))}}function fa(n,o){1&n&&(t.TgZ(0,"nz-tag",31),t._UZ(1,"i",32),t.TgZ(2,"span"),t._uU(3,"\u672a\u5f00\u64ad"),t.qZA()())}function Ca(n,o){1&n&&(t.TgZ(0,"nz-tag",33),t._UZ(1,"i",34),t.TgZ(2,"span"),t._uU(3,"\u76f4\u64ad\u4e2d"),t.qZA()())}function za(n,o){1&n&&(t.TgZ(0,"nz-tag",35),t._UZ(1,"i",36),t.TgZ(2,"span"),t._uU(3,"\u8f6e\u64ad\u4e2d"),t.qZA()())}function Ta(n,o){if(1&n&&(t.TgZ(0,"p",23)(1,"span",24)(2,"a",25),t._uU(3),t.qZA()(),t.TgZ(4,"span",26),t.ynx(5,27),t.YNc(6,fa,4,0,"nz-tag",28),t.YNc(7,Ca,4,0,"nz-tag",29),t.YNc(8,za,4,0,"nz-tag",30),t.BQk(),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.MGl("href","https://space.bilibili.com/",e.data.user_info.uid,"",t.LSH),t.xp6(1),t.hij(" ",e.data.user_info.name," "),t.xp6(2),t.Q6J("ngSwitch",e.data.room_info.live_status),t.xp6(1),t.Q6J("ngSwitchCase",0),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2)}}function xa(n,o){if(1&n&&(t.TgZ(0,"span",44)(1,"a",25),t._uU(2),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(1),t.MGl("href","https://live.bilibili.com/",e.data.room_info.short_room_id,"",t.LSH),t.xp6(1),t.hij(" ",e.data.room_info.short_room_id,"")}}function Da(n,o){if(1&n&&(t.TgZ(0,"p",37)(1,"span",38)(2,"span",39),t._uU(3,"\u623f\u95f4\u53f7\uff1a"),t.qZA(),t.YNc(4,xa,3,2,"span",40),t.TgZ(5,"span",41)(6,"a",25),t._uU(7),t.qZA()()(),t.TgZ(8,"span",42)(9,"a",25)(10,"nz-tag",43),t._uU(11),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.data.room_info.short_room_id),t.xp6(2),t.MGl("href","https://live.bilibili.com/",e.data.room_info.room_id,"",t.LSH),t.xp6(1),t.Oqu(e.data.room_info.room_id),t.xp6(2),t.hYB("href","https://live.bilibili.com/p/eden/area-tags?parentAreaId=",e.data.room_info.parent_area_id,"&areaId=",e.data.room_info.area_id,"",t.LSH),t.xp6(1),t.Q6J("nzColor","#23ade5"),t.xp6(1),t.hij(" ",e.data.room_info.area_name," ")}}function ka(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"nz-switch",45),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.toggleRecorder())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("nzDisabled",e.toggleRecorderForbidden)("ngModel",e.data.task_status.recorder_enabled)("nzControl",!0)("nzLoading",e.switchPending)}}function Ma(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",46),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.cutStream())}),t._UZ(1,"i",47),t.qZA()}if(2&n){const e=t.oxw();t.ekj("not-allowed",e.data.task_status.running_status!==e.RunningStatus.RECORDING)}}function Oa(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"app-task-settings-dialog",51),t.NdJ("visibleChange",function(a){t.CHM(e);const s=t.oxw(2);return t.KtG(s.settingsDialogVisible=a)})("confirm",function(a){t.CHM(e);const s=t.oxw(2);return t.KtG(s.changeTaskOptions(a))})("afterClose",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.cleanSettingsData())}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("taskOptions",e.taskOptions)("globalSettings",e.globalSettings)("visible",e.settingsDialogVisible)}}function va(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",48),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openSettingsDialog())}),t._UZ(1,"i",49),t.qZA(),t.YNc(2,Oa,2,3,"ng-container",50)}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.taskOptions&&e.globalSettings)}}function Ea(n,o){if(1&n&&(t.TgZ(0,"div",54),t._UZ(1,"i",55),t.qZA()),2&n){t.oxw(2);const e=t.MAs(20);t.Q6J("nzDropdownMenu",e)}}function Aa(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",56),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.menuDrawerVisible=!0)}),t._UZ(1,"i",55),t.qZA()}}function Pa(n,o){if(1&n&&(t.YNc(0,Ea,2,1,"div",52),t.YNc(1,Aa,2,0,"div",53)),2&n){const e=t.oxw();t.Q6J("ngIf",!e.useDrawer),t.xp6(1),t.Q6J("ngIf",e.useDrawer)}}function ya(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"ul",57)(1,"li",58),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.startTask())}),t._uU(2,"\u8fd0\u884c\u4efb\u52a1"),t.qZA(),t.TgZ(3,"li",58),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.stopTask())}),t._uU(4,"\u505c\u6b62\u4efb\u52a1"),t.qZA(),t.TgZ(5,"li",58),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.removeTask())}),t._uU(6,"\u5220\u9664\u4efb\u52a1"),t.qZA(),t.TgZ(7,"li",58),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.stopTask(!0))}),t._uU(8,"\u5f3a\u5236\u505c\u6b62\u4efb\u52a1"),t.qZA(),t.TgZ(9,"li",58),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.disableRecorder(!0))}),t._uU(10,"\u5f3a\u5236\u5173\u95ed\u5f55\u5236"),t.qZA(),t.TgZ(11,"li",58),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.updateTaskInfo())}),t._uU(12,"\u5237\u65b0\u6570\u636e"),t.qZA(),t.TgZ(13,"li",58),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.showInfoPanel=!0)}),t._uU(14,"\u663e\u793a\u5f55\u5236\u4fe1\u606f"),t.qZA()()}}function Sa(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",61),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.menuDrawerVisible=!1)}),t.GkF(2,12),t.qZA(),t.BQk()}if(2&n){t.oxw(2);const e=t.MAs(23);t.xp6(2),t.Q6J("ngTemplateOutlet",e)}}const ba=function(){return{padding:"0"}};function Fa(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"nz-drawer",59),t.NdJ("nzVisibleChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.menuDrawerVisible=a)})("nzOnClose",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.menuDrawerVisible=!1)}),t.YNc(1,Sa,3,1,"ng-container",60),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("nzClosable",!1)("nzBodyStyle",t.DdM(3,ba))("nzVisible",e.menuDrawerVisible)}}const wa=function(n,o,e,i){return[n,o,e,i]},Ia=function(){return{padding:"0.5rem"}},Na=function(){return{size:"large"}};class kt{constructor(o,e,i,a,s,d,C){this.changeDetector=e,this.message=i,this.modal=a,this.settingService=s,this.taskManager=d,this.appTaskSettings=C,this.stopped=!1,this.destroyed=new F.x,this.useDrawer=!1,this.menuDrawerVisible=!1,this.switchPending=!1,this.settingsDialogVisible=!1,this.RunningStatus=m.cG,o.observe(ft[0]).pipe((0,y.R)(this.destroyed)).subscribe(z=>{this.useDrawer=z.matches,e.markForCheck()})}get roomId(){return this.data.room_info.room_id}get toggleRecorderForbidden(){return!this.data.task_status.monitor_enabled}get showInfoPanel(){return Boolean(this.appTaskSettings.getSettings(this.roomId).showInfoPanel)}set showInfoPanel(o){this.appTaskSettings.updateSettings(this.roomId,{showInfoPanel:o})}ngOnChanges(o){console.debug("[ngOnChanges]",this.roomId,o),this.stopped=this.data.task_status.running_status===m.cG.STOPPED}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete()}updateTaskInfo(){this.taskManager.updateTaskInfo(this.roomId).subscribe()}toggleRecorder(){this.toggleRecorderForbidden||this.switchPending||(this.switchPending=!0,this.data.task_status.recorder_enabled?this.taskManager.disableRecorder(this.roomId).subscribe(()=>this.switchPending=!1):this.taskManager.enableRecorder(this.roomId).subscribe(()=>this.switchPending=!1))}removeTask(){this.taskManager.removeTask(this.roomId).subscribe()}startTask(){this.data.task_status.running_status===m.cG.STOPPED?this.taskManager.startTask(this.roomId).subscribe():this.message.warning("\u4efb\u52a1\u8fd0\u884c\u4e2d\uff0c\u5ffd\u7565\u64cd\u4f5c\u3002")}stopTask(o=!1){this.data.task_status.running_status!==m.cG.STOPPED?o&&this.data.task_status.running_status==m.cG.RECORDING?this.modal.confirm({nzTitle:"\u786e\u5b9a\u8981\u5f3a\u5236\u505c\u6b62\u4efb\u52a1\uff1f",nzContent:"\u6b63\u5728\u5f55\u5236\u7684\u6587\u4ef6\u4f1a\u88ab\u5f3a\u884c\u4e2d\u65ad\uff01\u786e\u5b9a\u8981\u653e\u5f03\u6b63\u5728\u5f55\u5236\u7684\u6587\u4ef6\uff1f",nzOnOk:()=>new Promise((e,i)=>{this.taskManager.stopTask(this.roomId,o).subscribe(e,i)})}):this.taskManager.stopTask(this.roomId).subscribe():this.message.warning("\u4efb\u52a1\u5904\u4e8e\u505c\u6b62\u72b6\u6001\uff0c\u5ffd\u7565\u64cd\u4f5c\u3002")}disableRecorder(o=!1){this.data.task_status.recorder_enabled?o&&this.data.task_status.running_status==m.cG.RECORDING?this.modal.confirm({nzTitle:"\u786e\u5b9a\u8981\u5f3a\u5236\u505c\u6b62\u5f55\u5236\uff1f",nzContent:"\u6b63\u5728\u5f55\u5236\u7684\u6587\u4ef6\u4f1a\u88ab\u5f3a\u884c\u4e2d\u65ad\uff01\u786e\u5b9a\u8981\u653e\u5f03\u6b63\u5728\u5f55\u5236\u7684\u6587\u4ef6\uff1f",nzOnOk:()=>new Promise((e,i)=>{this.taskManager.disableRecorder(this.roomId,o).subscribe(e,i)})}):this.taskManager.disableRecorder(this.roomId).subscribe():this.message.warning("\u5f55\u5236\u5904\u4e8e\u5173\u95ed\u72b6\u6001\uff0c\u5ffd\u7565\u64cd\u4f5c\u3002")}openSettingsDialog(){(0,ge.$)(this.settingService.getTaskOptions(this.roomId),this.settingService.getSettings(["output","header","danmaku","recorder","postprocessing"])).subscribe(([o,e])=>{this.taskOptions=o,this.globalSettings=e,this.settingsDialogVisible=!0,this.changeDetector.markForCheck()},o=>{this.message.error(`\u83b7\u53d6\u4efb\u52a1\u8bbe\u7f6e\u51fa\u9519: ${o.message}`)})}cleanSettingsData(){delete this.taskOptions,delete this.globalSettings,this.changeDetector.markForCheck()}changeTaskOptions(o){this.settingService.changeTaskOptions(this.roomId,o).pipe((0,Bt.X)(3,300)).subscribe(e=>{this.message.success("\u4fee\u6539\u4efb\u52a1\u8bbe\u7f6e\u6210\u529f")},e=>{this.message.error(`\u4fee\u6539\u4efb\u52a1\u8bbe\u7f6e\u51fa\u9519: ${e.message}`)})}cutStream(){this.data.task_status.running_status===m.cG.RECORDING&&this.taskManager.canCutStream(this.roomId).subscribe(o=>{o&&this.taskManager.cutStream(this.roomId).subscribe()})}}function Za(n,o){1&n&&(t.TgZ(0,"div",2),t._UZ(1,"nz-empty"),t.qZA())}function Ba(n,o){1&n&&t._UZ(0,"app-task-item",6),2&n&&t.Q6J("data",o.$implicit)}function Ua(n,o){if(1&n&&(t.TgZ(0,"div",3,4),t.YNc(2,Ba,1,1,"app-task-item",5),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.dataList)("ngForTrackBy",e.trackByRoomId)}}kt.\u0275fac=function(o){return new(o||kt)(t.Y36(h.Yg),t.Y36(t.sBO),t.Y36(Jt.dD),t.Y36(K.Sf),t.Y36(Qi.R),t.Y36(Q),t.Y36(et))},kt.\u0275cmp=t.Xpm({type:kt,selectors:[["app-task-item"]],hostVars:2,hostBindings:function(o,e){2&o&&t.ekj("stopped",e.stopped)},inputs:{data:"data"},features:[t.TTD],decls:25,vars:19,consts:[[3,"nzCover","nzHoverable","nzActions","nzBodyStyle"],[3,"nzActive","nzLoading","nzAvatar"],[3,"nzAvatar","nzTitle","nzDescription"],["coverTemplate",""],["avatarTemplate",""],["titleTemplate",""],["descTemplate",""],["actionSwitch",""],["actionDelete",""],["actionSetting",""],["actionMore",""],["dropdownMenu","nzDropdownMenu"],[3,"ngTemplateOutlet"],["menu",""],["nzPlacement","bottom","nzHeight","auto",3,"nzClosable","nzBodyStyle","nzVisible","nzVisibleChange","nzOnClose",4,"ngIf"],[3,"routerLink"],[1,"cover-wrapper"],["alt","\u76f4\u64ad\u95f4\u5c01\u9762",1,"cover",3,"src"],["nz-tooltip","","nzTooltipPlacement","bottomLeft",1,"title",3,"nzTooltipTitle"],[3,"data","close",4,"ngIf"],[3,"status"],[3,"data","close"],[3,"nzShape","nzSize","nzSrc"],[1,"meta-title"],["nz-tooltip","","nzTooltipTitle","\u6253\u5f00\u4e3b\u64ad\u4e2a\u4eba\u7a7a\u95f4\u9875\u9762","nzTooltipPlacement","right",1,"user-name"],["target","_blank",3,"href"],[1,"live-status"],[3,"ngSwitch"],["nzColor","default",4,"ngSwitchCase"],["nzColor","red",4,"ngSwitchCase"],["nzColor","green",4,"ngSwitchCase"],["nzColor","default"],["nz-icon","","nzType","frown"],["nzColor","red"],["nz-icon","","nzType","fire"],["nzColor","green"],["nz-icon","","nzType","sync","nzSpin",""],[1,"meta-desc"],[1,"room-id-wrapper"],[1,"room-id-label"],["class","short-room-id","nz-tooltip","","nzTooltipTitle","\u6253\u5f00\u76f4\u64ad\u95f4\u9875\u9762","nzTooltipPlacement","bottom",4,"ngIf"],["nz-tooltip","","nzTooltipTitle","\u6253\u5f00\u76f4\u64ad\u95f4\u9875\u9762","nzTooltipPlacement","bottom",1,"real-room-id"],["nz-tooltip","","nzTooltipTitle","\u6253\u5f00\u76f4\u64ad\u5206\u533a\u9875\u9762","nzTooltipPlacement","leftTop",1,"area-name"],[3,"nzColor"],["nz-tooltip","","nzTooltipTitle","\u6253\u5f00\u76f4\u64ad\u95f4\u9875\u9762","nzTooltipPlacement","bottom",1,"short-room-id"],["nz-tooltip","","nzTooltipTitle","\u5f55\u5236\u5f00\u5173",3,"nzDisabled","ngModel","nzControl","nzLoading","click"],["nz-tooltip","","nzTooltipTitle","\u5207\u5272\u6587\u4ef6",3,"click"],["nz-icon","","nzType","scissor",1,"action-icon"],["nz-tooltip","","nzTooltipTitle","\u4efb\u52a1\u8bbe\u7f6e",3,"click"],["nz-icon","","nzType","setting",1,"action-icon"],[4,"ngIf"],[3,"taskOptions","globalSettings","visible","visibleChange","confirm","afterClose"],["nz-dropdown","","nzPlacement","topRight",3,"nzDropdownMenu",4,"ngIf"],[3,"click",4,"ngIf"],["nz-dropdown","","nzPlacement","topRight",3,"nzDropdownMenu"],["nz-icon","","nzType","more",1,"action-icon"],[3,"click"],["nz-menu","",1,"menu"],["nz-menu-item","",3,"click"],["nzPlacement","bottom","nzHeight","auto",3,"nzClosable","nzBodyStyle","nzVisible","nzVisibleChange","nzOnClose"],[4,"nzDrawerContent"],[1,"drawer-content",3,"click"]],template:function(o,e){if(1&o&&(t.TgZ(0,"nz-card",0)(1,"nz-skeleton",1),t._UZ(2,"nz-card-meta",2),t.qZA()(),t.YNc(3,ma,9,12,"ng-template",null,3,t.W1O),t.YNc(5,ha,3,7,"ng-template",null,4,t.W1O),t.YNc(7,Ta,9,6,"ng-template",null,5,t.W1O),t.YNc(9,Da,12,7,"ng-template",null,6,t.W1O),t.YNc(11,ka,1,4,"ng-template",null,7,t.W1O),t.YNc(13,Ma,2,2,"ng-template",null,8,t.W1O),t.YNc(15,va,3,1,"ng-template",null,9,t.W1O),t.YNc(17,Pa,2,2,"ng-template",null,10,t.W1O),t.TgZ(19,"nz-dropdown-menu",null,11),t.GkF(21,12),t.YNc(22,ya,15,0,"ng-template",null,13,t.W1O),t.qZA(),t.YNc(24,Fa,2,4,"nz-drawer",14)),2&o){const i=t.MAs(4),a=t.MAs(6),s=t.MAs(8),d=t.MAs(10),C=t.MAs(12),z=t.MAs(14),M=t.MAs(16),A=t.MAs(18),l=t.MAs(23);t.Q6J("nzCover",i)("nzHoverable",!0)("nzActions",t.l5B(12,wa,z,M,C,A))("nzBodyStyle",t.DdM(17,Ia)),t.xp6(1),t.Q6J("nzActive",!0)("nzLoading",!e.data)("nzAvatar",t.DdM(18,Na)),t.xp6(1),t.Q6J("nzAvatar",a)("nzTitle",s)("nzDescription",d),t.xp6(19),t.Q6J("ngTemplateOutlet",l),t.xp6(3),t.Q6J("ngIf",e.useDrawer)}},dependencies:[c.O5,c.tP,c.RF,c.n9,p.JJ,p.On,E.bd,E.l7,we,Yt.Dz,P.Ls,it.SY,Wt,Ft.i,Ct.wO,Ct.r9,j.cm,j.RR,Lt.w,at.Vz,at.SQ,rt.rH,Tt,xt,_a.i,c.Ov,Dt],styles:['.cover-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#fff;text-shadow:1px 1px 2px black;margin:0;padding:0 .5rem;background:rgba(0,0,0,.32)}.drawer-content[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{box-shadow:none;padding:.5em 0}.drawer-content[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   *[nz-menu-item][_ngcontent-%COMP%]{margin:0;padding:.5em 2em}.stopped[_nghost-%COMP%]{filter:grayscale(100%)}a[_ngcontent-%COMP%]{color:inherit}a[_ngcontent-%COMP%]:hover{color:#1890ff}a[_ngcontent-%COMP%]:focus-visible{outline:-webkit-focus-ring-color auto 1px}.cover-wrapper[_ngcontent-%COMP%]{--cover-ratio: 264 / 470;--cover-height: calc(var(--card-width) * var(--cover-ratio));position:relative;width:var(--card-width);height:var(--cover-height)}.cover-wrapper[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]{width:100%;max-height:var(--cover-height);object-fit:cover}.cover-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:absolute;top:.5rem;left:.5rem;font-size:1.2rem;width:-moz-fit-content;width:fit-content;max-width:calc(100% - 1em);overflow:hidden;white-space:nowrap;text-overflow:ellipsis}nz-card-meta[_ngcontent-%COMP%]{margin:0}.meta-title[_ngcontent-%COMP%]{margin:0;display:flex;column-gap:1em}.meta-title[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{color:#fb7299;font-size:1rem;font-weight:700;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.meta-title[_ngcontent-%COMP%]   .live-status[_ngcontent-%COMP%]   nz-tag[_ngcontent-%COMP%]{margin:0;position:relative;bottom:1px}.meta-desc[_ngcontent-%COMP%]{margin:0;display:flex}.meta-desc[_ngcontent-%COMP%]   .room-id-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.meta-desc[_ngcontent-%COMP%]   .room-id-wrapper[_ngcontent-%COMP%]   .short-room-id[_ngcontent-%COMP%]:after{display:inline-block;width:1em;content:","}@media screen and (max-width: 320px){.meta-desc[_ngcontent-%COMP%]   .room-id-wrapper[_ngcontent-%COMP%]   .room-id-label[_ngcontent-%COMP%]{display:none}}.meta-desc[_ngcontent-%COMP%]   .area-name[_ngcontent-%COMP%]{margin-left:auto}.meta-desc[_ngcontent-%COMP%]   .area-name[_ngcontent-%COMP%]   nz-tag[_ngcontent-%COMP%]{margin:0;border-radius:30px;padding:0 1em}.action-icon[_ngcontent-%COMP%]{font-size:16px}.not-allowed[_ngcontent-%COMP%]{cursor:not-allowed}'],changeDetection:0});class Mt{constructor(){this.dataList=[]}trackByRoomId(o,e){return e.room_info.room_id}}Mt.\u0275fac=function(o){return new(o||Mt)},Mt.\u0275cmp=t.Xpm({type:Mt,selectors:[["app-task-list"]],inputs:{dataList:"dataList"},decls:3,vars:2,consts:[["class","empty-container",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"empty-container"],[1,"tasks-container"],["tasks",""],[3,"data",4,"ngFor","ngForOf","ngForTrackBy"],[3,"data"]],template:function(o,e){if(1&o&&(t.YNc(0,Za,2,0,"div",0),t.YNc(1,Ua,3,2,"ng-template",null,1,t.W1O)),2&o){const i=t.MAs(2);t.Q6J("ngIf",0===e.dataList.length)("ngIfElse",i)}},dependencies:[c.sg,c.O5,Vt.p9,kt],styles:["[_nghost-%COMP%]{height:100%;width:100%;position:relative;display:block;margin:0;padding:1rem;background:#f1f1f1;overflow:auto}[_nghost-%COMP%]{--card-width: 400px;--grid-gutter: 12px;padding:var(--grid-gutter)}@media screen and (max-width: 400px){[_nghost-%COMP%]{--card-width: 100%;padding:var(--grid-gutter) 0}}.tasks-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,var(--card-width));gap:var(--grid-gutter);justify-content:center;max-width:100%;margin:0 auto}.empty-container[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;align-items:center;justify-content:center}"],changeDetection:0});var Ra=r(4351);function La(n,o){1&n&&(t.ynx(0),t._uU(1," \u8bf7\u8f93\u5165\u76f4\u64ad\u95f4\u53f7\u6216 URL "),t.BQk())}function Ja(n,o){1&n&&(t.ynx(0),t._uU(1," \u8f93\u5165\u6709\u9519\u8bef "),t.BQk())}function Qa(n,o){if(1&n&&(t.YNc(0,La,2,0,"ng-container",8),t.YNc(1,Ja,2,0,"ng-container",8)),2&n){const e=o.$implicit;t.Q6J("ngIf",e.hasError("required")),t.xp6(1),t.Q6J("ngIf",e.hasError("pattern"))}}function Ka(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"nz-alert",9),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("nzType",e.type)("nzMessage",e.message)}}function Ga(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"form",2)(2,"nz-form-item")(3,"nz-form-control",3),t._UZ(4,"input",4),t.YNc(5,Qa,2,2,"ng-template",null,5,t.W1O),t.qZA()()(),t.TgZ(7,"div",6),t.YNc(8,Ka,2,2,"ng-container",7),t.qZA(),t.BQk()),2&n){const e=t.MAs(6),i=t.oxw();t.xp6(1),t.Q6J("formGroup",i.formGroup),t.xp6(2),t.Q6J("nzErrorTip",e),t.xp6(1),t.Q6J("pattern",i.pattern),t.xp6(4),t.Q6J("ngForOf",i.resultMessages)}}const Wa=/^https?:\/\/live\.bilibili\.com\/(\d+).*$/,Ya=/^\s*(?:\d+(?:[ ]+\d+)*|https?:\/\/live\.bilibili\.com\/\d+.*)\s*$/;class Ot{constructor(o,e,i){this.changeDetector=e,this.taskManager=i,this.visible=!1,this.visibleChange=new t.vpe,this.pending=!1,this.resultMessages=[],this.pattern=Ya,this.formGroup=o.group({input:["",[p.kI.required,p.kI.pattern(this.pattern)]]})}get inputControl(){return this.formGroup.get("input")}open(){this.setVisible(!0)}close(){this.resultMessages=[],this.reset(),this.setVisible(!1)}setVisible(o){this.visible=o,this.visibleChange.emit(o),this.changeDetector.markForCheck()}reset(){this.pending=!1,this.formGroup.reset(),this.changeDetector.markForCheck()}handleCancel(){this.close()}handleConfirm(){this.pending=!0;const o=this.inputControl.value.trim();let e;e=o.startsWith("http")?[parseInt(Wa.exec(o)[1])]:new Set(o.split(/\s+/).map(i=>parseInt(i))),(0,Qt.D)(e).pipe((0,Ra.b)(i=>this.taskManager.addTask(i)),(0,v.b)(i=>{this.resultMessages.push(i),this.changeDetector.markForCheck()})).subscribe({complete:()=>{this.resultMessages.every(i=>"success"===i.type)?this.close():this.reset()}})}}Ot.\u0275fac=function(o){return new(o||Ot)(t.Y36(p.qu),t.Y36(t.sBO),t.Y36(Q))},Ot.\u0275cmp=t.Xpm({type:Ot,selectors:[["app-add-task-dialog"]],inputs:{visible:"visible"},outputs:{visibleChange:"visibleChange"},decls:2,vars:6,consts:[["nzTitle","\u6dfb\u52a0\u4efb\u52a1","nzCentered","","nzOkText","\u6dfb\u52a0",3,"nzVisible","nzOkLoading","nzOkDisabled","nzCancelDisabled","nzClosable","nzMaskClosable","nzOnOk","nzOnCancel"],[4,"nzModalContent"],["nz-form","",3,"formGroup"],["nzHasFeedback","",3,"nzErrorTip"],["nz-input","","required","","placeholder","\u76f4\u64ad\u95f4 URL \u6216\u623f\u95f4\u53f7\uff08\u652f\u6301\u591a\u4e2a\u623f\u95f4\u53f7\u7528\u7a7a\u683c\u9694\u5f00\uff09","formControlName","input",3,"pattern"],["errorTip",""],[1,"result-messages-container"],[4,"ngFor","ngForOf"],[4,"ngIf"],["nzShowIcon","",3,"nzType","nzMessage"]],template:function(o,e){1&o&&(t.TgZ(0,"nz-modal",0),t.NdJ("nzOnOk",function(){return e.handleConfirm()})("nzOnCancel",function(){return e.handleCancel()}),t.YNc(1,Ga,9,4,"ng-container",1),t.qZA()),2&o&&t.Q6J("nzVisible",e.visible)("nzOkLoading",e.pending)("nzOkDisabled",e.formGroup.invalid)("nzCancelDisabled",e.pending)("nzClosable",!e.pending)("nzMaskClosable",!e.pending)},dependencies:[c.sg,c.O5,p._Y,p.Fj,p.JJ,p.JL,p.Q7,p.c5,p.sg,p.u,O.t3,O.SK,K.du,K.Hf,R.Lr,R.Nx,R.Fd,V.Zp,pn],styles:[".result-messages-container[_ngcontent-%COMP%]{width:100%;max-height:200px;overflow-y:auto}"],changeDetection:0});class vt{transform(o,e=""){return console.debug("filter tasks by '%s'",e),[...this.filterByTerm(o,e)]}filterByTerm(o,e){return function*qa(n,o){for(const e of n)o(e)&&(yield e)}(o,i=>""===(e=e.trim())||i.user_info.name.includes(e)||i.room_info.title.toString().includes(e)||i.room_info.area_name.toString().includes(e)||i.room_info.room_id.toString().includes(e)||i.room_info.short_room_id.toString().includes(e))}}function $a(n,o){if(1&n&&t._UZ(0,"nz-spin",6),2&n){const e=t.oxw();t.Q6J("nzSize","large")("nzSpinning",e.loading)}}function ja(n,o){if(1&n&&(t._UZ(0,"app-task-list",7),t.ALo(1,"filterTasks")),2&n){const e=t.oxw();t.Q6J("dataList",t.xi3(1,1,e.dataList,e.filterTerm))}}vt.\u0275fac=function(o){return new(o||vt)},vt.\u0275pipe=t.Yjl({name:"filterTasks",type:vt,pure:!0});const Te="app-tasks-selection",xe="app-tasks-reverse";class Et{constructor(o,e,i,a){this.changeDetector=o,this.notification=e,this.storage=i,this.taskService=a,this.loading=!0,this.dataList=[],this.filterTerm="",this.selection=this.retrieveSelection(),this.reverse=this.retrieveReverse()}ngOnInit(){this.syncTaskData()}ngOnDestroy(){this.desyncTaskData()}onSelectionChanged(o){this.selection=o,this.storeSelection(o),this.desyncTaskData(),this.syncTaskData()}onReverseChanged(o){this.reverse=o,this.storeReverse(o),o&&(this.dataList=[...this.dataList.reverse()],this.changeDetector.markForCheck())}retrieveSelection(){const o=this.storage.getData(Te);return null!==o?o:m.jf.ALL}retrieveReverse(){return"true"===this.storage.getData(xe)}storeSelection(o){this.storage.setData(Te,o)}storeReverse(o){this.storage.setData(xe,o.toString())}syncTaskData(){this.dataSubscription=(0,w.of)((0,w.of)(0),(0,pe.F)(1e3)).pipe((0,de.u)(),(0,st.w)(()=>this.taskService.getAllTaskData(this.selection)),(0,lt.K)(o=>{throw this.notification.error("\u83b7\u53d6\u4efb\u52a1\u6570\u636e\u51fa\u9519",o.message),o}),(0,Bt.X)(10,3e3)).subscribe(o=>{this.loading=!1,this.dataList=this.reverse?o.reverse():o,this.changeDetector.markForCheck()},o=>{this.notification.error("\u83b7\u53d6\u4efb\u52a1\u6570\u636e\u51fa\u9519","\u7f51\u7edc\u8fde\u63a5\u5f02\u5e38, \u8bf7\u5f85\u7f51\u7edc\u6b63\u5e38\u540e\u5237\u65b0\u3002",{nzDuration:0})})}desyncTaskData(){this.dataSubscription?.unsubscribe()}}Et.\u0275fac=function(o){return new(o||Et)(t.Y36(t.sBO),t.Y36(me.zb),t.Y36(Ce.V),t.Y36(Ut.M))},Et.\u0275cmp=t.Xpm({type:Et,selectors:[["app-tasks"]],decls:8,vars:4,consts:[[3,"selection","reverse","selectionChange","reverseChange","filterChange"],["class","spinner",3,"nzSize","nzSpinning",4,"ngIf","ngIfElse"],["elseBlock",""],["nz-button","","nzType","primary","nzSize","large","nzShape","circle","nz-tooltip","","nzTooltipTitle","\u6dfb\u52a0\u4efb\u52a1",1,"add-task-button",3,"click"],["nz-icon","","nzType","plus"],["addTaskDialog",""],[1,"spinner",3,"nzSize","nzSpinning"],[3,"dataList"]],template:function(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"app-toolbar",0),t.NdJ("selectionChange",function(s){return e.onSelectionChanged(s)})("reverseChange",function(s){return e.onReverseChanged(s)})("filterChange",function(s){return e.filterTerm=s}),t.qZA(),t.YNc(1,$a,1,2,"nz-spin",1),t.YNc(2,ja,2,4,"ng-template",null,2,t.W1O),t.TgZ(4,"button",3),t.NdJ("click",function(){t.CHM(i);const s=t.MAs(7);return t.KtG(s.open())}),t._UZ(5,"i",4),t.qZA(),t._UZ(6,"app-add-task-dialog",null,5)}if(2&o){const i=t.MAs(3);t.Q6J("selection",e.selection)("reverse",e.reverse),t.xp6(1),t.Q6J("ngIf",e.loading)("ngIfElse",i)}},dependencies:[c.O5,P.Ls,it.SY,At.ix,Lt.w,Di.dQ,Ht.W,zt,Mt,Ot,vt],styles:["[_nghost-%COMP%]{height:100%;width:100%;position:relative;display:block;margin:0;padding:1rem;background:#f1f1f1;overflow:auto}.spinner[_ngcontent-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]{display:flex;flex-direction:column;padding:0;overflow:hidden}.add-task-button[_ngcontent-%COMP%]{position:fixed;bottom:5vh;right:5vw}"],changeDetection:0});const Va=[{path:":id/detail",component:ht},{path:"",component:Et}];class nt{}nt.\u0275fac=function(o){return new(o||nt)},nt.\u0275mod=t.oAB({type:nt}),nt.\u0275inj=t.cJS({imports:[rt.Bz.forChild(Va),rt.Bz]});class ot{}ot.\u0275fac=function(o){return new(o||ot)},ot.\u0275mod=t.oAB({type:ot}),ot.\u0275inj=t.cJS({imports:[c.ez,p.u5,p.UX,h.xu,g,O.Jb,E.vh,qt,Yt.Rt,P.PV,qt,it.cg,ke,Ft.m,j.b1,At.sL,K.Qp,R.U5,V.o7,$t.Wr,Ye,Pt.aF,jt.S,Vt.Xo,Ht.j,gn,at.BL,wt.LV,Rn,L.HQ,Xn,Io,Jo.forRoot({echarts:()=>r.e(386).then(r.bind(r,7386))}),nt,Qo.m]})},7445:(x,D,r)=>{r.d(D,{F:()=>h});var c=r(4986),p=r(5963);function h(t=0,f=c.z){return t<0&&(t=0),(0,p.H)(t,t,f)}},7188:(x,D,r)=>{r.d(D,{$:()=>u});var c=r(9751),p=r(8421);const{isArray:h}=Array;var f=r(515),_=r(5403),q=r(3269);function u(...g){const O=(0,q.jO)(g),E=function t(g){return 1===g.length&&h(g[0])?g[0]:g}(g);return E.length?new c.y(P=>{let T=E.map(()=>[]),F=E.map(()=>!1);P.add(()=>{T=F=null});for(let y=0;!P.closed&&y<E.length;y++)(0,p.Xf)(E[y]).subscribe((0,_.x)(P,$=>{if(T[y].push($),T.every(k=>k.length)){const k=T.map(S=>S.shift());P.next(O?O(...k):k),T.some((S,bt)=>!S.length&&F[bt])&&P.complete()}},()=>{F[y]=!0,!T[y].length&&P.complete()}));return()=>{T=F=null}}):f.E}}}]);